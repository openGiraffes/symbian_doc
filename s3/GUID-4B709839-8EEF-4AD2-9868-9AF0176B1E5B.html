
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:00:40 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="task" /><meta name="DC.Title" content="Using Sensor Channels APIs" /><meta name="abstract" content="The Sensor Channel establishes a data exchange connection between the sensor framework and hardware using the sensor channel APIs." /><meta name="description" content="The Sensor Channel establishes a data exchange connection between the sensor framework and hardware using the sensor channel APIs." /><meta name="DC.Relation" scheme="URI" content="GUID-44FDDA27-1A5D-42B5-8DE0-D9E88EB75C93" /><meta name="DC.Relation" scheme="URI" content="GUID-BA0D9DA9-3B54-4964-A4D6-9ADA4DEB7231" /><meta name="DC.Relation" scheme="URI" content="GUID-83630B57-D842-4B60-8AF0-D2965251DE29" /><meta name="DC.Relation" scheme="URI" content="GUID-0CA7F22E-59D7-4D65-9D6C-735E4E0F0454" /><meta name="DC.Relation" scheme="URI" content="GUID-E93EE459-8CF4-42A1-B06C-E78E56FD25A0" /><meta name="DC.Relation" scheme="URI" content="GUID-09E44FE5-6BEE-49FF-8BBF-CBB3C066EE10" /><meta name="DC.Relation" scheme="URI" content="GUID-60EE22AA-402D-4FC2-9AD1-B3AEF822E8DC" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-F8C8CE42-E7C9-5AFC-86BC-B78F677F1B05" /><meta name="DC.Relation" scheme="URI" content="GUID-E3ADCC42-ACFC-49FC-88FF-8196CE61014B" /><meta name="DC.Relation" scheme="URI" content="GUID-9102DB10-3B93-4E79-9125-25791CEEBEFB" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B" /><meta name="DC.Language" content="en" /><title>Using
Sensor Channels APIs </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B">Using
Sensor Channels APIs</h1><div><p>The Sensor Channel establishes a data exchange connection between
the sensor framework and hardware using the sensor channel APIs.</p>
<h3>Steps</h3><ol id="GUID-4DD07DEC-6017-4237-BE46-1D69E5FBD744-GENID-GUID-BE8B746C-D4C5-4B47-8D7D-5DAA272B1433"><a name="GUID-4DD07DEC-6017-4237-BE46-1D69E5FBD744-GENID-GUID-BE8B746C-D4C5-4B47-8D7D-5DAA272B1433"><!-- --></a>
<li id="GUID-9A69E5AD-E938-4092-A8C2-CB65C37C8962-GENID-GUID-BE8B746C-D4C5-4B47-8D7D-5DAA272B1433"><a name="GUID-9A69E5AD-E938-4092-A8C2-CB65C37C8962-GENID-GUID-BE8B746C-D4C5-4B47-8D7D-5DAA272B1433"><!-- --></a><p>Include the library <strong>SensrvClient.lib</strong> in
your <strong>.mmp</strong> file.</p>
</li>
<li id="GUID-4F637EBD-BD56-44FA-A984-E93CC4B2B3B6"><a name="GUID-4F637EBD-BD56-44FA-A984-E93CC4B2B3B6"><!-- --></a><p>Include the following
header files, as they are required for accessing sensor channels regardless
of the channel type: </p>
<ul>
<li><p>sensrvchannel.h</p></li>
<li><p>sensrvchannelinfo.h</p></li>
<li><p>sensrvtypes.h</p></li>
<li><p>sensrvchannelfinder.h</p></li>
<li><p>sensrvdatalistener.h</p></li>
</ul>
</li>
<li id="GUID-F5BC52B6-67DD-4F59-889B-C5DE4C69029B"><a name="GUID-F5BC52B6-67DD-4F59-889B-C5DE4C69029B"><!-- --></a><p>Retrieve details
about the required sensor channel. For details. see <a href="GUID-44FDDA27-1A5D-42B5-8DE0-D9E88EB75C93.html">Querying
for Sensor Channels</a>.</p>
</li>
<li id="GUID-FBBD3A8B-F240-4DC0-B516-3A51FDD86A88"><a name="GUID-FBBD3A8B-F240-4DC0-B516-3A51FDD86A88"><!-- --></a><p>Connect to the sensor
by opening a connection with the sensor channel.</p>
<ol type="i" id="GUID-C9E5B9FC-C637-4DEB-AAAF-E38C6CD9A18A"><a name="GUID-C9E5B9FC-C637-4DEB-AAAF-E38C6CD9A18A"><!-- --></a>
<li id="GUID-CA2CFF9C-3168-4060-AC39-8CB6FBA4BCA2"><a name="GUID-CA2CFF9C-3168-4060-AC39-8CB6FBA4BCA2"><!-- --></a><p>Create an instance
of <code class="codeph">CSensrvChannel</code> and specify the instance of <code class="codeph">TSensrvChannelInfo</code> returned
by <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-5F108D03-C8A6-3EF9-B103-2E8916633602.html#GUID-E58BAF1B-57AA-3E85-A4F9-8C6C29043FBD"><code class="apiname">CSensrvChannelFinder::FindChannelsL()</code></a>, as a parameter
in the <code class="codeph">NewL()</code> constructor.</p>
<pre class="codeblock"> CSensrvChannel* sensorChannel;
 sensorChannel = CSensrvChannel::NewL(channelInfoList[0]);// channelInfoList is
//   returned by the CSensrvChannelFinder::FindChannelsL()funtion</pre>
</li>
<li id="GUID-30E6033F-E316-4BDB-AF22-2369463DF709"><a name="GUID-30E6033F-E316-4BDB-AF22-2369463DF709"><!-- --></a><p>Open the sensor
channel using CSensrvChannel::OpenChannelL() function.</p>
<pre class="codeblock">channel-&gt;OpenChannelL();</pre>
</li>
</ol>
</li>
<li id="GUID-7A414271-040C-4107-B047-9416747C66A6"><a name="GUID-7A414271-040C-4107-B047-9416747C66A6"><!-- --></a><p>Perform any of the
following operations:</p>
<ul>
<li><a href="GUID-BA0D9DA9-3B54-4964-A4D6-9ADA4DEB7231.html">Receive data from
sensors</a></li>
<li><a href="GUID-09E44FE5-6BEE-49FF-8BBF-CBB3C066EE10.html">Listen for channel
changes</a></li>
<li><a href="GUID-83630B57-D842-4B60-8AF0-D2965251DE29.html">Retrieve channel
properties</a></li>
<li><a href="GUID-0CA7F22E-59D7-4D65-9D6C-735E4E0F0454.html">Set channel properties</a></li>
<li><a href="GUID-E93EE459-8CF4-42A1-B06C-E78E56FD25A0.html">Listen for channel
property changes</a></li>
<li><a href="GUID-60EE22AA-402D-4FC2-9AD1-B3AEF822E8DC.html">Receive channel
data based on conditions</a></li>
</ul>
</li>
<li id="GUID-61840C55-476C-4DC3-A946-A440330B9DE5"><a name="GUID-61840C55-476C-4DC3-A946-A440330B9DE5"><!-- --></a><p>Close the channel.</p>
<pre class="codeblock">channel-&gt;CloseChannel();</pre><div class="note"><p><strong class="note_title">Important: </strong> A
channel must be closed when not required, as it reduces power consumption
of the Symbian device. An open sensor channel keeps the device processor active
each time data arrives. Therefore, the processor does not change to idle state
even when the device user is not performing any operations on the device.</p></div>
</li>
</ol>
</div><ul class="ullinks"><li class="ulchildlink"><a href="GUID-44FDDA27-1A5D-42B5-8DE0-D9E88EB75C93.html">Querying
for Sensor Channels</a><div class="linkdesc">You can retrieve a list of sensor channels that are available for
a particular sensor type. Once you get the list of sensor channels that are
active, you can perform any required operations such as configuring sensor
channel properties, controlling sensor channels and so on.</div></li><li class="ulchildlink"><a href="GUID-BA0D9DA9-3B54-4964-A4D6-9ADA4DEB7231.html">Receiving
Data from Sensors</a><div class="linkdesc">You can implement a data listener to receive data from the sensors.
Based on the data received, you can perform specific actions on the Symbian
device. For example, if you receive information from the sensor about the
distance between the device and the user then based on this information, you
can disable or enable the loudspeaker mode on the Symbian device.</div></li><li class="ulchildlink"><a href="GUID-83630B57-D842-4B60-8AF0-D2965251DE29.html">Retrieving
Channel Properties</a><div class="linkdesc">A sensor channel is associated with properties such as channel
availability status, data transmission rate, data format and so on. Also,
each field in the data type supplied by a sensor channel can have its own
properties. The channel properties can be retrieved using the <code class="codeph">CSensrvChannel::GetPropertyL()</code> and <code class="codeph">CSensrvChannel::GetAllPropertiesL()</code> functions.</div></li><li class="ulchildlink"><a href="GUID-0CA7F22E-59D7-4D65-9D6C-735E4E0F0454.html">Setting Channel Properties</a><div class="linkdesc">The channel properties can be configured using the <code class="codeph">CSensrvChannel::SetProperty()</code> function.</div></li><li class="ulchildlink"><a href="GUID-E93EE459-8CF4-42A1-B06C-E78E56FD25A0.html">Listening
for Property Changes</a><div class="linkdesc">The sensor channel APIs enable the client applications to be notified
about the changes to properties associated with a sensor channel.</div></li><li class="ulchildlink"><a href="GUID-09E44FE5-6BEE-49FF-8BBF-CBB3C066EE10.html">Listening
for Channel Changes</a><div class="linkdesc">The sensor channel APIs enable you to receive notifications when
a sensor channel is added or removed. This ensures that you are informed of
changes to sensor channels whenever there is a change. For example, you can
receive notifications when a specific proximity sensor channel is added.</div></li><li class="ulchildlink"><a href="GUID-60EE22AA-402D-4FC2-9AD1-B3AEF822E8DC.html">Receiving
Channel Data based on Conditions</a><div class="linkdesc">Conditional listening enables you to receive sensor data feeds
based on a specific condition. For example, you can choose to receive sensor
feeds that are only movement specific.</div></li></ul></div></div><div class="footer"><p class="metadata">Last updated December 29th, 2009</p><hr /><div class="copy">Â© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:00:40 GMT -->
</html>