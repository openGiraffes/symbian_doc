
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-CF34D34E-FF17-5395-A1CD-768414E0B014.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:00:32 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Database Management" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-0522B178-0FD5-4416-B7FE-390749F7A13D" /><meta name="DC.Relation" scheme="URI" content="GUID-3AF6CE70-DDBE-53F3-ABB6-7E78A300F14B" /><meta name="DC.Relation" scheme="URI" content="GUID-12D1EE2F-AF1E-4C53-ADC8-D8BC205BD063" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-CF34D34E-FF17-5395-A1CD-768414E0B014" /><meta name="DC.Language" content="en" /><title>Database Management </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-CF34D34E-FF17-5395-A1CD-768414E0B014">Database Management</h1><div><p>The Contact Database is a database of Contact Items. The main API to the Contact Database is provided by the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html"><code class="apiname">CContactDatabase</code></a> class. The <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html"><code class="apiname">CContactDatabase</code></a> class allows clients to create (<a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-FB3A2CFA-21A0-3EE1-8267-30AB94720166"><code class="apiname">CContactDatabase::CreateL()</code></a>) a new Contact Database, or open (<a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-5C43E2F0-BFC2-378A-8A1F-3641FF9DB764"><code class="apiname">CContactDatabase::OpenL()</code></a>) an existing one. </p> <p>Once opened, the database can be searched and sorted, and items within it can be edited or read, new items can be added and existing ones can be deleted (<a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-5DE9AB9D-CD86-3EB1-9A91-68A1235BF162"><code class="apiname">CContactDatabase::doDeleteContactL()</code></a>). To edit an item, it must first be opened. Changes to the item can then be committed to storage using <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-35AD302C-659C-3705-961A-3730F2975B25"><code class="apiname">CContactDatabase::CommitContactL()</code></a>. Only open items can be committed. </p> <p>Client applications that need to be updated dynamically, as the database is altered by other clients, should derive from class <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4928B1DE-9800-3887-B456-2DDFE810AFD9.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4928B1DE-9800-3887-B456-2DDFE810AFD9.html"><code class="apiname">MContactDbObserver</code></a>. The observer's <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4928B1DE-9800-3887-B456-2DDFE810AFD9.html#GUID-DECA9730-0504-3D4F-85D4-AFAC70B46580"><code class="apiname">MContactDbObserver::HandleDatabaseEventL()</code></a> function will be called in response to each change to the database. </p> <p>When contacts are modified the database can become fragmented, limiting the amount of space available. This leads to less efficient storage. To determine whether defragmentation is required for the database use <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-44EBA5DD-F790-30C2-AB22-AC6E3F2A1D3D"><code class="apiname">CContactDatabase::CompressRequired()</code></a>.This function provides an easy way of testing whether the database is being used efficiently. ETrue is returned if a compression of the database is recommended. To compress the database to its minimum size use <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-ECF0D06A-E1E5-3285-994B-34D59BB588D8"><code class="apiname">CContactDatabase::CompactL()</code></a>. </p> <p> <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-BA8E31EE-0AE4-36E2-9AE4-88ADF63C85FE"><code class="apiname">CContactDatabase::IsDamaged()</code></a> tests to see whether the database is corrupted and needs to be recovered. If the database is corrupted it can be recovered through a rollback. <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-D14DFE6F-90E9-33DD-A108-10A23A8D5B53"><code class="apiname">CContactDatabase::RecoverL()</code></a> first closes all tables in the database and then reopens them after the database is repaired. <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-5443434C-ADCD-348D-84EC-BBB40EF689EE"><code class="apiname">CContactDatabase::DatabaseRollback()</code></a> will force a rollback of the database. </p> </div></div></div><div class="footer"><p class="metadata">Last updated October 9th, 2009</p><hr /><div class="copy">Â© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-CF34D34E-FF17-5395-A1CD-768414E0B014.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:00:32 GMT -->
</html>