
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-96C49728-8C78-4D82-876D-6B1196362D44.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 05:58:20 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Setting button properties not specific to any state" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-94005A46-B4C6-4A30-A8E8-1B9C2D583D50" /><meta name="DC.Relation" scheme="URI" content="GUID-E35887BB-7E58-438C-AA27-97B2CDE7E069_overview-GUID-8C40E993-C9A0-423D-979D-7BB11CE091C1" /><meta name="DC.Relation" scheme="URI" content="GUID-E35887BB-7E58-438C-AA27-97B2CDE7E069_overview-GUID-FA9679A1-6FD7-4FB6-883A-D5719388A2B6" /><meta name="DC.Relation" scheme="URI" content="GUID-F3EE1000-71A6-4D48-A30B-3D2357BF20FB" /><meta name="DC.Relation" scheme="URI" content="GUID-97712509-84AD-462F-8FFB-E1E6D8278938" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-96C49728-8C78-4D82-876D-6B1196362D44" /><meta name="DC.Language" content="en" /><title>Setting button properties not specific to any state </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-96C49728-8C78-4D82-876D-6B1196362D44">Setting button properties not specific to any state</h1><div>
<div id="GUID-03E298C7-E545-423F-B1FE-52EDDFEDEDC9"><h3 class="section-title">Button frame</h3> <p>If the button has a frame, change its
features by setting new frame IDs using the method <code class="codeph">SetFrameAndCenterIds()</code> in the class <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-F9089821-1D3A-32C3-BCC9-108978998DEF.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-F9089821-1D3A-32C3-BCC9-108978998DEF.html"><code class="apiname">CAknButton</code></a>. </p><p>Use the flag <code class="codeph">KAknButtonStateHasLatchedFrame</code> for
a button state to set whether the frame for the button in the state
in question should look latched down. </p><p>To disable the frame
for the button, use the <code class="codeph">KAknButtonNoFrame</code> flag.</p> </div>
<div id="GUID-3ED77835-CFA7-45EB-8DC7-548A46C39936"><h3 class="section-title">Button
text</h3><p>By default, the button text is truncated to fit the
size of the button. Use the <code class="codeph">KAknButtonSizeFitText</code> flag to make the method <code class="codeph">MinimumSize()</code> return the
size into which the text fits. To change the font, color, and alignment
of the text, use the following methods in <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-F9089821-1D3A-32C3-BCC9-108978998DEF.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-F9089821-1D3A-32C3-BCC9-108978998DEF.html"><code class="apiname">CAknButton</code></a>:</p><ul>
<li><p><code class="codeph">SetTextFont()</code></p></li>
<li><p><code class="codeph">SetTextColorIds()</code></p></li>
<li><p><code class="codeph">SetTextHorizontalAlignment()</code></p></li>
<li><p><code class="codeph">SetTextVerticalAlignment()</code></p></li>
</ul></div>
<div id="GUID-068F5301-03A8-43BF-A274-5359D7073500"><h3 class="section-title">Button
icon</h3><p>If you use an icon in your button, you can use the
same icon for both the pressed and non-pressed states; however, for
the dimmed state another icon is recommended. For the icon's appearance,
follow the <a href="GUID-EB212C35-5416-4CA7-8091-61B45D78E220.html">Symbian look and feel guidelines</a>. Dimmed icons are generated
automatically if they are not provided by the application.</p><p>To
change the scale mode for the icon image, use the method CAnkButton::SetIconScaleMode(). By default, the button
component uses the <code class="codeph">EAspectRatioNotPreserved</code> mode,
so that the icon fits the size of the button. To adjust the icon’s
alignment on the button, use the methods <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-F9089821-1D3A-32C3-BCC9-108978998DEF.html#GUID-25F71575-1668-3A63-9C39-EA676CF63DEA"><code class="apiname">CAknButton::SetIconHorizontalAlignment()</code></a> and <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-F9089821-1D3A-32C3-BCC9-108978998DEF.html#GUID-CDDC113A-3AF9-3326-BCA2-862C6E221C8B"><code class="apiname">CAknButton::SetIconVerticalAlignment()</code></a>.</p></div>
<div id="GUID-96802265-17DD-486C-B7DA-4B74317D9D72"><h3 class="section-title">Button
help text</h3><p>If the button provides a help text, it is shown
close to the button if the button is focused or the stylus is held
down for some time. You can set the state-specific help text when
constructing the button, at the construction of a button state, or
by calling <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4D8D8271-D23C-381D-A8A5-9DAC4E1F9F5B.html#GUID-7DA7F6DC-8AD7-3B96-9713-DC8C7C393F66"><code class="apiname">CAknButtonState::SetHelpTextL()</code></a>. To
set the help text for a dimmed button, use the method <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-F9089821-1D3A-32C3-BCC9-108978998DEF.html#GUID-A20712BE-589A-3901-A012-E7238FEE4A33"><code class="apiname">CAknButton::SetDimmedHelpTextL()</code></a>. </p><p>To change time-outs for the help text, use the method <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-F9089821-1D3A-32C3-BCC9-108978998DEF.html#GUID-B9211E92-B23B-326D-9022-F2B995F22C25"><code class="apiname">CAknButton::SetHelpNoteTimeouts()</code></a>.</p><p>To display and
hide the button help text, use the methods <code class="codeph">ShowHelpL()</code> and <code class="codeph">HideHelp()</code> in the class <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-F9089821-1D3A-32C3-BCC9-108978998DEF.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-F9089821-1D3A-32C3-BCC9-108978998DEF.html"><code class="apiname">CAknButton</code></a>.</p></div>
<div id="GUID-C36C83B8-C98B-43A5-8CD6-A3E729AC0463"><h3 class="section-title">Button
background</h3><p><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-F9089821-1D3A-32C3-BCC9-108978998DEF.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-F9089821-1D3A-32C3-BCC9-108978998DEF.html"><code class="apiname">CAknButton</code></a> supports a background
composed of both a <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html"><code class="apiname">CCoeControl</code></a> background interface
and an Avkon skin background. If both are set, the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html"><code class="apiname">CCoeControl</code></a>-based background has higher priority. In case of <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html"><code class="apiname">CCoeControl</code></a>-based background, do the following in order for the button’s background
to be drawn by the container:</p><ul>
<li><p>Set the container class to be derived from the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-88936D48-B801-3D9C-8A9D-3498807937CE.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-88936D48-B801-3D9C-8A9D-3498807937CE.html"><code class="apiname">MCoeControlBackground</code></a> interface.</p></li>
<li><p>Provide implementation for the <code class="codeph">Draw()</code> method
in the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-88936D48-B801-3D9C-8A9D-3498807937CE.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-88936D48-B801-3D9C-8A9D-3498807937CE.html"><code class="apiname">MCoeControlBackground</code></a> interface.</p></li>
<li><p>Call the <code class="codeph">SetBackground( pointerToContainer )</code> method for the button.</p></li>
</ul><p>If the background is set from the skin, use the method <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-F9089821-1D3A-32C3-BCC9-108978998DEF.html#GUID-3D38650A-313E-368D-B9DD-E474BD11A438"><code class="apiname">CAknButton::SetBackGroundIds()</code></a>.</p><p>For implementation
examples, see the sample code below:</p><pre class="codeblock">// Text alignment top-left corner 
CGraphicsContext::TTextAlign horAlignment( CGraphicsContext::ELeft ); 
CAknButton::TAlignment verAlignment( CAknButton::ETop ); 
textButton-&gt;SetTextHorizontalAlignment( horAlignment ); 
textButton-&gt;SetTextVerticalAlignment( verAlignment ); 

// Preserve icon button aspect ratio 
iconButton-&gt;SetIconScaleMode( EAspectRatioPreserved ); 

// Help texts 
HBufC* helpText = StringLoader::LoadLC( R_MYAPP_HELPTEXT );  
HBufC* dimmedHelpText = StringLoader::LoadLC( R_MYAPP_DIM_HELPTEXT ); 
// Set help text to current state 
textButton-&gt;State()-&gt;SetHelpTextL( *helpText ); 
// Set dimmed help text to all states 
textButton-&gt;SetDimmedHelpTextL( *dimmedHelpText ); 
CleanupStack::PopAndDestroy( 2 );  // helpText, dimmedHelpText 
// Help note timeout adjustments 
const TInt KButtonTimeoutBeforeNote = 300; 
const TInt KButtonTimeoutNoteInView = 5000; 
textButton-&gt;SetHelpNoteTimeouts( KButtonTimeoutBeforeNote, KButtonTimeoutNoteInView ); 
</pre></div>
</div></div></div><div class="footer"><p class="metadata">Last updated January 28th, 2011</p><hr /><div class="copy">© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-96C49728-8C78-4D82-876D-6B1196362D44.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 05:58:20 GMT -->
</html>