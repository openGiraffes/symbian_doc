
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-922442FC-D9E0-53BD-B8AD-011A724C96FF.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:00:30 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="task" /><meta name="DC.Title" content="How to Detect Infrared Capability and Enable Infrared Mode: Tutorial" /><meta name="abstract" content="The Serial Communications Server API includes functionality to detect and configure an Infrared port." /><meta name="description" content="The Serial Communications Server API includes functionality to detect and configure an Infrared port." /><meta name="DC.Relation" scheme="URI" content="GUID-35D49549-1F4D-583F-A45D-9B557A207DD2" /><meta name="DC.Relation" scheme="URI" content="GUID-397239F9-7EE8-52CF-9B37-328AE307BAA0" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04" /><meta name="DC.Relation" scheme="URI" content="GUID-9B83CDD4-FC94-51A0-AC67-CD04BCAFEF08" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-922442FC-D9E0-53BD-B8AD-011A724C96FF" /><meta name="DC.Language" content="en" /><title>How to Detect Infrared Capability and Enable Infrared Mode:
Tutorial </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-922442FC-D9E0-53BD-B8AD-011A724C96FF">How to Detect Infrared Capability and Enable Infrared Mode:
Tutorial</h1><div><p>The Serial Communications Server API includes functionality
to detect and configure an Infrared port. </p>
<div id="GUID-C69EF4BA-4D01-4FEA-A9EC-DFB8AF69BC30"><h3 class="section-title">Context</h3><p>These steps show the functionality of the Serial Communications
Server API for Infrared. At the end of these steps, the port is set
to Infrared mode. A port set to Infrared mode may still require further
configuration specific to the Infrared driver. This further configuration
is not included in this tutorial. </p> </div>
<h3>Steps</h3><ol id="GUID-44197D73-A8BF-5662-B3BC-341766A7159B"><a name="GUID-44197D73-A8BF-5662-B3BC-341766A7159B"><!-- --></a>
<li id="GUID-F614BCBB-696E-50F0-8C99-32D8AB7FC306"><a name="GUID-F614BCBB-696E-50F0-8C99-32D8AB7FC306"><!-- --></a><p>Load the
CSY and open a port.</p>
</li>
<li id="GUID-0745F9D1-81E5-5331-B577-4D959B43635B"><a name="GUID-0745F9D1-81E5-5331-B577-4D959B43635B"><!-- --></a><p>Get the
capabilities of the port by calling <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3B4E8ED5-72F7-3E51-B188-3C1045526DDF.html#GUID-4A6ECC68-EBC7-3B6C-94AE-9272669F6FF2"><code class="apiname">RComm::Caps()</code></a></p>
</li>
<li id="GUID-8911D514-9E2B-55CC-BD74-77BAF1A13F9C"><a name="GUID-8911D514-9E2B-55CC-BD74-77BAF1A13F9C"><!-- --></a><p>Get the
Infrared capabilities by checking the bits in TCommCaps.iSIR with the three bitmasks KCapsSIR115kbps, KCapsSIR2400bpsOnly, and KCapsSIR4Mbps. </p>
If any of the bitmasks show the bit as set, then the port has
Infrared capability. 
The infra-red characteristic of the port can be determined from
the value TCommCapsV01.iSIRSettings. 
</li>
<li id="GUID-CA055EB0-A8E5-5F5C-AD91-44F72CAA638C"><a name="GUID-CA055EB0-A8E5-5F5C-AD91-44F72CAA638C"><!-- --></a><p>To use the
port as an Infrared port, follow these steps: </p>
<ol type="i" id="GUID-F8BE2BA0-7DB1-5813-B291-92B0D640EA9D"><a name="GUID-F8BE2BA0-7DB1-5813-B291-92B0D640EA9D"><!-- --></a>
<li id="GUID-8E02B974-1608-5AB9-808C-89281771712F"><a name="GUID-8E02B974-1608-5AB9-808C-89281771712F"><!-- --></a><p></p>
Create an object of type TCommConfigV01. 
</li>
<li id="GUID-7596BE64-26E6-5F05-A113-CE9F54C66A8E"><a name="GUID-7596BE64-26E6-5F05-A113-CE9F54C66A8E"><!-- --></a><p></p>
Call <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3B4E8ED5-72F7-3E51-B188-3C1045526DDF.html#GUID-4C38E1D8-EC81-36A3-BAA2-4D4FFECFD995"><code class="apiname">RComm::Config()</code></a> with the <code class="codeph">aConfig</code> parameter set to the <code class="codeph">TCommConfigV01</code> object to get
the port configuration. 
</li>
<li id="GUID-17F5B58E-5B10-519C-A6FA-A57BBE6B9FB1"><a name="GUID-17F5B58E-5B10-519C-A6FA-A57BBE6B9FB1"><!-- --></a><p></p>
Set the iSIREnable flag in the <code class="codeph">TCommConfigV01</code> object. 
</li>
<li id="GUID-C2ADDCD3-8B01-5E21-948C-E383D4CB4528"><a name="GUID-C2ADDCD3-8B01-5E21-948C-E383D4CB4528"><!-- --></a><p></p>
Call <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3B4E8ED5-72F7-3E51-B188-3C1045526DDF.html#GUID-4C38E1D8-EC81-36A3-BAA2-4D4FFECFD995"><code class="apiname">RComm::Config()</code></a> with the <code class="codeph">TCommConfigV01</code> object as the <code class="codeph">aConfig</code> parameter. 
The port is now set to Infrared mode. 
</li>
</ol>
</li>
</ol>
<div><h3 class="section-title">Example</h3> <pre class="codeblock">TCommCaps ourCapabilities;
User::LeaveIfError(commPort.Caps (ourCapabilities));

 if ((ourCapabilities ().iSIR &amp; KCapsSIR115kbps) ||
(ourCapabilities ().iSIR &amp; KCapsSIR2400bpsOnly) ||
(ourCapabilities ().iSIR &amp; KCapsSIR4Mbps))
{
   // IR is supported, so enable it
   TCommConfig portSettings;
   User::LeaveIfError(commPort.Config (portSettings));

   portSettings ().iSIREnable = ESIREnable;
   User::LeaveIfError (commPort.SetConfig (portSettings));
}</pre> </div>
</div><h3>Related concepts</h3><ul><li><a href="GUID-35D49549-1F4D-583F-A45D-9B557A207DD2.html">GlassTerm
-                 glass teletype terminal</a></li></ul><h3>Related tasks</h3><ul><li><a href="GUID-397239F9-7EE8-52CF-9B37-328AE307BAA0.html">How
to                 Open a Port with the IrDA Protocol Module: Tutorial</a></li></ul></div></div><div class="footer"><p class="metadata">Last updated January 24th, 2011</p><hr /><div class="copy">Â© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-922442FC-D9E0-53BD-B8AD-011A724C96FF.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:00:30 GMT -->
</html>