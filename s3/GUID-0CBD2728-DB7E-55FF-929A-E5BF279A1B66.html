
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-0CBD2728-DB7E-55FF-929A-E5BF279A1B66.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:12:48 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="BIOMessageMgr: BIO Message manager using the message server" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4" /><meta name="DC.Relation" scheme="URI" content="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388" /><meta name="DC.Relation" scheme="URI" content="GUID-E7BB0B0F-FC27-5428-81C0-1AB9CA426571" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-0CBD2728-DB7E-55FF-929A-E5BF279A1B66" /><meta name="DC.Language" content="en" /><title>BIOMessageMgr: BIO Message manager using the message server </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-0CBD2728-DB7E-55FF-929A-E5BF279A1B66">BIOMessageMgr: BIO Message manager using the message server</h1><div>
<p>The BIO Message manager example comprises two projects <code>BIOMessage.exe</code> and <code>BIOParser.dll</code>.
The <code>BIOMessage.exe</code> example connects to the message
server, creates a BIO message and sends the registered parser DLL
and message entry to <code>BIOParser.dll</code>. </p>
<div id="GUID-BBF66472-C97E-5C14-85BB-30AD56703E83"><h3 class="section-title">Download</h3> <p>Click on the following link to download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-34a2835d-797c-4d05-8919-03fc43821825.zip" target="_blank">Biomsgexample.zip</a></p><p>Click: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-34a2835d-797c-4d05-8919-03fc43821825.html#guid-6013a680-57f9-415b-8851-c4fa63356636/guid-34a2835d-797c-4d05-8919-03fc43821825.html"> browse</a> to view the example code. </p> </div>
<div id="GUID-3CD32BF4-F354-4281-9C9A-1FD5ED4761C7"><h3 class="section-title">BIOMessage:
BIO messaging using the message server</h3> <p><strong>Description</strong> </p> <p>This example code demonstrates BIO messaging using <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3.html"><code class="apiname">RSendAs</code></a> and <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html"><code class="apiname">RSendAsMessage</code></a> and other
supporting classes as mentioned in the <a href="#GUID-5048F691-DBA0-52DC-BBBA-922EE5DDE8D5">Class Summary</a> below. </p> <p>The <code>BIOMessage</code> example code provides the following functionality: </p> <p><strong>Creating
a session </strong> </p> <pre class="codeblock">void CBioMessage::Connect();</pre> <p>Creates a session with the message server using <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3.html"><code class="apiname">RSendAs</code></a>. </p> <p>The generated console output looks like this: </p> <div class="figure" id="GUID-3F7EFDA7-7103-58F2-819B-F50A564F67F9"><img src="GUID-13F10D4C-BA0C-5B46-804D-191A70C36324_d0e366560_href.png" /></div> <p><strong>Creating a BIO message </strong> </p> <pre class="codeblock">void CBioMessage::Create(RSendAsMessage&amp; aMessage);</pre> <p>This function does the following: </p> <ul>
<li id="GUID-3B28353D-8885-56A2-9000-B2B481045A4A"><a name="GUID-3B28353D-8885-56A2-9000-B2B481045A4A"><!-- --></a><p>creates a BIO
message of VCard type </p> </li>
<li id="GUID-B8FE7FB1-D904-5520-9762-A0BAE0D53833"><a name="GUID-B8FE7FB1-D904-5520-9762-A0BAE0D53833"><!-- --></a><p>sets the message
body text </p> </li>
<li id="GUID-AE681720-90EE-5AEE-9D98-54C41DD19E49"><a name="GUID-AE681720-90EE-5AEE-9D98-54C41DD19E49"><!-- --></a><p>adds the message
recipients for the message to be sent. </p> </li>
</ul> <p>The generated console output looks like this: </p> <div class="figure" id="GUID-7E3F4DA5-BFC3-5393-A04A-FDE944A89815"><img src="GUID-7DDC1BC6-A100-5B50-ABFE-B4AA466716A6_d0e366597_href.png" /></div> <p><strong>Sending the BIO message </strong> </p> <pre class="codeblock">void CBioMessage::Send(RSendAsMessage&amp; aMessage);</pre> <p>Sends the message to the recipients. </p> <p>The generated console
output looks like this: </p> <div class="figure" id="GUID-75B51188-D5AA-5BBD-90CA-3C33D2CF3744"><img src="GUID-3239641A-2D13-56D7-B18D-6E65B6B24886_d0e366616_href.png" /></div> <p><strong>Creating the parser </strong> </p> <pre class="codeblock">CBioParser::NewL(CMsvEntry* aEntry);</pre> <p>Creates a <code class="codeph">CBioParser</code> object based on the message
entry. </p> <p><strong>Parsing the BIO message </strong> </p> <pre class="codeblock">CBioParser::ParserL();</pre> <p>This function does the following: </p> <ul>
<li id="GUID-A05F6576-7677-5D92-A9C4-1697D64CBAF3"><a name="GUID-A05F6576-7677-5D92-A9C4-1697D64CBAF3"><!-- --></a><p>calls <code class="codeph">ExtractMessageBodyL()</code> to extract the message body text from CMsvStore, the message store </p> </li>
<li id="GUID-ADAB322E-2354-52C5-9B7C-A4335E84B6EF"><a name="GUID-ADAB322E-2354-52C5-9B7C-A4335E84B6EF"><!-- --></a><p>finds, loads
and maintains a reference count of client processes for a BIO parser
DLL </p> </li>
<li id="GUID-5F5D6BE4-EECE-5E70-82C6-2EB92133A2AF"><a name="GUID-5F5D6BE4-EECE-5E70-82C6-2EB92133A2AF"><!-- --></a><p>parses the message
body text. </p> </li>
</ul> <p>The generated console output looks like this: </p> <div class="figure" id="GUID-2E3907F9-E810-5B1F-A6A0-60484FE004DF"><img src="GUID-DCCA3BD3-582A-5C71-A104-D922FFE3C680_d0e366674_href.png" /></div><p><strong>Class Summary</strong></p><p><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3.html"><code class="apiname">RSendAs</code></a></p><p> <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html"><code class="apiname">RSendAsMessage</code></a></p><p> <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-CB2BB982-F91D-3E06-8D66-56731AA60EB8.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-CB2BB982-F91D-3E06-8D66-56731AA60EB8.html"><code class="apiname">CSendAsMessageTypes</code></a></p><p> <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-90C4FDEE-3E4D-32B3-85E1-52C157AC4AC4.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-90C4FDEE-3E4D-32B3-85E1-52C157AC4AC4.html"><code class="apiname">CSendAsAccounts</code></a></p><p> CRegisteredParserDll</p><p> CBIODatabase</p><p> CMsvStore</p> </div>
<div id="GUID-A61C8676-A44E-4F4B-96F3-D4836FD47370"><h3 class="section-title">BIOParser:
BIO message parsing</h3> <p><strong>Description</strong> </p> <p>This example
code demonstrates the parsing of the message. <code class="codeph">CBIOExampleParser</code> is the wrapper class which uses CBaseScriptParser2 and other supporting classes mentioned in the <a href="#GUID-E9472DA3-DA7B-5F4B-ACBF-770D3DE81580">Class Summary</a> below. </p> <p>The <code>BIOParser</code> example code provides the following functionality: </p> <p><strong>Creating
the parser </strong> </p> <pre class="codeblock">CBIOExampleParser* CBIOExampleParser::NewL(CRegisteredParserDll&amp; aRegisteredParserDll, CMsvEntry&amp; aEntry, RFs&amp; aFs);</pre> <p>Creates a <code class="codeph">CBIOExampleParser</code> object based on
the registered parser DLL and the message entry. </p> <p><strong>Parsing
the BIO message </strong> </p> <pre class="codeblock">void CBIOExampleParser::ParseL();</pre> <p>Parses the BIO message. </p> <p><strong>Processing the BIO message </strong> </p> <pre class="codeblock">CBIOExampleParser::ProcessL();</pre> <p>Processes the parsed data. </p> <p id="GUID-E9472DA3-DA7B-5F4B-ACBF-770D3DE81580"><a name="GUID-E9472DA3-DA7B-5F4B-ACBF-770D3DE81580"><!-- --></a><strong>Class Summary</strong> </p><p>CBaseScriptParser2</p> </div>
<div id="GUID-15A5B370-1546-4A27-8F3D-8BE336AE32FD"><h3 class="section-title">Build</h3> <p>The <code>BIOMessageMgr</code> example code includes
the following project files for building the application: <code>BIOParser.mmp</code>, <code>BIOMessage.mmp</code> and <code>bld.inf</code>. </p> <p>The Symbian build process describes how
to build this application. </p> <p>In CodeWarrior:
firstly, 'make' the <code>BIOParser.mcp</code> which creates <code>BIOParser.dll</code> and <code>BIOParser.lib</code> in <code>\epoc32\release\winscw\</code> <em>&lt;build_variant&gt;</em>, then
secondly, make <code>BIOMessage.exe</code> in the same directory.
Run <code>BIOMessage.mcp</code>, which runs <code>BIOMessage.exe</code> thus launching the emulator. </p> </div>
<div id="GUID-E5C238CE-1321-4F18-9E37-C2CFE6D3995E"><h3 class="section-title">Usage</h3> <p>Launch the target. For emulator targets, run: <code>\epoc32\release\&lt;wins
or winscw&gt;\&lt;urel or           udeb&gt;\BIOMessage.exe</code>.
If TechView emulator is used, to run the application go to System
menu and click on Open files / programs window. Start the "BIO Messaging
Example" application. </p> <p>Step through each phase of the example
by pressing the space bar or by tapping on the window drawn by the
example. </p> </div>
</div></div></div><div class="footer"><p class="metadata">Last updated July 8th, 2010</p><hr /><div class="copy">© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-0CBD2728-DB7E-55FF-929A-E5BF279A1B66.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:12:53 GMT -->
</html>