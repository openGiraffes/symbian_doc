
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-46047253-4471-502D-B48E-E1990E7F7962.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:15:21 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Sending an RTP packet" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-6425B722-4095-56E3-9198-70BA3E06C617" /><meta name="DC.Relation" scheme="URI" content="GUID-C467E6CD-6656-55F6-BDDF-BFA4F187B14F" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-46047253-4471-502D-B48E-E1990E7F7962" /><meta name="DC.Language" content="en" /><title>Sending an RTP packet </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-46047253-4471-502D-B48E-E1990E7F7962">Sending an RTP packet</h1><div><p>This page describes how to prepare, create and send an RTP packet. </p> <div id="GUID-9E7AAB77-6F14-51AE-8008-B2F1C49667A5"><h3 class="section-title">Preparing the packet</h3> <p> <code class="codeph">RRtpSendPacket</code> allows you to set the following fields for an RTP packet. </p> <p> <code class="codeph">SetMarker()</code>: Sets or unsets the marker bit. </p> <p> <code class="codeph">SetPayloadType()</code>: Sets the default payload type this is usually set befor e creating a new packet. </p> <p> <code class="codeph">SetTimeStamp()</code>: Sets the sampling instant of first octet in the RTP data packet (also RTCP packet). </p> <p> <code class="codeph">SetFlags()</code>: Sets the first 32 bits of the packet header. </p> <p>You can retrieve the following from an RTP packet: </p> <p> <code class="codeph">WritePayload()</code>: Gets the descriptor to which the data can be written. </p> </div> <div><h3 class="section-title">Creating a send packet</h3> <p> <code class="codeph">RRtpSendSource</code> allows you to create a new RTP packet. <code class="codeph">NewSendPacketL</code> and <code class="codeph">NewSendPacketLC</code> create a new send RTP packet. These functions return a handle to an <code class="codeph">RRtpSendPacket</code> object. </p> <pre class="codeblock">RRtpSendPacket NewSendPacketL(TInt aPayloadSize=0, TInt aHeaderExtensionSize=KRtpNoExtension);</pre> <p>Set the default payload type and payload size before you create the new send packet using <code class="codeph">SetPayloadType()</code> and <code class="codeph">SetDefaultPayloadSize()</code> respectively. </p> <p>Set the header extension size to multiples of 4-byte words this means the fixed header must be followed by exactly one header extension. The default value is <code class="codeph">KRtpNoExtension</code>. 0 is an acceptable value. </p> <p> <code class="codeph">RRtpSendSource</code> allows you to set any of the following for an RTP packet to be sent: </p> <p> <code class="codeph">SetAlignment</code>: Aligns the header data to multiples of the set padding value. The values can range within 1-255. 1 is the default value, which means not padded. </p> <p> <code class="codeph">SetDefaultPayloadSize</code>: Sets the default payload size for the RTP packet that is to be sent. This is usually set before creating a new packet. </p> <p> <code class="codeph">SetPayloadType</code>: Sets the default payload type for the RTP packet that is to be sent. This is usually set before creating a new packet. </p> <p>Call <code class="codeph">ByeL</code> to send the BYE packet to indicate that one or more sources are no longer active (example when a participant wants to leave). </p> <p>You can stop sending a packet even after making a send request. Call <code class="codeph">RRtpSendSource::Cancel()</code> to cancel the outstanding send request on the send stream. </p> </div> <div><h3 class="section-title">Sending the packet</h3> <p>Call <code class="codeph">RRtpSendPacket::Send()</code> to send the RTP packet. The packet is considered to be sent only when an <code class="codeph">ERtpSendSucceeded</code> event is received from the send stream. If a failure occurs, an <code class="codeph">ERtpSendFailed</code> event is received. </p> <p> <strong>Note</strong>: Before sending an RTP packet you must set the bandwidth for the RTP session. The following code snippet shows how to set the bandwidth for an RTP session. </p> <pre class="codeblock">IMPORT_C void SetBandwidth(TUint aBandwidth) </pre> </div> <div><h3 class="section-title">Closing the packet</h3> <p>Once the packet has been sent, call <code class="codeph">RRtpSendPacket::Close()</code> to close the RTP packet. </p> </div> <div><h3 class="section-title">Closing the send stream</h3> <p>Call <code class="codeph">RRtpSendSource::Close()</code> to close the send stream. The send stream cannot be closed if an event is currently being handled by a call back function. </p> </div> <div><h3 class="section-title">See also</h3> <p> <a href="GUID-5287A403-1094-5682-A443-A6C2A04A1F23.html">Creating and Managing an RTP session</a> </p> </div> </div></div></div><div class="footer"><p class="metadata">Last updated October 8th, 2009</p><hr /><div class="copy">Â© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-46047253-4471-502D-B48E-E1990E7F7962.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:15:21 GMT -->
</html>