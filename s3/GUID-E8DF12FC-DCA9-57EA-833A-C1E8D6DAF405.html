
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:04:48 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Drawing Tutorial" /><meta name="abstract" content="This topic provides tips and code snippets to help you get started drawing." /><meta name="description" content="This topic provides tips and code snippets to help you get started drawing." /><meta name="DC.Relation" scheme="URI" content="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595" /><meta name="DC.Relation" scheme="URI" content="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B" /><meta name="DC.Relation" scheme="URI" content="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0" /><meta name="DC.Relation" scheme="URI" content="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61" /><meta name="DC.Relation" scheme="URI" content="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405" /><meta name="DC.Language" content="en" /><title>Drawing
Tutorial </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405">Drawing
Tutorial</h1><div><p>This topic provides tips and code snippets to help you get started
drawing. </p>
<p> <strong>Variant</strong>: Both (ScreenPlay and non-ScreenPlay). <strong>Target
audience</strong>: Application developers. </p>
<div id="GUID-4123E6D4-0CBA-4244-944B-D472801A4875"><h3 class="section-title">Standard windows</h3> <p>All drawing to standard windows
must be <a href="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027.html">redraw drawing</a>,
which means that it takes place between <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'RWindow'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'RWindow']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><code class="apiname">RWindow::BeginRedraw()</code></a> and <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'RWindow'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'RWindow']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><code class="apiname">RWindow::EndRedraw()</code></a> calls. If you use the <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'RWindow'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'RWindow']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><code class="apiname">CCoeControl::DrawNow()</code></a> and <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'RWindow'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'RWindow']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><code class="apiname">CCoeControl::DrawDeferred()</code></a> methods,
CONE takes care of this for you. </p> <p>To redraw to an <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'RWindow'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'RWindow']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><code class="apiname">RWindow</code></a>,
an application starts the sequence by activating a <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'RWindow'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'RWindow']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><code class="apiname">CWindowGc</code></a> to
use a particular window for drawing, it then calls <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'RWindow'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'RWindow']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><code class="apiname">RWindow::BeginRedraw()</code></a> before
issuing the drawing commands and finally calling <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'RWindow'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'RWindow']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><code class="apiname">RWindow::EndRedraw()</code></a>.
For example: </p> <pre class="codeblock">gc-&gt;Activate(iWindow);
iWindow.BeginRedraw(rect);
DoDraw(rect);
iWindow.EndRedraw();
gc-&gt;Deactivate();</pre> <p> <code class="codeph">BeginRedraw()</code> does the
following: </p> <ul>
<li id="GUID-2742E046-2511-5C6A-8E84-396A80AFED18"><a name="GUID-2742E046-2511-5C6A-8E84-396A80AFED18"><!-- --></a><p>marks the rectangle
passed as its argument as valid (in other words, it removes the rectangle
from the invalid region of the window) </p> </li>
<li id="GUID-4FF89A03-8A77-5640-A77C-943164E869B3"><a name="GUID-4FF89A03-8A77-5640-A77C-943164E869B3"><!-- --></a><p>sets the clipping region
to the intersection of the invalid region and the rectangle passed as its
argument. </p> </li>
</ul> <p>In a server-initiated redraw, the drawing must exactly match what
was drawn originally, because the Window Server clips the drawing to the newly
validated region. If the rectangle drawn in response to a redraw event does
not cover the entire invalid region, the Window Server generates another redraw
event specifying the bounding rectangle of the region that is still invalid.
This continues until the entire window is valid. </p> <p>In an application-initiated
redraw, it is good practice to invalidate the whole region before passing
it to the redraw. For example: </p> <pre class="codeblock">gc-&gt;Activate(iWindow);
iWindow.Invalidate(rect);
iWindow.BeginRedraw(rect);
DoDraw(rect);
iWindow.EndRedraw();
gc-&gt;Deactivate();</pre> <p>After this sequence, the entire window is
valid. </p> </div>
<div id="GUID-CB59A6EF-AC04-4ACD-B82D-CBAD42975B09"><h3 class="section-title">Backed-up windows</h3> <p>Backed-up windows are redrawn
by the Window Server from the backup bitmap and not by the application. They
therefore have no <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'RWindow'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'RWindow']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><code class="apiname">RWindow::Invalidate()</code></a>, <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'RWindow'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'RWindow']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><code class="apiname">RWindow::BeginRedraw()</code></a> or <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'RWindow'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'RWindow']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><code class="apiname">RWindow::EndRedraw()</code></a> member
functions. The sequence for drawing to backed-up windows is therefore as follows: </p> <pre class="codeblock">gc-&gt;Activate(iWindow);
DoDraw(rect);
gc-&gt;Deactivate();</pre> <p> <strong>Note</strong>: Backed-up windows are deprecated
in Symbian^3. </p> </div>
<div id="GUID-1894D9BE-0B8A-4FF9-9EAB-83D072CF1FDE"><h3 class="section-title">Pre-emptive multi tasking</h3> <p>Because Symbian is a
pre-emptive system, another application—or the Window Server itself—may pre-empt
the application that is drawing or redrawing. The result is that <code class="codeph">DoDraw()</code> may
be partially complete when preemption occurs. Then, when the <code class="codeph">DoDraw()</code> receives
control again, it may draw to an area that has been invalidated without its
knowledge. </p> <p>For this reason, the Window Server marks a window region
as valid at <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'RWindow'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'RWindow']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><code class="apiname">RWindow::BeginRedraw()</code></a> time, <em>not</em> at <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'RWindow'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'RWindow']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><code class="apiname">RWindow::EndRedraw()</code></a> time. Then, any regions that
become invalid because of a preempting application’s activity are correctly
added to the invalid region. The <code class="codeph">DoDraw()</code> completes, but
the Window Server generates another redraw event and the application must
start the redraw again. </p> </div>
</div><h3>Related concepts</h3><ul><li><a href="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html">Graphics
and Drawing </a></li></ul></div></div><div class="footer"><p class="metadata">Last updated December 21st, 2009</p><hr /><div class="copy">© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:04:48 GMT -->
</html>