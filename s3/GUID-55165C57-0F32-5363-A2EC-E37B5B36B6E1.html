
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-55165C57-0F32-5363-A2EC-E37B5B36B6E1.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:19:25 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="How to set up the text view" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-1DCA2F4D-ABE6-52A0-AC4E-5AAC1AB5909D" /><meta name="DC.Relation" scheme="URI" content="GUID-4F901F56-7F0E-4869-85CA-6109ED0AF5B7" /><meta name="DC.Relation" scheme="URI" content="GUID-4CBFA2E3-0EFC-5E10-A960-57A8FF9A6025" /><meta name="DC.Relation" scheme="URI" content="GUID-136540F0-108A-5794-A0FE-D95260F4E59B" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-55165C57-0F32-5363-A2EC-E37B5B36B6E1" /><meta name="DC.Language" content="en" /><title>How to set up the text view </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-55165C57-0F32-5363-A2EC-E37B5B36B6E1">How to set up the text view</h1><div><p>The following code constructs a text view, first allocating and constructing all its parameters.</p> <ul><li id="GUID-22D4A0CA-4DEC-59DD-8883-1DC6EA59B23A"><a name="GUID-22D4A0CA-4DEC-59DD-8883-1DC6EA59B23A"><!-- --></a><p>Before constructing the CTextView <em>text view</em> object, first construct a <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-101762DC-E498-3325-88AB-B0FF17DC62B6.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-101762DC-E498-3325-88AB-B0FF17DC62B6.html"><code class="apiname">TRect</code></a> <em>view rectangle</em>, then the CTextLayout <em>layout object</em> to be used by the view. </p> <p>Call the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-DEF7DBC5-5EBA-3A63-8A77-12F308CBF95E"><code class="apiname">CCoeControl::Rect()</code></a> function to construct the view rectangle.</p> </li> <li id="GUID-FE25259A-49E3-5105-AC0A-A3E0CB175303"><a name="GUID-FE25259A-49E3-5105-AC0A-A3E0CB175303"><!-- --></a><p>The following must also be provided:</p> <ul><li id="GUID-CC291486-D789-5188-806D-9F09A9B4637B"><a name="GUID-CC291486-D789-5188-806D-9F09A9B4637B"><!-- --></a><p>A graphics device map for mapping between the physical co-ordinates of the screen or page being drawn to (measured in twips) and the device specific co-ordinates (measured in pixels). Use the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-6586DB74-AF5C-330B-9D0A-E4637396A04E"><code class="apiname">CCoeControl::SystemGc()</code></a> function to get the graphics context </p> </li> <li id="GUID-E2CB4365-4805-5231-9372-16A7F3A14621"><a name="GUID-E2CB4365-4805-5231-9372-16A7F3A14621"><!-- --></a><p>a window group for the text view. If a window group is not provided, no cursors can be displayed in the document.</p> </li> </ul> </li> </ul> <p>The <em>view rectangle</em> is the rectangle in which all text, cursors and labels will be displayed. It resides within the <em>view window</em> and can be smaller than it.</p> <pre class="codeblock">TRect iViewRect; // rectangle in which to view text
CTextLayout* iLayout; // text layout
CTextView* iTextView; // text view
CRichText* iRichText; // rich text document
// prerequisites for view - viewing rectangle
iViewRect=Rect(); // Construct view rectangle
// layout
iLayout=CTextLayout::NewL(iRichText,iViewRect.Width()); 
        // construct layout, giving width of view rectangle
// context and device
CWindowGc&amp; gc=SystemGc(); // get graphics context
CBitmapDevice* device=(CBitmapDevice*) (gc.Device()); // device
// text view
iTextView=CTextView::NewL(iLayout, iViewRect,
        device,
        device,
        &amp;Window(),
        &amp;iCoeEnv-&gt;RootWin(), // window group, needed for cursor
        &amp;iCoeEnv-&gt;WsSession()
        ); // new view</pre> </div></div></div><div class="footer"><p class="metadata">Last updated December 31st, 2010</p><hr /><div class="copy">Â© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-55165C57-0F32-5363-A2EC-E37B5B36B6E1.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:19:25 GMT -->
</html>