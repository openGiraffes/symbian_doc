
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-E4874B22-474B-56D0-8A8A-C60411D3CBCB.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 05:59:55 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="task" /><meta name="DC.Title" content="Accessing a field without loading a whole record: Tutorial" /><meta name="abstract" content="This tutorial shows you how to access a field without loading a whole record." /><meta name="description" content="This tutorial shows you how to access a field without loading a whole record." /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04" /><meta name="DC.Relation" scheme="URI" content="GUID-C3018CEE-865B-595A-A735-40E11665E50A" /><meta name="DC.Relation" scheme="URI" content="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-E4874B22-474B-56D0-8A8A-C60411D3CBCB" /><meta name="DC.Language" content="en" /><title>Accessing
a field without loading a whole record: Tutorial </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-E4874B22-474B-56D0-8A8A-C60411D3CBCB">Accessing
a field without loading a whole record: Tutorial</h1><div><p>This tutorial shows you how to access a field without loading a
whole record. </p>
<div id="GUID-D907BA51-0528-5018-9B46-67AE5824CEF7"><h3 class="section-title">Context</h3><p>This tutorial shows
you how to get the value of a field in the <a href="GUID-387A8240-0765-52F2-98A4-8F9FC809E03E.html#GUID-7383902B-10D2-52F3-8BDB-478CA6FB587D">GlobalSettings</a> table. Records from the <code class="codeph">GlobalSettings</code> table are not loaded. </p> <p>This
tutorial uses the <code class="codeph">BearerAvailablityCheckTSY</code> field. This field
contains the name of the TSY used to check for bearer availability. </p> </div><div id="GUID-A02C353C-3AB5-58E1-B433-98E7158CB5CD"><h3 class="section-title">Prerequisites</h3><p>Before you start,
you must understand: </p> <ul>
<li id="GUID-B77D629D-4E6D-5D2D-840A-0CFA5658D151"><a name="GUID-B77D629D-4E6D-5D2D-840A-0CFA5658D151"><!-- --></a><p>the general concept
of the Comms Database </p> </li>
<li id="GUID-FAF6F934-8AF3-5500-9E25-A650B69E84F4"><a name="GUID-FAF6F934-8AF3-5500-9E25-A650B69E84F4"><!-- --></a><p>the specific concept
of fields, records, links and tables </p> </li>
<li id="GUID-24F0BEF0-ADBB-531D-BE9B-6325E07862F2"><a name="GUID-24F0BEF0-ADBB-531D-BE9B-6325E07862F2"><!-- --></a><p>how to write and build
application code to run on Symbian platform </p> </li>
</ul> </div>
<h3>Steps</h3><ol id="GUID-A7B63B0B-CF57-5E84-BB08-C957C24675F9"><a name="GUID-A7B63B0B-CF57-5E84-BB08-C957C24675F9"><!-- --></a>
<li id="GUID-E0321D17-9CC5-5BF3-87A8-4A1638069214"><a name="GUID-E0321D17-9CC5-5BF3-87A8-4A1638069214"><!-- --></a><p>Make sure that you
have created a session. </p>
</li>
<li id="GUID-CE91627F-547F-58C0-A940-9B5461B33536"><a name="GUID-CE91627F-547F-58C0-A940-9B5461B33536"><!-- --></a><p>Create the field
object in the tool or application process. </p>

You construct a <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">CMDBField</code></a> <code class="codeph">&lt;T&gt;</code> object
and pass <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">KCDTIdBearerAvailabilityCheckTSY</code></a> to
the constructor. The symbol <code class="codeph">KCDTIdBearerAvailabilityCheckTSY</code> defines
the unique numeric Id for the <code class="codeph">BearerAvailablityCheckTSY</code> field. 
 <pre class="codeblock">...

// Create the field object. The template parameter is TDesc, because the field value
// is a short text description. 
// Use the "... new(Eleave).. " construction to create the field object.
// Pass KCDTIdBearerAvailabilityCheckTSY as a parameter to the constructor.

CMDBField&lt;TDesC&gt;* descField = new(ELeave) CMDBField&lt;TDesC&gt;(KCDTIdBearerAvailabilityCheckTSY);
...
             </pre>
</li>
<li id="GUID-8B20473F-C8B6-5547-907E-23F42BE260BB"><a name="GUID-8B20473F-C8B6-5547-907E-23F42BE260BB"><!-- --></a><p>Set the data that
identifies the field and load the field </p>

A descriptor field needs an additional call to set the size of the descriptor.
Call <code class="codeph">SetMaxLengthL()</code> to set the size of the descriptor. This
function is a member of the field class <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">CMDBField</code></a> <code class="codeph">&lt;TDesC&gt;</code>.
Internally, the function causes the allocation of a descriptor. You must set
the size of the descriptor before you assign the data. You can also use the <code class="codeph">SetL()</code> function.
This function sets the length and assigns the data. The function is a member
of the field class <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">CMDBField</code></a> <code class="codeph">&lt;TDesC&gt;</code>. 
 <pre class="codeblock">...

// The symbol "KMaxTextLength" defines the maximum length of short text.
// The record Id is ALWAYS 1 for global settings table.
descField-&gt;SetMaxLengthL(KMaxTextLength);
descField-&gt;SetRecordId(1); //recorded is ALWAYS 1 for global settings table

// Load the field.
descField-&gt;LoadL(*iDb);
...</pre>
</li>
<li id="GUID-D6A6EA77-B3A3-5614-9129-481E2EAB30D2"><a name="GUID-D6A6EA77-B3A3-5614-9129-481E2EAB30D2"><!-- --></a><p>Check that the field
has a value before you use it </p>
<pre class="codeblock">...
// Use the IsNull() function to check that the field has a value.
// In this example, the code leaves if the field does not have a value.
// Your code needs to handle a Null value appropriately.

if(descField-&gt;IsNull())
    {
    User::Leave(KErrNotFound);
    }
else
    {
    // Either process the content of *descField in place,
    // or copy the content to another descriptor. 
    // The processing depends on the structure of your code.
    // In this example, the content is copied into an RBuf for
    // further processing.
    RBuf buf;
    buf.CleanupClosePushL(); 
    buf.CreateL(descField);
    ...
    // Do something with the data.
    ...
    // Delete the RBuf buffer
    CleanupStack::PopAndDestroy()   
    ...
    }

// Do not forget to delete the field object.
delete descField;
...</pre>
</li>
</ol>
</div></div></div><div class="footer"><p class="metadata">Last updated February 4th, 2010</p><hr /><div class="copy">Â© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-E4874B22-474B-56D0-8A8A-C60411D3CBCB.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 05:59:55 GMT -->
</html>