
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-697087D6-C029-51E8-8722-9E2584420276.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 05:51:03 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="SMS Stack Architecture" /><meta name="abstract" content="The SMS Stack is a plug-in to the socket server. This section provides the architectural relationships of the SMS stack." /><meta name="description" content="The SMS Stack is a plug-in to the socket server. This section provides the architectural relationships of the SMS stack." /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-34E7AAF2-EC62-5BF6-B9E7-C7D346BCDF93" /><meta name="DC.Relation" scheme="URI" content="GUID-6BA58045-3864-599A-878E-0C7AE7E9741B" /><meta name="DC.Relation" scheme="URI" content="GUID-E0DA7DE7-FD5A-5C1D-A53C-870966F00445" /><meta name="DC.Relation" scheme="URI" content="GUID-30C21015-C433-5465-87A7-DA5A9C4AD7BD" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-697087D6-C029-51E8-8722-9E2584420276" /><meta name="DC.Language" content="en" /><title>SMS Stack Architecture </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-697087D6-C029-51E8-8722-9E2584420276">SMS Stack Architecture</h1><div><p>The SMS Stack is a plug-in to the socket server. This section provides the architectural relationships of the SMS stack. </p><div><h3 class="section-title">SMS stack components</h3> <ol id="GUID-B7B94BE7-8F08-5104-9741-87600C6B2BB2"><li id="GUID-A354C7A1-7DE5-571F-9DFB-2F3AC90ED12D"><a name="GUID-A354C7A1-7DE5-571F-9DFB-2F3AC90ED12D"><!-- --></a><p>SMSPROT - The SMS stack protocol module </p> </li> <li id="GUID-7636FB1A-5162-5136-8ADD-2C4DCE36818A"><a name="GUID-7636FB1A-5162-5136-8ADD-2C4DCE36818A"><!-- --></a><p>GSMU - GSM Utility class </p> </li> <li id="GUID-B9C83C25-4727-5992-A40A-83EFDABFE2FF"><a name="GUID-B9C83C25-4727-5992-A40A-83EFDABFE2FF"><!-- --></a><p>SMSU - SMS Utility class </p> </li> </ol> <p><strong>SMSPROT</strong> </p> <p>SMSPROT.prt is a socket server (ESOCK) plug-in DLL implemented with a protocol module suffix <code class="codeph">PRT</code>. The main functions of the SMS protocol module are to send queues, receive queues and maintain the connection to the socket server. For more information about SMSPROT, <a href="GUID-4ADE94EF-346F-541A-B0FB-AF43ADB1C66D.html">see SMS Protocol Modules</a>. </p> <p><strong>GSMU</strong> </p> <p>The GSM Utility (GSMU) class provides some utility functions for the SMS stack. The SMS messages are represented by a CSmsMessage object of the GSMU class. GSMU also provide methods to send and receive the SMS messages through the socket server. For more information about GSMU, <a href="GUID-A957A1DF-AF81-5A9D-BB44-1B34B2EB809E.html">see GSM Utilities</a>. </p> <p><strong>SMSU</strong> </p> <p>The SMS Utility (SMSU) class provides the base class for active objects of the SMS stack. For more information about SMSU, <a href="GUID-A4FBD7D4-DCC0-517A-BCAA-D36D8940A64D.html">see SMS Utilities</a>. </p> <div class="figure" id="GUID-B0D5C075-FE00-5E3B-9F1A-C6F9D45A3BF3"><img src="GUID-D7AFA78E-4B87-554E-B0A5-1AEEA98B537C_d0e46380_href.png" /><p class="figure-title"><strong>Figure: </strong>
             SMS Stack Architectural Relationships
          </p></div> <p>When a client application requests a service from the SMS stack, the SMS stack is loaded by the socket server. The main SMS stack clients are the messaging application, the WAP stack and the third party applications. The WAP stack binds directly to the SMS stack. The messaging applications and other third party applications access the SMS stack as the clients of the socket server. </p> <p>The SMS stack communicates with the ETel (Telephony) server to send, receive, read, write and delete the SMS messages from the Subscriber Identity Module (SIM). </p> <p>The SMS stack uses the message store called as the reassembly store to store the messages passed by the Telephony System plug-in (TSY). The stored messages are then processed. </p> </div> <div><h3 class="section-title">Stack initialisation</h3> <p>The socket server loads the SMS stack. The socket server loads the stack when one of the clients requests a session with the stack. The load the SMS stack, the socket server searches for the smswap.sms.esk file. The ESK files contain the details of the DLL which creates the SMS stack. The smswap.sms.esk file is located at <code class="codeph">epoc32\data\z\private\101F7989\SOCKET</code> and <code class="codeph">epoc32\wins\c\private\101f7989</code>. </p> <pre class="codeblock">
#smswap.sms.esk

[sockman]
protocols= sms

[sms]
filename= SMSPROT.PRT
index= 1
</pre> <p>The SMS stack is initialised and loaded when the first client makes a request to the stack through the socket server. The SMS stack is unloaded when the last client disconnects. The ESK file is used to customise different time out values.For more information see <a href="GUID-EE0D8964-C343-5389-8932-9AC48DCC67FD.html">Configuration</a>. </p> </div> <div><h3 class="section-title">SMS communication</h3> <p>The three main components that enable applications to send and receive SMS messages are the baseband signalling stack, Telephony system plug-in (TSY) and the SMS stack. The SMS stack communicates with the baseband signalling stack through the TSY to send and receive the messages from the network. The different types of receive modes are defined in the TMobileSmsReceiveMode class. Receive modes describe how a message is processed by the SMS stack. </p> <p><strong>EReceiveStored </strong> </p> <p>In EReceiveStored mode, the baseband stack stores the incoming SMS messages. The baseband stack acknowledges to the network before it passes the SMS to the TSY. The message is then passed to the SMS stack for processing. The message is stored in the reassembly store until it is processed. If the processing is successful, a positive acknowledgement is sent to the TSY. If the processing is unsuccessful, a negative acknowledgement is sent to the TSY and the message is processed later by sending a resume command to the TSY. Since the message is stored in the baseband stack it is not lost due to lack of memory in the SMS stack. The disadvantage of this method is that the network is acknowledged even if the message is not passed to the messaging client. </p> <p><strong>EReceiveUnstoredPhoneAck </strong> </p> <p>In EReceiveUnstoredPhoneAck mode, the message is acknowledged as soon as it is received by the baseband stack but it is the responsibility of the SMS stack that stores and processes the message. The disadvantage of this mode is that if sufficient memory or disk space is not available the message is lost. The network does not resend the message because of the positive acknowledgement was sent by the baseband stack. </p> <p><strong>EReceiveUnstoredClientAck </strong> </p> <p>In EReceiveUnstoredClientAck mode the baseband stack does not store or acknowledge any incoming SMS messages. The SMS stack has the responsibility to store and acknowledge the received SMS. If sufficient memory is not available the SMS stack rejects the incoming message and sends a negative acknowledgement to the network. The network does not send any other SMS to the device until it receives a resume request from the device. The resume request is initiated by the SMS stack. </p> <p>Two other modes specified in the TMobileSmsReceiveMode class, they are EReceiveModeUnspecified and EReceiveEither. For more information about the enumerations see the cpp reference documentation. </p> </div> </div></div></div><div class="footer"><p class="metadata">Last updated January 4th, 2010</p><hr /><div class="copy">Â© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-697087D6-C029-51E8-8722-9E2584420276.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 05:51:06 GMT -->
</html>