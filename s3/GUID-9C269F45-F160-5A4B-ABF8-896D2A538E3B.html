
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-9C269F45-F160-5A4B-ABF8-896D2A538E3B.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:04:49 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Advanced Pointer Overview" /><meta name="abstract" content="This is an overview of the Window Server extensions that support the use of advanced pointers. These extensions enable mobile devices to respond to events from multiple pointers, including their proximity and pressure. These extensions are available only in ScreenPlay." /><meta name="description" content="This is an overview of the Window Server extensions that support the use of advanced pointers. These extensions enable mobile devices to respond to events from multiple pointers, including their proximity and pressure. These extensions are available only in ScreenPlay." /><meta name="DC.Relation" scheme="URI" content="GUID-9AD75103-CD56-5279-B639-5CA2BBF979B5" /><meta name="DC.Relation" scheme="URI" content="GUID-C60DC070-572B-5960-B394-550426FDB909" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595" /><meta name="DC.Relation" scheme="URI" content="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B" /><meta name="DC.Relation" scheme="URI" content="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0" /><meta name="DC.Relation" scheme="URI" content="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61" /><meta name="DC.Relation" scheme="URI" content="GUID-08427065-B8E5-5194-B095-3B5213836BED" /><meta name="DC.Relation" scheme="URI" content="GUID-A12A66ED-2C8F-5CE6-8F3E-332B045A35B4" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-9C269F45-F160-5A4B-ABF8-896D2A538E3B" /><meta name="DC.Language" content="en" /><title>Advanced Pointer Overview  </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-9C269F45-F160-5A4B-ABF8-896D2A538E3B">Advanced Pointer Overview </h1><div><p>This is an overview of the Window Server extensions that
support the use of advanced pointers. These extensions enable mobile
devices to respond to events from multiple pointers, including their
proximity and pressure. These extensions are available only in ScreenPlay. </p>
<p> <strong>Variant</strong>: <a href="GUID-D93978BE-11A3-5CE3-B110-1DEAA5AD566C.html">ScreenPlay</a>. <strong>Target audience</strong>: Application developers. </p>
<div id="GUID-773C3275-F562-5428-A34C-7D54F10D4BC1"><h3 class="section-title">Architecture</h3> <p>In response to multiple pointer movements, an input driver generates
a pointer event for each touch. The Window Server changes and delivers
the pointer events to the client application, as shown in the following
diagram. </p> <div class="figure" id="GUID-4A02299F-8401-5761-863C-91F0338731DA"><img src="GUID-5503ACC5-1C78-5EF6-AAD2-4B6FFA8890B9_d0e239276_href.png" /><p class="figure-title"><strong>Figure: </strong>              Pointer events            </p></div> <p>Pointer-related events move from the driver to the application.
The <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-668CEA36-3933-3BBE-A980-CAB62617B4FD.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-668CEA36-3933-3BBE-A980-CAB62617B4FD.html"><code class="apiname">TRawEvent</code></a>, <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-5D0B1595-1AC7-3C44-AC6B-0EFB5EABCF31.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-5D0B1595-1AC7-3C44-AC6B-0EFB5EABCF31.html"><code class="apiname">TWsEvent</code></a> and <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1FFA0073-3D83-388E-A824-08C31F90CC54.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1FFA0073-3D83-388E-A824-08C31F90CC54.html"><code class="apiname">TPointerEvent</code></a> classes encapsulate the event information. </p> </div>
<div id="GUID-64A10900-B3A6-4FC5-8CA9-41C850D8C305"><h3 class="section-title">Key concepts/terms</h3> <p>The following terms
are introduced here and are used throughout the advanced pointer documentation: </p> <dl>
<dt class="dlterm">Pointer</dt>
<dd><p>A device that points at the screen, for example, a mouse, pen,
finger, or touchpad. </p> </dd>
<dt class="dlterm">Multiple pointer support</dt>
<dd><p>Handling more than one pointer at the same time. </p> </dd>
<dt class="dlterm">Proximity</dt>
<dd><p>Proximity in this context means the distance of the pointer
from the mobile device. Sensors detect the value of the proximity
of the pointer from the mobile device. </p> </dd>
<dt class="dlterm">Pressure</dt>
<dd><p>Pressure in this context is a value that indicates the force
applied to the mobile device by the pointer. Sensors detect the value
of the pressure of the pointer on the mobile device. </p> </dd>
</dl> </div>
<div id="GUID-AAA291C4-03F7-492D-BEEA-C59DECDBECA9"><h3 class="section-title">Logical model of pointing devices</h3> <p>A logical
model is used to handle all of the different pointing devices correctly.
In this logical model, the pointer is <strong>performing an action</strong> when
any of the following scenarios occur: </p> <ul>
<li id="GUID-3A57E7AE-A8FB-5C2B-AC54-4F60DDD35783"><a name="GUID-3A57E7AE-A8FB-5C2B-AC54-4F60DDD35783"><!-- --></a><p>An <code class="codeph">EButton1Down</code> event is sent to the client. </p> </li>
<li id="GUID-BBD5660A-2A72-5F14-9A28-D7F31761F963"><a name="GUID-BBD5660A-2A72-5F14-9A28-D7F31761F963"><!-- --></a><p> <code class="codeph">EDrag</code> events are sent to the client (optional). </p> </li>
<li id="GUID-54B774E8-6BD8-51EB-9854-9953F95AFBF5"><a name="GUID-54B774E8-6BD8-51EB-9854-9953F95AFBF5"><!-- --></a><p>An <code class="codeph">EButton1Up</code> event is sent to the client. </p> </li>
</ul> <p>Pointing devices can be in one of the following states: </p> <div class="tablenoborder"><a name="GUID-AAE663FE-E94F-556B-B635-93DDD6C27902"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-AAE663FE-E94F-556B-B635-93DDD6C27902" frame="border" border="1" rules="all">
<thead align="left">
<tr class="title ">
<th class="cellrowborder" valign="top" id="d0e239400">State</th>
<th class="cellrowborder" valign="top" id="d0e239403">Description</th>
</tr>
</thead>
<tbody>
<tr class="">
<td class="cellrowborder" valign="top" headers="d0e239400 "><p> <strong>Out of range</strong> </p> </td>
<td class="cellrowborder" valign="top" headers="d0e239403 "><p>Not detected by the device's sensors. </p> </td>
</tr>
<tr class="bg ">
<td class="cellrowborder" valign="top" headers="d0e239400 "><p> <strong>Up</strong> </p> </td>
<td class="cellrowborder" valign="top" headers="d0e239403 "><p>Detected by sensors, coordinates available, not performing
an action. </p> </td>
</tr>
<tr class="">
<td class="cellrowborder" valign="top" headers="d0e239400 "><p> <strong>Down</strong> </p> </td>
<td class="cellrowborder" valign="top" headers="d0e239403 "><p>Detected by sensors, coordinates available, performing an
action (as defined above). </p> </td>
</tr>
</tbody>
</table></div> <p>The mapping between these states and physical actions
performed by the user vary for different pointing device types (mouse,
finger) and different phone models. Here are two example interpretations
of physical pointing device states: </p> <ul>
<li id="GUID-E01E8EC4-8535-5FD4-980E-214FC7542717"><a name="GUID-E01E8EC4-8535-5FD4-980E-214FC7542717"><!-- --></a><p> <strong>Mouse</strong>. An example interpretation by a driver of the physical state of
a mouse is as follows: It is always in the <em>up</em> state except
when the left button is pressed, when it is in the <em>down</em> state.
It is never out of range. </p> </li>
<li id="GUID-7CC705BF-FC6C-534B-B00B-0C07A6B9A856"><a name="GUID-7CC705BF-FC6C-534B-B00B-0C07A6B9A856"><!-- --></a><p> <strong>Fingers
with proximity support</strong>. The following is an example interpretation
of finger physical states when the device has proximity support (that
is, it can measure the finger's proximity from the screen): </p> <ul>
<li id="GUID-F4F27FC9-F4F3-5475-8DA5-771B804828CD"><a name="GUID-F4F27FC9-F4F3-5475-8DA5-771B804828CD"><!-- --></a><p> <em>Out of range</em> when proximity &gt; 10cm </p> </li>
<li id="GUID-0B8F3832-24C1-5421-A224-5FFFC6EBA3F4"><a name="GUID-0B8F3832-24C1-5421-A224-5FFFC6EBA3F4"><!-- --></a><p> <em>Up</em> when
1cm &lt; proximity &lt;= 10cm </p> </li>
<li id="GUID-CE65B2EC-AD8E-5B9D-A514-07EC73137518"><a name="GUID-CE65B2EC-AD8E-5B9D-A514-07EC73137518"><!-- --></a><p> <em> Down</em> when proximity &lt;= 1cm </p> </li>
</ul> <p>In this way the finger can perform actions (for example,
press buttons, drag items) without touching the screen. </p> </li>
</ul> </div>
<div id="GUID-F6E6E5E9-8037-46F2-A457-E8DEEFA28A1A"><h3 class="section-title">Multiple pointers</h3> <p>The system handles multiple
pointers at the same time by identifying each one with a number and
sending pointer events separately for each of them. A field (<code class="codeph">iPointerNumber</code>) in the pointer event classes (<a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-668CEA36-3933-3BBE-A980-CAB62617B4FD.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-668CEA36-3933-3BBE-A980-CAB62617B4FD.html"><code class="apiname">TRawEvent</code></a> and the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023.html"><code class="apiname">TAdvancedPointerEvent</code></a> class which extends <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1FFA0073-3D83-388E-A824-08C31F90CC54.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1FFA0073-3D83-388E-A824-08C31F90CC54.html"><code class="apiname">TPointerEvent</code></a>) identifies the pointer for which the event
occurred. The order and frequency of pointer events depends on the
driver of the pointing device. </p> <p>On each phone there is a pool
of available pointer numbers, ranging from 0 to <code class="codeph">HALData::EPointerNumberOfPointers</code> - 1. Every time the driver detects a new pointer coming into the
range of the device, the driver assigns a number from the pool. After
the pointer goes out of the range of the device, the number no longer
identifies that particular pointer and the driver sends <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-668CEA36-3933-3BBE-A980-CAB62617B4FD.html#GUID-C7FB5C5F-B7E1-3738-B72D-1AD81699414F"><code class="apiname">TRawEvent::EPointer3DOutOfRange</code></a> with this pointer number. The number is then released back to the
pool and may be reused to identify another pointer coming into the
device's range. </p> </div>
<div id="GUID-5F1F123B-F0D3-42E6-811B-E762D663DE59"><h3 class="section-title">Pressure and proximity</h3> <p>The pressure of
the pointer on the screen is represented as a positive integer. The
proximity of the pointer to the screen is represented as a negative
integer. It is up to the UI Platform to define units of pressure and
proximity, which may be non-linear. In the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-668CEA36-3933-3BBE-A980-CAB62617B4FD.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-668CEA36-3933-3BBE-A980-CAB62617B4FD.html"><code class="apiname">TRawEvent</code></a> class, pressure and proximity are expressed in terms of the Z coordinate
of the pointer. The definition of the Z coordinate is based on the
assumption that the pointer is either hovering over the screen (proximity
&lt; 0, pressure = 0) or touching the screen (proximity = 0, pressure
&gt;= 0): </p> <ul>
<li id="GUID-21CB6F60-3076-5EBE-9900-D870C670FE5B"><a name="GUID-21CB6F60-3076-5EBE-9900-D870C670FE5B"><!-- --></a><p>If proximity
&lt; 0 and pressure = 0 then the Z coordinate = proximity. </p> </li>
<li id="GUID-B5EA992D-4F86-54E1-A64C-673691460945"><a name="GUID-B5EA992D-4F86-54E1-A64C-673691460945"><!-- --></a><p>If proximity
= 0 and pressure &gt;= 0 then the Z coordinate = pressure. </p> </li>
</ul> <div class="figure" id="GUID-FCE3CEAF-CCF3-5472-AC15-5DF5F092AA5E"><img src="GUID-1A0FB98B-8DB3-5067-9B71-FF838F6AE402_d0e239582_href.png" /><p class="figure-title"><strong>Figure: </strong>              Relationships between the pointer proximity,
pressure and z              coordinate            </p></div> </div>
<div id="GUID-7F06F9CC-B77C-450B-B66C-02761E124A02"><h3 class="section-title">API summary</h3> <div class="tablenoborder"><a name="GUID-07002499-484E-500E-AC57-4089AB0197E8"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-07002499-484E-500E-AC57-4089AB0197E8" frame="border" border="1" rules="all">
<thead align="left">
<tr class="title ">
<th class="cellrowborder" valign="top" id="d0e239600">API</th>
<th class="cellrowborder" valign="top" id="d0e239603">Description</th>
</tr>
</thead>
<tbody>
<tr class="">
<td class="cellrowborder" valign="top" headers="d0e239600 "><p> HALData </p> </td>
<td class="cellrowborder" valign="top" headers="d0e239603 "><p>Includes z coordinate, pressure precision and number of
pointers. Also contains threshold values for proximity and pressure. </p> </td>
</tr>
<tr class="bg ">
<td class="cellrowborder" valign="top" headers="d0e239600 "><p> <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-668CEA36-3933-3BBE-A980-CAB62617B4FD.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-668CEA36-3933-3BBE-A980-CAB62617B4FD.html"><code class="apiname">TRawEvent</code></a> </p> </td>
<td class="cellrowborder" valign="top" headers="d0e239603 "><p>Includes the pointer number and a structure for proximity
and pressure data. </p> </td>
</tr>
<tr class="">
<td class="cellrowborder" valign="top" headers="d0e239600 "><p> <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1460DD8F-9AA1-3B99-8FFD-F309959CCA34.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1460DD8F-9AA1-3B99-8FFD-F309959CCA34.html"><code class="apiname">RWindowBase</code></a> </p> </td>
<td class="cellrowborder" valign="top" headers="d0e239603 "><p>Enables advanced pointer events for the window. </p> </td>
</tr>
<tr class="bg ">
<td class="cellrowborder" valign="top" headers="d0e239600 "><p> <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-5D0B1595-1AC7-3C44-AC6B-0EFB5EABCF31.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-5D0B1595-1AC7-3C44-AC6B-0EFB5EABCF31.html"><code class="apiname">TWsEvent</code></a> </p> </td>
<td class="cellrowborder" valign="top" headers="d0e239603 "><p>Supports <code class="codeph">TAdvancedPointerEvent</code> (derived
from <code class="codeph">TPointerEvent)</code>. </p> </td>
</tr>
<tr class="">
<td class="cellrowborder" valign="top" headers="d0e239600 "><p> <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1FFA0073-3D83-388E-A824-08C31F90CC54.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1FFA0073-3D83-388E-A824-08C31F90CC54.html"><code class="apiname">TPointerEvent</code></a> </p> </td>
<td class="cellrowborder" valign="top" headers="d0e239603 "><p>Includes event types for pressing and closeness. </p> </td>
</tr>
<tr class="bg ">
<td class="cellrowborder" valign="top" headers="d0e239600 "><p> <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023.html"><code class="apiname">TAdvancedPointerEvent</code></a> </p> </td>
<td class="cellrowborder" valign="top" headers="d0e239603 "><p>Inherits from <code class="codeph">TPointerEvent</code>. </p> <p>Provides
capabilities for pressure, proximity and multiple pointers. </p> </td>
</tr>
<tr class="">
<td class="cellrowborder" valign="top" headers="d0e239600 "><p> <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-643DDA78-C7A7-386D-AB3F-8710141DDDA9.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-643DDA78-C7A7-386D-AB3F-8710141DDDA9.html"><code class="apiname">RWsSession</code></a> </p> </td>
<td class="cellrowborder" valign="top" headers="d0e239603 "><p>Provides get and set methods to manipulate threshold values
for proximity and pressure. </p> </td>
</tr>
</tbody>
</table></div> </div>
<div id="GUID-0CB10AE9-87D6-4D4A-96BD-5AD4516F38A6"><h3 class="section-title">Typical uses</h3> <ul>
<li id="GUID-CA055058-AAD6-5A89-BC7E-7B5E81FA8963"><a name="GUID-CA055058-AAD6-5A89-BC7E-7B5E81FA8963"><!-- --></a><p> <strong>Enabling
many pointers for a window</strong> </p> <p>Enables multiple pointers
to act on one window. </p> </li>
<li id="GUID-DBD49B85-207D-5722-8AE3-B00946899559"><a name="GUID-DBD49B85-207D-5722-8AE3-B00946899559"><!-- --></a><p> <strong>Enabling
concurrent control of many objects</strong> </p> <p>Controls many objects
on one or more windows with many pointers. </p> </li>
<li id="GUID-AF442CD4-FDEC-5FF4-B8F9-6ED8CDB9E957"><a name="GUID-AF442CD4-FDEC-5FF4-B8F9-6ED8CDB9E957"><!-- --></a><p> <strong>Getting
z coordinates from TPointerEvent</strong> </p> <p>Reads the pressure and
proximity values for a pointer. </p> </li>
<li id="GUID-13E0E5DA-609A-52B3-A90A-9A84C3A8BF22"><a name="GUID-13E0E5DA-609A-52B3-A90A-9A84C3A8BF22"><!-- --></a><p> <strong>Pinch zooming</strong> </p> <p>Enables the user to zoom in and out of data by using two
fingers to pinch an area of the screen. Pinch zooming is normally
used in web-page, map, picture, chart and control applications. </p> </li>
<li id="GUID-C038F18F-94DE-5391-A1F8-BEF83274D143"><a name="GUID-C038F18F-94DE-5391-A1F8-BEF83274D143"><!-- --></a><p> <strong>Responding
to high pressure events</strong> </p> <p>As the pointer state changes,
the pressure value can be checked. When it passes over a threshold
value, the Window Server responds appropriately to the client. </p> </li>
</ul> </div>
</div><h3>Related concepts</h3><ul><li><a href="GUID-9AD75103-CD56-5279-B639-5CA2BBF979B5.html">Pointer
States and Event                 Communication</a></li><li><a href="GUID-C60DC070-572B-5960-B394-550426FDB909.html">Advanced
Pointer                 Tutorial</a></li></ul></div></div><div class="footer"><p class="metadata">Last updated July 2nd, 2010</p><hr /><div class="copy">© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-9C269F45-F160-5A4B-ABF8-896D2A538E3B.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:04:51 GMT -->
</html>