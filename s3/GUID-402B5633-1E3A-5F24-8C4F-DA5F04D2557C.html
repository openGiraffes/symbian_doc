
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:06:14 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Querying URIs from the URI List" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-C0D38954-2FC5-4E8B-BC11-229464DCF16C" /><meta name="DC.Relation" scheme="URI" content="GUID-939C0EE6-0931-4898-842B-9D0C9D61DD2F" /><meta name="DC.Relation" scheme="URI" content="GUID-C0E7CBC4-C525-4CA8-8D21-E7E2ABE396CE" /><meta name="DC.Relation" scheme="URI" content="GUID-956E7DD6-C7FA-5F0A-9C86-D7FE58373A25" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C" /><meta name="DC.Language" content="en" /><title>Querying URIs from the URI List </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C">Querying URIs from the URI List</h1><div><p>The <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6F5E2A42-5047-3AB2-9929-D893B88F2BD2.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6F5E2A42-5047-3AB2-9929-D893B88F2BD2.html"><code class="apiname">RInetUriList</code></a> class provides the following APIs for retrieving the information of URIs present in the list: </p> <ul><li id="GUID-6F99901E-B8A4-5E42-B874-066171E88A69"><a name="GUID-6F99901E-B8A4-5E42-B874-066171E88A69"><!-- --></a><p>API for retrieving the number of URIs present in the list, based on a given service type and list type: </p> <p> <code class="codeph">TInt Count ( InetUriList::TServiceType aServiceType,
             InetUriList::TListType aListType )</code> </p> <p>If the URI count of both the lists is required, then set <code class="codeph">aListType</code> parameter to <code class="codeph">EBlackList</code> and <code class="codeph">EWhiteList</code>. </p> </li> <li id="GUID-F4E514BF-BF07-5A4C-8A0D-9121536FB178"><a name="GUID-F4E514BF-BF07-5A4C-8A0D-9121536FB178"><!-- --></a><p>API for retrieving the list type of a given URI: </p> <p> <code class="codeph">TInt GetListType ( const TDesC8&amp; aUri,
             InetUriList::TServiceType aServiceType, InetUriList::TListType&amp; aListType
             )</code> </p> <p>The list type will be returned through <code class="codeph">aListType</code> as an out parameter. If the URI is not found, then return type will be <code class="codeph">KErrUriNotFound</code>. </p> </li> <li id="GUID-50D349EE-CA38-54D8-96AB-FA2AAF4AA6F6"><a name="GUID-50D349EE-CA38-54D8-96AB-FA2AAF4AA6F6"><!-- --></a><p>API for querying URIs in the list: </p> <p> <code class="codeph">void QueryUriL ( const TQueryArgs&amp; aArgs,
             MQueryResultsCallback* aQueryCallback, MUriCustomiser* aUriCustomiser =NULL
             )</code> </p> <p>Based on the the <code class="codeph">TQueryArgs</code> parameter, this API supports different query operations. <code class="codeph">TQueryArgs</code> is template class which provides four constructors. The argument types for <code class="codeph">TQueryArgs</code> can be a combination of URI, service type, list type, and match type. The service type is mandatory for the query operation. Based on the <code class="codeph">TQueryArgs</code> parameter combination, the following types of queries can be performed: </p> <ul><li id="GUID-EDB3E659-648E-52C5-AB8C-D572675163F1"><a name="GUID-EDB3E659-648E-52C5-AB8C-D572675163F1"><!-- --></a><p>Find existence of a URI of a given service type. </p> </li> <li id="GUID-76B6918F-6085-5DF1-946C-A6899EA61E4C"><a name="GUID-76B6918F-6085-5DF1-946C-A6899EA61E4C"><!-- --></a><p>Find all URIs matching the path of a specified URI and service type. </p> </li> <li id="GUID-733C2073-4619-544E-8E40-66E62D96A9C1"><a name="GUID-733C2073-4619-544E-8E40-66E62D96A9C1"><!-- --></a><p>Find all URIs matching the domain name of a specified URI and service type. </p> </li> <li id="GUID-5582DFC2-0C78-5D61-B13A-099F1F185AC7"><a name="GUID-5582DFC2-0C78-5D61-B13A-099F1F185AC7"><!-- --></a><p>Find all the URIs matching the prefix path of a specified URI and service type. </p> </li> <li id="GUID-6B6427C9-2099-566C-87E6-D6E9C856B5A6"><a name="GUID-6B6427C9-2099-566C-87E6-D6E9C856B5A6"><!-- --></a><p>Find all the URIs matching the suffix path of a specified URI and service type. </p> </li> <li id="GUID-3F62B201-A0AB-599F-BB8E-A287401E2495"><a name="GUID-3F62B201-A0AB-599F-BB8E-A287401E2495"><!-- --></a><p>Find all the URIs of a specified service type and list type. </p> </li> </ul> </li> </ul> <p>The aQueryCallback parameter of the QueryUriL API provides a callback interface that needs to be implemented by the calling client. The calling client class should derive from the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-5D5672DF-DDB0-336B-9A96-DE7D55B937FE.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-5D5672DF-DDB0-336B-9A96-DE7D55B937FE.html"><code class="apiname">MQueryResultsCallback</code></a> class and provide implementation for the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-5D5672DF-DDB0-336B-9A96-DE7D55B937FE.html#GUID-399C8754-C6F0-3ED0-A0E9-12EA1B91068A"><code class="apiname">MQueryResultsCallback::OnQueryResultsL()</code></a> function. The optional aUriCustomiser parameter of the QueryUriL API provides a callback interface for URI customisation by scheme/protocol normalization. The calling client should be derived from the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-B29E0EB7-BB4C-3E54-A844-182EBC4B159D.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-B29E0EB7-BB4C-3E54-A844-182EBC4B159D.html"><code class="apiname">MUriCustomiser</code></a> class and provide implementation for the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-B29E0EB7-BB4C-3E54-A844-182EBC4B159D.html#GUID-5ECB0068-0EFD-3FB6-B229-C911C912ADA5"><code class="apiname">MUriCustomiser::OnUriCustomisationL()</code></a> function. Given below are some code samples for performing different queries. </p> <pre class="codeblock">//Create a Uri
_LIT8(KUri, “http://www.symbian.com/symbianos/email/index.html”);

//Create a session with the server.
    RInetUriList uriListObj;
    uriListObj.OpenL();
    CleanupClosePushL(uriListObj);

//Construct TQueryArgs object with Uri, service type
//and match type. 
    TQueryArgs uriArgs(KUri, EBrowser, EDomain);

//Query the Uri and close the session. 
    uriListObj. QueryUriL(uriArgs, this);
    CleanupStack::PopAndDestroy(&amp;uriListObj);
</pre> <p>In the above code sample, all the browsing URIs matching with the domain name <em>www.symbian.com</em> is searched from both BlackList and WhiteList, as list type is not specified. The second parameter is a pointer to the client class that implements the OnQueryResultsL() call back function. For each matching URI that is found, the QueryUriL function calls the OnQueryResultsL callback function until it returns <code class="codeph">EFalse</code>, or until all matching URIs are passed to it. </p> <p>The match type is a value of enumeration TURIMatch. The searching criteria can be changed by changing the match type. </p> <ul><li id="GUID-E7924DE0-462B-5222-B395-7C31DE9348CA"><a name="GUID-E7924DE0-462B-5222-B395-7C31DE9348CA"><!-- --></a><p>If the match type is <code class="codeph">EExact</code> in the above code sample, only one URI would be returned. </p> </li> <li id="GUID-94D88299-BAF1-52D9-A5E3-1C6DB13D7A2E"><a name="GUID-94D88299-BAF1-52D9-A5E3-1C6DB13D7A2E"><!-- --></a><p>If the match type is <code class="codeph">ExactPath</code>, all the URIs that have the same scheme, domain name, and path would be returned. These URIs might be different only in fragments. </p> </li> <li id="GUID-646AFE86-0B4B-5684-A12F-7857F5D94825"><a name="GUID-646AFE86-0B4B-5684-A12F-7857F5D94825"><!-- --></a><p>If the match type is <code class="codeph">EPartialPrefixPath</code>, all the URIs matching the prefix path and scheme will be returned. </p> <p>For example, if the incoming URI is http://www.symbian.com/symbianos/, then the following URIs would match if match type is <code class="codeph">EPartialPrefixPath</code>: </p> <ul><li id="GUID-ED7958FE-3A49-5416-92D3-4C322961D8E7"><a name="GUID-ED7958FE-3A49-5416-92D3-4C322961D8E7"><!-- --></a><p>http://www.symbian.com/symbianos/email/index.html </p> </li> <li id="GUID-7EA3DA47-FAD8-5662-91D8-4451152F12CA"><a name="GUID-7EA3DA47-FAD8-5662-91D8-4451152F12CA"><!-- --></a><p>http://www.symbian.com/symbianos/solutions/solutions.html </p> </li> </ul> </li> <li id="GUID-19E488B2-2213-5D16-AF0E-9EBA3927D5FC"><a name="GUID-19E488B2-2213-5D16-AF0E-9EBA3927D5FC"><!-- --></a><p>If the match type is <code class="codeph">EPartialSuffixPath</code>, then all the URIs matching suffix path and scheme will be returned. </p> <p>For example, if the incoming URI is http://www.symbian.com/index.html, then the following URIs would match if match type is <code class="codeph">EPartialSuffixPath</code>: </p> <ul><li id="GUID-B4E59EAA-E080-5CC0-B5DA-51F536ABF814"><a name="GUID-B4E59EAA-E080-5CC0-B5DA-51F536ABF814"><!-- --></a><p>http://www.symbian.com/symbianos/email/index.html </p> </li> <li id="GUID-38EC342F-BEA0-5E71-8C2F-BDFFA46B8315"><a name="GUID-38EC342F-BEA0-5E71-8C2F-BDFFA46B8315"><!-- --></a><p>http://www.symbian.com/symbianos/index.html </p> </li> </ul> </li> </ul> <pre class="codeblock">//Create a session with the server.
    RInetUriList uriListObj;
    uriListObj.OpenL();
    CleanupClosePushL(uriListObj);

//Construct TQueryArgs object with service type and 
//match type.
    TQueryArgs uriArgs(EBrowser);

//Query the Uri and close the session. 
    uriListObj. QueryUriL(uriArgs, this, this);
    CleanupStack::PopAndDestroy(&amp;uriListObj);
</pre> <p>The above code sample retrieves all browser URIs of both BlackList and WhiteList types. To retrieve all the URIs for all service types, the caller has to loop for all service types. The third argument of QueryUriL indicates that the caller has implemented the OnUriCustomisationL() callback function, and so the URI will be passed to this callback function for normalization before being passed for a query. </p> </div></div></div><div class="footer"><p class="metadata">Last updated October 8th, 2009</p><hr /><div class="copy">© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:06:14 GMT -->
</html>