<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <!-- Generated by Xbuild version: 5.0.22 -->
 
<!-- Mirrored from devlib.symbian.slions.net/s3/specs/guides/Landmarks_API_Specification/Landmarks_API_Specification.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:25:10 GMT -->
<head>
  <title>
   Landmarks API Specification in locationsrv package
  </title>
  <link href="../../../a_stock/css/arch_sdl.css" rel="stylesheet" type="text/css" />
  <?php
	include_once ($_SERVER["DOCUMENT_ROOT"]. '/includes/skin_constants.php');
	include_once (CURRENT_SKIN_PATH.'/sdl_head.html');
	???>
 </head>
 <body id="swad">
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ???>
  <div id="main_content">
   <table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
     <td valign="top" width="100%">
      <div id="main_content_txt">
       <div class="main_content_padding">
        <div id="main">
         <div id="authoredContent">
          <div class="section">
           <a name="Landmarks_API_Specification">
           </a>
           <h1>
            Landmarks API Specification
           </h1>
           <p>
            <em>
             Changes in Landmarks API documentation
            </em>
           </p>
           <table class="TableWrap" border="1" cellpadding="1" cellspacing="0">
            <tr valign="top">
             <th>
              1.0
             </th>
             <th>
              11.07.2005
             </th>
             <th>
              Approved
             </th>
             <th>
             </th>
            </tr>
            <tr valign="top">
             <td class="Cell">
              <p>
               2.0
              </p>
             </td>
             <td class="Cell">
              <p>
               18.11.2005
              </p>
             </td>
             <td class="Cell">
              <p>
               Approved
              </p>
             </td>
             <td class="Cell">
              <p>
               Landmark and category serialization support added.
              </p>
             </td>
            </tr>
            <tr valign="top">
             <td class="Cell">
              <p>
               3.0
              </p>
             </td>
             <td class="Cell">
              <p>
               10.10.2006
              </p>
             </td>
             <td class="Cell">
              <p>
               Approved
              </p>
             </td>
             <td class="Cell">
              <p>
               Documentation revised
              </p>
             </td>
            </tr>
            <tr valign="top">
             <td class="Cell">
              <p>
               4.0
              </p>
             </td>
             <td class="Cell">
              <p>
               09.05.2007
              </p>
             </td>
             <td class="Cell">
              <p>
               Approved
              </p>
             </td>
             <td class="Cell">
              <p>
               GPX format import support added
              </p>
             </td>
            </tr>
            <tr valign="top">
             <td class="Cell">
              <p>
               5.0
              </p>
             </td>
             <td class="Cell">
              <p>
               26.09.2008
              </p>
             </td>
             <td class="Cell">
              <p>
               Approved
              </p>
             </td>
             <td class="Cell">
              <p>
               KML format import support added
              </p>
             </td>
            </tr>
            <tr valign="top">
             <td class="Cell">
              <p>
               6.0
              </p>
             </td>
             <td class="Cell">
              <p>
               10.06.2009
              </p>
             </td>
             <td class="Cell">
              <p>
               Approved
              </p>
             </td>
             <td class="Cell">
              <p>
               URL Encoding &amp; Decoding support added
              </p>
             </td>
            </tr>
           </table>
           <p>
            <em>
             Changes in Landmarks API
            </em>
           </p>
           <table class="TableWrap" border="1" cellpadding="1" cellspacing="0">
            <tr valign="top">
             <th>
              1.0
             </th>
             <th>
              First version
             </th>
            </tr>
            <tr valign="top">
             <td class="Cell">
              <p>
               2.0
              </p>
             </td>
             <td class="Cell">
              <p>
               Landmark and category serialization support added.
              </p>
             </td>
            </tr>
            <tr valign="top">
             <td class="Cell">
              <p>
               3.0
              </p>
             </td>
             <td class="Cell">
              <p>
               Documentation revised
              </p>
             </td>
            </tr>
            <tr valign="top">
             <td class="Cell">
              <p>
               4.0
              </p>
             </td>
             <td class="Cell">
              <p>
               GPX format import support added
              </p>
             </td>
            </tr>
            <tr valign="top">
             <td class="Cell">
              <p>
               5.0
              </p>
             </td>
             <td class="Cell">
              <p>
               KML format import support added
              </p>
             </td>
            </tr>
            <tr valign="top">
             <td class="Cell">
              <p>
               6.0
              </p>
             </td>
             <td class="Cell">
              <p>
               URL Encoding &amp; Decoding support added
              </p>
             </td>
            </tr>
           </table>
           <div class="section">
            <a name="Landmarks_API_Specification%2eContents">
            </a>
            <h2>
             Contents
            </h2>
            <ul>
             <li>
              <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopic1" title="The purpose of Landmarks API is to enable terminal applications to manage landmarks in a consistent way. For instance, if a landmark is received in an email and the user chooses to store the landmark in the terminal, the landmark is instantly available for a map application. It is available from S60 3rd Edition onwards and ehnaced version of this API in Symbian^3 supports:">
               Purpose
              </a>
             </li>
             <li>
              <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopic2" title="Landmarks API is mainly targeted for end-user applications. It lets clients access landmark databases and read/edit their content.">
               API Description
              </a>
              <ul>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicLandmarks" title="Landmark is a location with a name and it may also contain other data, such as description, icon, address details etc. Landmarks are organized in landmark databases, which reside on terminal or may be remote. Client can read landmarks from a database, add new, modify and remove existing landmarks.">
                 Landmarks
                </a>
                <ul>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicLmAttrs" title="A landmark can contain the following attributes:">
                   Landmark attributes
                  </a>
                 </li>
                </ul>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicLmCats" title="A landmark may be assigned to one or many categories (or none at all). Categories help to classify landmarks, group them, enable finer search criteria etc. Landmark categories are also stored in landmark databases.">
                 Landmark categories
                </a>
                <ul>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicLocalGlobal" title="Landmark categories may be local or global. Local categories are defined by the user. They are stored in a database and cannot be reused by multiple databases unless the user creates the same category in several databases.">
                   Local and global landmark categories
                  </a>
                 </li>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicCatAttrs" title="A landmark category contains the following attributes:">
                   Category attributes
                  </a>
                 </li>
                </ul>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicLmUrl" title="The URL that is required to be encoded or parsed should be specified according to the following format.Check References section for more details.">
                 Landmark URL format specification
                </a>
                <ul>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicNotations" title="* - 0 or more occurences">
                   Notations Used
                  </a>
                 </li>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicGrammar" title="url -&gt; [ protocol ‘://’ ] hostname ‘/?’ location *[ ‘??’ location ]">
                   Grammar Definition
                  </a>
                 </li>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicRestrictions" title="locationparams Latitude &amp; longitude params are mandatory.Except the category param ( cat ),if there is repetition of any other params then only the value of the first occurrence is considered.The category param is allowed to be repeated in order to support multiple categories to be associated with a single landmark. latitudevalue Value ranges between -90 and +90,where negative values indicate southern hemisphere &amp; positive values indicate northern hemisphere.The decimal number is rounded upto 6 decimal digits. longitudevalue Value ranges between -180 and +180,where negative values indicate western hemisphere &amp; positive values indicate eastern hemisphere.The decimal number is rounded upto 6 decimal digits. escaped Only special characters whose Ascii value ( provided in hex ) ranges between these are to be escaped : 20 – 2F , 3A – 40 , 5B – 60 , 7B – 7E . Refer References section for ascii table positionaccuracyvalue Max value is that of max value of TReal32 .The metric considered here is metres.The decimal number is rounded upto 2 decimal digits. altitudevalue Max value is that of max value of TReal32 .The metric considered here is metres.The decimal number is rounded upto 2 decimal digits. altitudeaccuracyvalue Max value is that of max value of TReal32 The metric considered here is metres.The decimal number is rounded upto 2 decimal digits. speedvalue Max value is that of max value of TReal32 .The metric considered here is metres/second.The decimal number is rounded upto 2 decimal digits. headingvalue Max value is that of max value of TReal32 .The metric considered here is degrees.The decimal number is rounded upto 2 decimal digits. timestampvalue The full date is mandatory for this field to be encoded/parsed whereas if the full time is not specified then the default value assumed for time will be 0.">
                   Restrictions
                  </a>
                 </li>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicExampleUrl" title="Sample URL containing all the location information and conforming to the grammar as defined above.">
                   Example URL
                  </a>
                 </li>
                </ul>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicUseCases" title="These a main use cases for Landmarks API:">
                 Use cases
                </a>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicApiClasses" title="The following subchapters describe the Landmarks API class structure. UML diagrams are used to present the classes and their dependencies. Note: The UML diagrams do not show all the available methods, and some of or all of the method parameters may be left out.">
                 API class structure
                </a>
                <ul>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicDatabaseAccessClasses" title="Landmarks are stored in databases. A client accesses landmark databases through the CPosLandmarkDatabase class. Each instance of CPosLandmarkDatabase is a handle to exactly one landmark database. All operations upon a landmark database are performed through instances of CPosLandmarkDatabase.">
                   Database access
                  </a>
                 </li>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicCategoryMgmtClasses" title="A landmark database can contain landmark categories. To access categories in the database, the client must create a CPosLmCategoryManager object connected to the database. Through this object, the client can retrieve information about the categories in the database or edit the category content.">
                   Category management
                  </a>
                 </li>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicEventClasses" title="A client can listen to events from landmark databases. To listen to the next event, the client calls CPosLandmarkDatabase::NotifyDatabaseEvent(). The client passes a TRequestStatus, which will be completed when an event is detected. When an event has been retrieved, the client must renew the NotifyDatabaseEvent() request to listen to further events. Classes for listening to landmark database events">
                   Database events
                  </a>
                 </li>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicExchangeOpsClasses" title="A client can exchange landmark data with another party by using the import and export functionality. If a client has received a file or buffer containing landmark data and the client is connected to a landmark database, the client can use Landmarks API to import landmarks to the landmark database. To import landmarks, the client has to create an instance of the CPosLandmarkParser class.">
                   Exchange operations
                  </a>
                 </li>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicOperationClasses" title="Some operations in Landmarks API can potentially take a long time. These operations can therefore be run incrementally. The client retrieves a CPosLmOperation object, which can either be run incrementally or all at once.">
                   Incremental operations
                  </a>
                 </li>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicSerializationClasses" title="A client can pack a landmark or a landmark category object into a buffer for further serialization. This can be used e.g. for sending data over process boundaries. On the receiving side packed objects can be unpacked from buffer. The PosLandmarkSerialization class contains static methods PackL() and UnpackL() for packing and unpacking CPosLandmark instances. PosLmCategorySerialization class contains appropriate methods for packing and unpacking CPosLandmarkCategory instances.">
                   Serialization support
                  </a>
                 </li>
                </ul>
               </li>
              </ul>
             </li>
             <li>
              <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopic3">
               Using the Landmarks API
              </a>
              <ul>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicUsingDb" title="To start accessing landmarks in a landmark database, the client only has to create an instance of the CPosLandmarkDatabase class. This is accomplished by calling one of the CPosLandmarkDatabase::OpenL() overloads. The default landmark database is opened by calling the overload with no parameters. (If the client wants to open any other landmark database, a URI is used to specify which database to open, which is described in Database URI chapter).">
                 Using landmarks database
                </a>
                <ul>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicDbUri" title="CPosLandmarkDatabase contains a method OpenL(), which takes a database URI as input. The URI consists of a scheme and the database location, i.e. &lt;scheme&gt;://&lt;location&gt;. If the scheme is left out, it is understood that the database is local on the terminal and is accessed through the file system. The URI c:landmarks.LDB is therefore the same thing as file://c:landmarks.ldb.">
                   Database URI
                  </a>
                 </li>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicCompactDb" title="When modifying a landmark database, the database size increases. Some of this memory is not really used. The client should therefore supervise the database usage using the CPosLandmarkDatabase::SizeL() method and compact the database if there is too much unused space. CPosLandmarkDatabase::CompactL() is used to perform compacting and it can be run incrementally.">
                   Compacting database
                  </a>
                 </li>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicRelease" title="The Landmarks subsystem uses ECom plug-ins that provide the implementation for accessing landmark databases. ECom allocates resources that are not released when the plug-in is unloaded. These must be explicitly released by the client at shutdown. This is done by calling the global method ReleaseLandmarkResources(), which has the same effect as REComSession::FinalClose().">
                   Releasing resources
                  </a>
                 </li>
                </ul>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicReadLandmarks" title="Landmark properties are maintained by CPosLandmark class. Client uses this class to get and set landmark data.">
                 Managing landmarks
                </a>
                <ul>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicReadPartial" title='Landmark data could be spread among different tables in the landmark database. When landmark is read from database, all those tables need to be accessed. However, in many cases when many landmarks are read (e.g. for landmark list) applications need only partial information for every landmark. In this case amount of tables accessed and data transferred during reading can be reduced (thus improving performance) by using "partial read" mechanism of Landmarks API. Following diagram shows basic steps of partial read. Partial read sequence diagram'>
                   Reading partial landmarks
                  </a>
                 </li>
                </ul>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicAccessCats" title="To access categories in a landmark database, the classes described in section Category management are used. The client must first have a handle to a landmark database (CPosLandmarkDatabase). This handle is passed to CPosLmCategoryManager::NewL() to create a category manager. After this, the client can read and edit category content in the database. Category properties are maintained by CPosLandmarkCategory class.">
                 Managing categories
                </a>
                <ul>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicAddNewCat" title="The following example shows how the client can create a new category and add it to database.">
                   Creating local category
                  </a>
                 </li>
                </ul>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicAddCatToLm" title='There is a "many-to-many" relationship between landmarks and landmarks categories: landmark can be assigned to zero or more categories and one category may be assigned to zero or more landmarks.'>
                 Assigning categories to landmarks
                </a>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicListenEvents" title="To listen to changes in a landmark database, the classes described in Database events are used. The following sequence shows how a client can listen to database events.">
                 Listening to database events
                </a>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicExchange" title='A client can exchange landmark data with another party by using the import and export functionality. Two classes, CPosLandmarkEncoder and CPosLandmarkParser are used to convert landmark data to exchange format and from. The exchange format is defined by specifying its MIME type. The recommended format is "application/vnd.nokia.landmarkcollection+xml". The parser classes also support GPX format, which is identified by MIME type, "application/gps+xml".'>
                 Exchanging landmarks
                </a>
                <ul>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicExport" title="To export a set of landmarks, the client must first create a CPosLandmarkEncoder object for the landmark content format in which the landmarks should be encoded. The client can add some information of the landmark collection in the encoder as well.">
                   Exporting landmarks
                  </a>
                 </li>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicImport" title="To import landmark content, the client must first create a parser object of class CPosLandmarkParser, which can parse the landmark content. The client does not have to call CPosLandmarkParser::ParseContentL() first. If the content is not already parsed, this will be handled by the import operation.">
                   Importing landmarks
                  </a>
                 </li>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicEncodetoURL" title="To encode a landmark to an URL ,the client has to first create an instance of CPosLandmarkEncoder class with the URL hostname as the MIME type.( which is 'maps.ovi.com' ).The output buffer into which the encoded URL is written can be set using the CPosLandmarkEncoder::SetUseOutputBufferL.The output can also be encoded into a file by setting the output file using CPosLandmarkEncoder::SetUseOutputFileL.">
                   Encoding of Landmarks to URL
                  </a>
                 </li>
                 <li>
                  <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicParsingURL" title="The client can parse an URL and decode the landmark information present in the URL by using the CPosLandmarkParser class.In order to do this,the client has to first create an instance of the CPosLandmarkParser with the MIME type as the hostname of the URL( which is 'maps.ovi.com' ).">
                   Parsing URL to obtain a landmark
                  </a>
                 </li>
                </ul>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicIncrementalExecution" title="Some operations in Landmarks API can take a long time to complete. It is recommended to run them incrementally. The client can use an active object to run the incremental operations in the background so that other tasks can be handled in the meantime, in particular handling UI events. To use an incremental operation in Landmarks API, the classes described in the Incremental operations section are used.">
                 Incremental operations
                </a>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicErrorHandling" title="Landmarks API uses the standard Symbian error reporting mechanism. In case of an irrecoverable error, panics are used. Otherwise, errors are reported through return codes or leaves.">
                 Error handling
                </a>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopic3%2e3" title="When using Landmarks API, the memory overhead is dependent on the amount of classes instantiated by the client, but there are also some cases where extra memory usage can be involved and cannot be controlled by the client.">
                 Memory overhead
                </a>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopic3%2e4" title="This API does not allow extensions.">
                 Extensions to the API
                </a>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicSecurity" title="Landmarks are considered as important user data and this applies some access limitations to client applications. For example, in order to be able to read landmarks from landmark database client must have ReadUserData capability and WriteUserData in order to modify it. Whenever special capabilities are needed to work with landmarks database, they are listed in appropriate class and method descriptions.">
                 Security issues
                </a>
               </li>
              </ul>
             </li>
             <li>
              <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopic4">
               Glossary
              </a>
              <ul>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopic4%2e1">
                 Abbreviations
                </a>
               </li>
               <li>
                <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopic4%2e2">
                 Definitions
                </a>
               </li>
              </ul>
             </li>
             <li>
              <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopic">
               References
              </a>
             </li>
            </ul>
           </div>
          </div>
          <div class="section">
           <a name="Landmarks_API_Specification%2etopic1">
           </a>
           <h1>
            Purpose
           </h1>
           <p>
            The purpose of Landmarks API is to enable terminal applications to manage
landmarks in a consistent way. For instance, if a landmark is received in
an email and the user chooses to store the landmark in the terminal, the landmark
is instantly available for a map application. It is available from S60 3rd Edition onwards and ehnaced version of this API in Symbian^3 supports:
           </p>
           <ul>
            <li>
             <p>
              Importing
GPX, KML and KMZ content
             </p>
            </li>
            <li>
             <p>
              Encoding &amp; decoding URL
             </p>
            </li>
           </ul>
           <p>
            This API does not provide search functionality. Search is provided by Landmarks
Search API.
           </p>
          </div>
          <div class="section">
           <a name="Landmarks_API_Specification%2etopic2">
           </a>
           <h1>
            API Description
           </h1>
           <p>
            Landmarks API is mainly targeted for end-user applications. It lets clients
access landmark databases and read/edit their content.
           </p>
           <p>
            This API uses position classes and generic position field IDs from Location
Acquisition API to define the location of a landmark.
           </p>
           <p>
            Landmarks API enables defining landmark categories. Landmark categories
are labels, which can be assigned to a landmark to define the type of the
landmark. For instance, a landmark of some restaurant could be a assigned
with category &#8220;Restaurants&#8221;.
           </p>
           <p>
            Landmarks API provides an interface for listening to database events. Clients
can be notified when a landmark database is edited.
           </p>
           <p>
            Landmarks API also offers methods for exporting landmark data to and importing
from exchange format, which enables exchanging landmarks between terminals.
           </p>
           <p>
            As a part of the exchange format support,it provides encoding of a landmark
object into an URL &amp; parsing of an URL and decoding it into a landmark
object.
           </p>
           <p>
            The logical type of the API is Library API. Technically it is method-call
interface. Landmarks API loads the implementation at run time but the implementation
consists only of local objects.
           </p>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopicLandmarks">
            </a>
            <h2>
             Landmarks
            </h2>
            <p>
             Landmark is a location with a name and it may also contain other data,
such as description, icon, address details etc. Landmarks are organized in
landmark databases, which reside on terminal or may be remote. Client can
read landmarks from a database, add new, modify and remove existing landmarks.
            </p>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicLmAttrs">
             </a>
             <h3>
              Landmark attributes
             </h3>
             <p>
              A landmark can contain the following attributes:
             </p>
             <p>
              <em>
               Landmark attributes
              </em>
             </p>
             <table class="TableWrap" border="1" cellpadding="1" cellspacing="0">
              <tr valign="top">
               <th>
                Item ID
               </th>
               <th>
                This ID is a reference to the landmark in a landmark database. It is
locally unique within one database.
               </th>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 Landmark name
                </p>
               </td>
               <td class="Cell">
                <p>
                 The name of the landmark can contain a maximum of 255 characters. The
landmark name does not have to be unique in a database.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 Position
                </p>
               </td>
               <td class="Cell">
                <p>
                 The WGS84 coordinate for the landmark.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 Coverage radius
                </p>
               </td>
               <td class="Cell">
                <p>
                 Coverage radius is set if the landmark is big, for example, a city.
It defines the size of the area, which the landmark represents. The coverage
area is specified in meters.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 Category info
                </p>
               </td>
               <td class="Cell">
                <p>
                 The categories related to the landmark, e.g. restaurant, gas station,
grocery store, etc. For more information about categories, see section
                 <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicLmCats" title="A landmark may be assigned to one or many categories (or none at all). Categories help to classify landmarks, group them, enable finer search criteria etc. Landmark categories are also stored in landmark databases.">
                  Landmark categories
                 </a>
                 .
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 Icon
                </p>
               </td>
               <td class="Cell">
                <p>
                 A reference to an icon in an icon file which can be used to symbolize
the landmark in a UI. An icon mask can also be specified from the same icon
file.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 Description
                </p>
               </td>
               <td class="Cell">
                <p>
                 A textual description of the landmark, for example, &#8220;Chinese restaurant.
Nice atmosphere and the service is superb&#8221;. The description has a maximum
length of 4095 characters.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 Position fields
                </p>
               </td>
               <td class="Cell">
                <p>
                 Generic position fields as defined by Location Acquisition API . A
position field can, for instance, be the street address of the landmark or
the name of the city where the landmark is found. Landmarks API only supports
text position fields. If the client wants to store a non-text field, the value
must first be converted to a textual representation. A landmark can contain
any number of position fields.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 Place ID
                </p>
               </td>
               <td class="Cell">
                <p>
                 The unique id specified by the client for any location.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 TimeStamp
                </p>
               </td>
               <td class="Cell">
                <p>
                 The time associated with a landmark.The format that is used for timestamp
is YYYYMMDD:HHMMSS.MMMMMM wherein the date field is mandatory.Validations
for this field are the same as in TTime object.
                </p>
               </td>
              </tr>
             </table>
            </div>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopicLmCats">
            </a>
            <h2>
             Landmark categories
            </h2>
            <p>
             A landmark may be assigned to one or many categories (or none at all).
Categories help to classify landmarks, group them, enable finer search criteria
etc. Landmark categories are also stored in landmark databases.
            </p>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicLocalGlobal">
             </a>
             <h3>
              Local and global landmark categories
             </h3>
             <p>
              Landmark categories may be local or global. Local categories are defined
by the user. They are stored in a database and cannot be reused by multiple
databases unless the user creates the same category in several databases.
             </p>
             <p>
              Global categories are predefined in the terminal and may be reused in multiple
databases and multiple phones and on different platforms. The Global Category
ID uniquely specifies a global category, which makes global categories localizable.
The names and icons of global categories are predefined in a resource file
and the category name is automatically changed in the database when it is
open if the terminal language changes since the last usage of the database.
              <b>
               Note:
              </b>
              The
global category name will not be changed to the newly selected language if
the user has previously renamed this category.
             </p>
             <p>
              The predefined global landmark categories are listed in the following table:
             </p>
             <p>
              <em>
               Predefined global landmark categories
              </em>
             </p>
             <table class="TableWrap" border="1" cellpadding="1" cellspacing="0">
              <tr valign="top">
               <th>
                3000
               </th>
               <th>
                Accommodation
               </th>
               <th>
                Hotel, Camping site
               </th>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 6000
                </p>
               </td>
               <td class="Cell">
                <p>
                 Business
                </p>
               </td>
               <td class="Cell">
                <p>
                 Bank, Factory, Office
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 9000
                </p>
               </td>
               <td class="Cell">
                <p>
                 Communication
                </p>
               </td>
               <td class="Cell">
                <p>
                 Internet Access Point, Public Telephone, Wireless LAN Hot Spot
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 12000
                </p>
               </td>
               <td class="Cell">
                <p>
                 Educational institute
                </p>
               </td>
               <td class="Cell">
                <p>
                 School, College
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 15000
                </p>
               </td>
               <td class="Cell">
                <p>
                 Entertainment
                </p>
               </td>
               <td class="Cell">
                <p>
                 Amusement park, Cinema, Concert hall, Night club
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 18000
                </p>
               </td>
               <td class="Cell">
                <p>
                 Food &amp; Beverage
                </p>
               </td>
               <td class="Cell">
                <p>
                 Fast food, Restaurant, Caf&#233;, Bar
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 21000
                </p>
               </td>
               <td class="Cell">
                <p>
                 Geographical area
                </p>
               </td>
               <td class="Cell">
                <p>
                 City, City center, Town
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 24000
                </p>
               </td>
               <td class="Cell">
                <p>
                 Outdoor activities
                </p>
               </td>
               <td class="Cell">
                <p>
                 Camping site, Fishing place, Hunting, National park, Playground
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 27000
                </p>
               </td>
               <td class="Cell">
                <p>
                 People
                </p>
               </td>
               <td class="Cell">
                <p>
                 My home, My friend&#8217;s home, Father&#8217;s summer cottage, Child&#8217;s school
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 30000
                </p>
               </td>
               <td class="Cell">
                <p>
                 Public service
                </p>
               </td>
               <td class="Cell">
                <p>
                 Tourist information office, Government office, Library, Post office,
Hospital, Police
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 33000
                </p>
               </td>
               <td class="Cell">
                <p>
                 Religious places
                </p>
               </td>
               <td class="Cell">
                <p>
                 Church, Mosque
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 36000
                </p>
               </td>
               <td class="Cell">
                <p>
                 Shopping
                </p>
               </td>
               <td class="Cell">
                <p>
                 Market Place, Pharmacy, Shop, Shopping Center
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 39000
                </p>
               </td>
               <td class="Cell">
                <p>
                 Sightseeing
                </p>
               </td>
               <td class="Cell">
                <p>
                 Monument, Mountain top, Museum
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 42000
                </p>
               </td>
               <td class="Cell">
                <p>
                 Sports
                </p>
               </td>
               <td class="Cell">
                <p>
                 Bowling, Golf course, Ice hockey hall, Stadium
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 45000
                </p>
               </td>
               <td class="Cell">
                <p>
                 Transport
                </p>
               </td>
               <td class="Cell">
                <p>
                 Airport, Bus stop, Harbour, Railway Station, Rest area
                </p>
               </td>
              </tr>
             </table>
             <p>
              Other IDs are reserved for future use. Names are given only
for reference purposes, localized names are defined for all languages supported
by the platform.
             </p>
            </div>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicCatAttrs">
             </a>
             <h3>
              Category attributes
             </h3>
             <p>
              A landmark category contains the following attributes:
             </p>
             <p>
              <em>
               Landmark category attributes
              </em>
             </p>
             <table class="TableWrap" border="1" cellpadding="1" cellspacing="0">
              <tr valign="top">
               <th>
                Item ID
               </th>
               <th>
                This ID is a reference to the category in a landmark database. It is
locally unique within one database.
               </th>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 Category name
                </p>
               </td>
               <td class="Cell">
                <p>
                 The name of the category can contain a maximum of 124 characters. The
category name must be unique in a database. If the client tries to change
the name of a category and that name is already occupied by another category,
the update fails.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 Global category ID
                </p>
               </td>
               <td class="Cell">
                <p>
                 This ID refers to a category in a globally defined category set.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 Icon
                </p>
               </td>
               <td class="Cell">
                <p>
                 A reference to an icon in an icon file, which can be used to symbolize
the category in a UI. An icon mask can also be specified from the same icon
file.
                </p>
               </td>
              </tr>
             </table>
            </div>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopicLmUrl">
            </a>
            <h2>
             Landmark URL format specification
            </h2>
            <p>
             The URL that is required to be encoded or parsed should be specified according
to the following format.Check
             <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopic4%2e2" title="Definitions">
              References
             </a>
             section
for more details.
            </p>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicNotations">
             </a>
             <h3>
              Notations Used
             </h3>
             <p>
              * 	- 0 or more occurences
             </p>
             <p>
              1* 	- 1 or more occurrences
             </p>
             <p>
              []	- optional contents
             </p>
             <p>
              &#8216;&#8217;	- literals
             </p>
             <p>
              X*Y	- between X &amp; Y occurences ( For Eg : 2*5	- between 2 &amp; 5
occurences )
             </p>
            </div>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicGrammar">
             </a>
             <h3>
              Grammar Definition
             </h3>
             <p>
              url -&gt; [ protocol  &#8216;://&#8217; ] hostname &#8216;/?&#8217; location *[ &#8216;??&#8217; location ]
             </p>
             <p>
              protocol -&gt; &#8216;http&#8217; | &#8216;https&#8217;
             </p>
             <p>
              hostname -&gt; [&#8216;www.&#8217;] &#8216;maps.ovi.com&#8217;
             </p>
             <p>
              location -&gt; locationparams *[ '&amp;' locationparams ]
             </p>
             <p>
              locationparams -&gt; placeid | latitude | longitude | name | street | housenumber
| postalcode | city | state | country | telephone | web | category | description
| positionaccuracy | altitude | altitudeaccuracy | speed | heading | timestamp
             </p>
             <p>
              placeid -&gt; &#8216;pid =&#8217; placeidvalue
             </p>
             <p>
              placeidvalue -&gt;  0*255 [ alphanum | escaped ]
             </p>
             <p>
              alphanum -&gt; alpha | digit
             </p>
             <p>
              alpha    -&gt; lowalpha | upalpha
             </p>
             <p>
              lowalpha -&gt; &#8216;a&#8217; | &#8216;b&#8217; | &#8216;c&#8217; | &#8216;d&#8217; | &#8216;e&#8217; | &#8216;f&#8217; | &#8216;g&#8217; | &#8216;h&#8217; | &#8216;i&#8217; | &#8216;j&#8217; |
&#8216;k&#8217; | &#8216;l&#8217; | &#8216;m&#8217; | &#8216;n&#8217; | &#8216;o&#8217; | &#8216;p&#8217; | &#8216;q&#8217; | &#8216;r&#8217; | &#8216;s&#8217; | &#8216;t&#8217; | &#8216;u&#8217; | &#8216;v&#8217; | &#8216;w&#8217;
| &#8216;x&#8217; | &#8216;y&#8217; | &#8216;z&#8217;
             </p>
             <p>
              upalpha  -&gt; &#8216;A&#8217; | &#8216;B&#8217; | &#8216;C&#8217; | &#8216;D&#8217; | &#8216;E&#8217; | &#8216;F&#8217; | &#8216;G&#8217; | &#8216;H&#8217; | &#8216;I&#8217; | &#8216;J&#8217; |
&#8216;K&#8217; | &#8216;L&#8217; | &#8216;M&#8217; | &#8216;N&#8217; | &#8216;O&#8217; | &#8216;P&#8217; | &#8216;Q&#8217; | &#8216;R&#8217; | &#8216;S&#8217; | &#8216;T&#8217; | &#8216;U&#8217; | &#8216;V&#8217; | &#8216;W&#8217;
| &#8216;X&#8217; | &#8216;Y&#8217; | &#8216;Z&#8217;
             </p>
             <p>
              digit -&gt; &#8216;0&#8217; | &#8216;1&#8217; | &#8216;2&#8217; | &#8216;3&#8217; | &#8216;4&#8217; | &#8216;5&#8217; | &#8216;6&#8217; | &#8216;7&#8217; | &#8216;8&#8217; | &#8216;9&#8217;
             </p>
             <p>
              escaped -&gt; &#8216;%&#8217; hex hex
             </p>
             <p>
              hex -&gt; digit | &#8216;a&#8217; | &#8216;b&#8217; | &#8216;c&#8217; | &#8216;d&#8217; | &#8216;e&#8217; | &#8216;f&#8217; | &#8216;A&#8217; | &#8216;B&#8217; | &#8216;C&#8217; | &#8216;D&#8217;
| &#8216;E&#8217; | &#8216;F&#8217;
             </p>
             <p>
              latitude -&gt; &#8216;la =&#8217; latitudevalue
             </p>
             <p>
              latitudevalue -&gt; [sign] 1*2 digit [ &#8216;.&#8217;0 *6 digit ]
             </p>
             <p>
              sign -&gt; &#8216;+&#8217; | &#8216;-&#8217;
             </p>
             <p>
             </p>
             <p>
              longitude -&gt; &#8216;lo =&#8217; longitudevalue
             </p>
             <p>
              longitudevalue -&gt; [sign] 1*3 digit [ &#8216;.&#8217;0 *6 digit ]
             </p>
             <p>
              name -&gt; &#8216;n =&#8217; namevalue
             </p>
             <p>
              namevalue -&gt; 0*255 ( alphanum | escaped )
             </p>
             <p>
             </p>
             <p>
              street -&gt; &#8216;s =&#8217; streetvalue
             </p>
             <p>
              streetvalue -&gt; 0*255 ( alphanum | escaped )
             </p>
             <p>
              housenumber -&gt; &#8216;sn =&#8217; housenumbervalue
             </p>
             <p>
              housenumbervalue -&gt; 0*255 ( alphanum | escaped )
             </p>
             <p>
              postalcode -&gt; &#8216;pz =&#8217; postalcodevalue
             </p>
             <p>
              postalcodevalue -&gt; 0*255 ( alphanum | escaped )
             </p>
             <p>
              city -&gt; &#8216;c =&#8217; cityvalue
             </p>
             <p>
              cityvalue -&gt; 0*255 ( alphanum | escaped )
             </p>
             <p>
              state -&gt; &#8216;sp =&#8217; statevalue
             </p>
             <p>
              statevalue -&gt; 0*255 ( alphanum | escaped )
             </p>
             <p>
              country -&gt; &#8216;cr =&#8217; countryvalue
             </p>
             <p>
              countryvalue -&gt; 0*255 ( alphanum | escaped )
             </p>
             <p>
              telephone -&gt; &#8216;t =&#8217; telephonevalue
             </p>
             <p>
              telephonevalue -&gt;  0*255 ( alphanum | escaped )
             </p>
             <p>
              web -&gt; &#8216;w =&#8217; webvalue
             </p>
             <p>
              webvalue -&gt;0 *255 ( alphanum | escaped )
             </p>
             <p>
              category -&gt; &#8216;cat =&#8217; categoryvalue
             </p>
             <p>
              categoryvalue -&gt; 0*124 ( alphanum | escaped )
             </p>
             <p>
              description -&gt; &#8216;d =&#8217; descriptionvalue
             </p>
             <p>
              descriptionvalue -&gt; 0*4095 ( alphanum | escaped )
             </p>
             <p>
              positionaccuracy -&gt; &#8216;pa =&#8217; positionaccuracyvalue
             </p>
             <p>
              positionaccuracyvalue -&gt; 1* digit [ &#8216;.&#8217; 0*2digit ]
             </p>
             <p>
              altitude -&gt; &#8216;a=&#8217; altitudevalue
             </p>
             <p>
              altitudevalue -&gt; [sign] 1* digit [ &#8216;.&#8217; 0*2 digit ]
             </p>
             <p>
              altitudeaccuracy -&gt; &#8216;aa =&#8217; altitudeaccuracyvalue
             </p>
             <p>
              altitudeaccuracyvalue -&gt; 1* digit [ &#8216;.&#8217;0 *2 digit ]
             </p>
             <p>
              speed -&gt; &#8216;v =&#8217; speedvalue
             </p>
             <p>
              speedvalue -&gt; 1* digit [ &#8216;.&#8217;0 *2 digit ]
             </p>
             <p>
              heading -&gt; &#8216;h =&#8217; headingvalue
             </p>
             <p>
              headingvalue -&gt; 1* digit [ &#8216;.&#8217;0 *2 digit ]
             </p>
             <p>
              timestamp -&gt; &#8216;ts =&#8217; timestampvalue
             </p>
             <p>
              timestampvalue -&gt; full-date ':' [ full-time ]
             </p>
             <p>
              full-date -&gt; date-fullyear date-month date-mday
             </p>
             <p>
              full-time -&gt; time-hour time-minute time-second ['.'time-microseconds]
             </p>
             <p>
              time-microseconds -&gt; 0*6digit
             </p>
             <p>
              time-second -&gt; 2digit
             </p>
             <p>
              time-minute -&gt; 2digit
             </p>
             <p>
              time-hour -&gt; 2digit
             </p>
             <p>
              date-mday -&gt; 2digit
             </p>
             <p>
              date-month -&gt; 2digit
             </p>
             <p>
              date-fullyear -&gt; 4digit
             </p>
            </div>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicRestrictions">
             </a>
             <h3>
              Restrictions
             </h3>
             <p>
             </p>
             <p>
              <em>
              </em>
             </p>
             <table class="TableWrap" border="1" cellpadding="1" cellspacing="0">
              <tr valign="top">
               <th>
                locationparams
               </th>
               <th>
                Latitude &amp; longitude params are mandatory.Except the category param
( cat ),if there is repetition of any other params then only the value of
the first occurrence is considered.The category param is allowed to be repeated
in order to support multiple categories to be associated with a single landmark.
               </th>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 latitudevalue
                </p>
               </td>
               <td class="Cell">
                <p>
                 Value ranges between -90 and +90,where negative values indicate southern
hemisphere &amp; positive values indicate northern hemisphere.The decimal
number is rounded upto 6 decimal digits.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 longitudevalue
                </p>
               </td>
               <td class="Cell">
                <p>
                 Value ranges between -180 and +180,where negative values indicate western
hemisphere &amp; positive values indicate eastern hemisphere.The decimal number
is rounded upto 6 decimal digits.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 escaped
                </p>
               </td>
               <td class="Cell">
                <p>
                 Only special characters whose Ascii value ( provided in hex ) ranges
between these are to be escaped : 20 &#8211; 2F , 3A &#8211; 40 , 5B &#8211; 60 , 7B &#8211; 7E  
 . Refer
                 <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopic4%2e2" title="Definitions">
                  References
                 </a>
                 section for ascii table
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 positionaccuracyvalue
                </p>
               </td>
               <td class="Cell">
                <p>
                 Max value is that of max value of TReal32 .The metric considered here
is metres.The decimal number is rounded upto 2 decimal digits.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 altitudevalue
                </p>
               </td>
               <td class="Cell">
                <p>
                 Max value is that of max value of TReal32 .The metric considered here
is metres.The decimal number is rounded upto 2 decimal digits.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 altitudeaccuracyvalue
                </p>
               </td>
               <td class="Cell">
                <p>
                 Max value is that of max value of TReal32 The metric considered here
is metres.The decimal number is rounded upto 2 decimal digits.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 speedvalue
                </p>
               </td>
               <td class="Cell">
                <p>
                 Max value is that of max value of TReal32 .The metric considered here
is metres/second.The decimal number is rounded upto 2 decimal digits.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 headingvalue
                </p>
               </td>
               <td class="Cell">
                <p>
                 Max value is that of max value of TReal32 .The metric considered here
is degrees.The decimal number is rounded upto 2 decimal digits.
                </p>
               </td>
              </tr>
              <tr valign="top">
               <td class="Cell">
                <p>
                 timestampvalue
                </p>
               </td>
               <td class="Cell">
                <p>
                 The full date is mandatory for this field to be encoded/parsed whereas
if the full time is not specified then the default value assumed for time
will be 0.
                </p>
               </td>
              </tr>
             </table>
            </div>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicExampleUrl">
             </a>
             <h3>
              Example URL
             </h3>
             <p>
              Sample URL containing all the location information and conforming to the
grammar as defined above.
             </p>
             <p>
              &quot;http://www.maps.ovi.com/?la=23.134&amp;lo=120.22&amp;pid=12&amp;n=Placemark&amp;s=HighStreet&amp;sn=1234&amp;pz=123457&amp;c=Bangalore&amp;sp=Karnataka&amp;cr=India&amp;t=9812434125&amp;w=www.weburl.com&amp;cat=MyLandmarks&amp;cat=MyFavouritePlaces&amp;d=Placemark%20from%20Bangalore&amp;pa=12.22&amp;a=43215&amp;v=0&amp;h=0&amp;ts=20090304:121209.123456&quot;
             </p>
            </div>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopicUseCases">
            </a>
            <h2>
             Use cases
            </h2>
            <p>
             These a main use cases for Landmarks API:
            </p>
            <ul>
             <li>
              <p>
               Opening landmark databases
              </p>
             </li>
             <li>
              <p>
               Managing landmarks
              </p>
             </li>
             <li>
              <p>
               Managing landmark categories
              </p>
             </li>
             <li>
              <p>
               Assigning categories to landmarks
              </p>
             </li>
             <li>
              <p>
               Exchanging landmarks
              </p>
             </li>
             <li>
              <p>
               Observing landmark database events
              </p>
             </li>
            </ul>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopicApiClasses">
            </a>
            <h2>
             API class structure
            </h2>
            <p>
             The following subchapters describe the Landmarks API class structure.
UML diagrams are used to present the classes and their dependencies.
             <b>
              Note
             </b>
             :
The UML diagrams do not show all the available methods, and some of or all
of the method parameters may be left out.
            </p>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicDatabaseAccessClasses">
             </a>
             <h3>
              Database access
             </h3>
             <p>
              Landmarks are stored in databases. A client accesses landmark
databases through the
              <code class="ApiItem">
               CPosLandmarkDatabase
              </code>
              class.
Each instance of CPosLandmarkDatabase is a handle to exactly one landmark
database. All operations upon a landmark database are performed through instances
of
              <code class="ApiItem">
               CPosLandmarkDatabase
              </code>
              .
             </p>
             <p>
              <code class="ApiItem">
               CPosLandmark
              </code>
              represents the content
of a landmark, for example the landmark name and landmark position. This class
is used in
              <code class="ApiItem">
               CPosLandmarkDatabase
              </code>
              methods to let
the client read or edit a landmark in the database.
             </p>
             <p>
              A landmark stored in a database is referenced by an ID (
              <code class="ApiItem">
               TPosLmItemId
              </code>
              ),
which is unique within the database. To access a landmark through CPosLandmarkDatabase,
the client must specify the ID of the landmark.
             </p>
             <p>
              It is common that a client needs to retrieve a set of landmarks,
for instance when listing the content of a landmark database. In Landmarks
API, a landmark set is accessed by using an iterator object.
              <code class="ApiItem">
               CPosLmItemIterator
              </code>
              lets
the client retrieve the IDs of the iterated landmarks. The client can iterate
all the landmarks in a database by retrieving a
              <code class="ApiItem">
               CPosLmItemIterator
              </code>
              instance
from
              <code class="ApiItem">
               CPosLandmarkDatabase
              </code>
              .
             </p>
             <p>
              Clients may require retrieving landmarks in a certain sort order.
In Landmarks API, the client specifies sort preference by using a
              <code class="ApiItem">
               TPosLmSortPref
              </code>
              object.
             </p>
             <p>
              If a client is not interested in full landmark information,
it can perform a partial read. For instance, the client may only be interested
in the name of the landmark. By using a
              <code class="ApiItem">
               CPosLmPartialReadParameters
              </code>
              object,
the client can specify which landmark information is of interest.
             </p>
             <div class="Figure">
              <p class="Image">
               <a name="Landmark database access classes">
                <img src="images/Landmarks_API_DbAccess_Class_Structure.png" alt="Landmark database access classes" border="0" />
               </a>
              </p>
              <br clear="all" />
              <p class="Caption">
               Landmark database access classes
              </p>
             </div>
             <div class="RelatedItems">
              Related APIs
             </div>
             <ul>
              <li>
               <code class="ApiItem">
                CPosLandmark
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLandmarkDatabase
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLmItemIterator
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLmPartialReadParameters
               </code>
              </li>
              <li>
               <code class="ApiItem">
                TPosLmItemId
               </code>
              </li>
              <li>
               <code class="ApiItem">
                TPosLmSortPref
               </code>
              </li>
             </ul>
            </div>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicCategoryMgmtClasses">
             </a>
             <h3>
              Category management
             </h3>
             <p>
              A landmark database can contain landmark categories. To access
categories in the database, the client must create a
              <code class="ApiItem">
               CPosLmCategoryManager
              </code>
              object
connected to the database. Through this object, the client can retrieve information
about the categories in the database or edit the category content.
             </p>
             <p>
              <code class="ApiItem">
               CPosLandmarkCategory
              </code>
              represents
information about a landmark category. It is used in the
              <code class="ApiItem">
               CPosLmCategoryManager
              </code>
              interface
to pass category information from/to the client.
             </p>
             <p>
              A landmark category stored in a database is referenced by an
ID (
              <code class="ApiItem">
               TPosLmItemId
              </code>
              ), which is unique within the
database. To refer to a landmark category, the client specifies the ID of
the category.
              <b>
               Note:
              </b>
              The same type,
              <code class="ApiItem">
               TPosLmItemId
              </code>
              ,
is used to refer to landmarks and categories. It is possible that a landmark
and a category have the same ID.
             </p>
             <p>
              Categories can be iterated, just like landmarks.
              <code class="ApiItem">
               CPosLmItemIterator
              </code>
              is
used for iterating both landmark and category sets.
              <b>
               Note:
              </b>
              The
iterator is never used to iterate a mixed set of landmarks and categories.
             </p>
             <div class="Figure">
              <p class="Image">
               <a name="Landmark category management classes">
                <img src="images/Landmarks_API_CatMgmt_Class_Structure.png" alt="Landmark category management classes" border="0" />
               </a>
              </p>
              <br clear="all" />
              <p class="Caption">
               Landmark category management classes
              </p>
             </div>
             <div class="RelatedItems">
              Related APIs
             </div>
             <ul>
              <li>
               <code class="ApiItem">
                CPosLandmarkCategory
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLmCategoryManager
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLmItemIterator
               </code>
              </li>
              <li>
               <code class="ApiItem">
                TPosLmItemId
               </code>
              </li>
             </ul>
            </div>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicEventClasses">
             </a>
             <h3>
              Database events
             </h3>
             <p>
              A client can listen to events from landmark databases. To listen
to the next event, the client calls
              <code class="ApiItem">
               CPosLandmarkDatabase::NotifyDatabaseEvent()
              </code>
              .
The client passes a
              <code class="ApiItem">
               TRequestStatus
              </code>
              , which will
be completed when an event is detected. When an event has been retrieved,
the client must renew the
              <code class="ApiItem">
               NotifyDatabaseEvent()
              </code>
              request
to listen to further events.
              <div class="Figure">
               <p class="Image">
                <a name="Classes for listening to landmark databa...">
                 <img src="images/Landmarks_API_Events_Class_Structure.png" alt="Classes for listening to landmark databa..." border="0" />
                </a>
               </p>
               <br clear="all" />
               <p class="Caption">
                Classes for listening to landmark database events
               </p>
              </div>
             </p>
             <div class="RelatedItems">
              Related APIs
             </div>
             <ul>
              <li>
               <code class="ApiItem">
                CPosLandmarkDatabase::NotifyDatabaseEvent()
               </code>
              </li>
              <li>
               <code class="ApiItem">
                NotifyDatabaseEvent()
               </code>
              </li>
              <li>
               <code class="ApiItem">
                TRequestStatus
               </code>
              </li>
             </ul>
            </div>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicExchangeOpsClasses">
             </a>
             <h3>
              Exchange operations
             </h3>
             <p>
              A client can exchange landmark data with another party by using the import
and export functionality. If a client has received a file or buffer containing
landmark data and the client is connected to a landmark database, the client
can use Landmarks API to import landmarks to the landmark database. To import
landmarks, the client has to create an instance of the
              <code class="ApiItem">
               CPosLandmarkParser
              </code>
              class.
             </p>
             <p>
              The client can also use Landmarks API to export landmarks from the landmark
database. This will result in a file or buffer containing the landmark data.
To export landmarks, the client has to create an instance of the
              <code class="ApiItem">
               CPosLandmarkEncoder
              </code>
              class.
             </p>
             <p>
              The exchange of landmarks is also supported via an URL.The client can encode
a landmark object into an URL containing all the location inforamtion.To encode
a landmark to an URL ,the client has to create an instance of the
              <code>
               CPosLandmarkEncoder
class.
              </code>
             </p>
             <p>
              Also the client can parse a given URL to decode the location
information present in the URL and create a landmark object.To parse an URL
,the client has to create an instance of the
              <code>
               CPosLandmarkParser
class.
              </code>
             </p>
             <div class="Figure">
              <p class="Image">
               <a name="Classes for handling exchange of landmar...">
                <img src="images/Landmarks_API_Exchange_Class_Structure.png" alt="Classes for handling exchange of landmar..." border="0" />
               </a>
              </p>
              <br clear="all" />
              <p class="Caption">
               Classes for handling exchange of landmark content
              </p>
             </div>
             <div class="RelatedItems">
              Related APIs
             </div>
             <ul>
              <li>
               <code class="ApiItem">
                CPosLandmarkEncoder
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLandmarkParser
               </code>
              </li>
             </ul>
            </div>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicOperationClasses">
             </a>
             <h3>
              Incremental operations
             </h3>
             <p>
              Some operations in Landmarks API can potentially take a long
time. These operations can therefore be run incrementally. The client retrieves
a
              <code class="ApiItem">
               CPosLmOperation
              </code>
              object, which can either be
run incrementally or all at once.
             </p>
             <p>
              If the operation is run incrementally, the client can read the
operation progress between incremental steps.
             </p>
             <div class="Figure">
              <p class="Image">
               <a name="Classes for handling incremental operati...">
                <img src="images/Landmarks_API_Incremental_Class_Structure.png" alt="Classes for handling incremental operati..." border="0" />
               </a>
              </p>
              <br clear="all" />
              <p class="Caption">
               Classes for handling incremental operations in Landmarks
API
              </p>
             </div>
             <div class="RelatedItems">
              Related APIs
             </div>
             <ul>
              <li>
               <code class="ApiItem">
                CPosLmOperation
               </code>
              </li>
             </ul>
            </div>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicSerializationClasses">
             </a>
             <h3>
              Serialization support
             </h3>
             <p>
              A client can pack a landmark or a landmark category object into
a buffer for further serialization. This can be used e.g. for sending data
over process boundaries. On the receiving side packed objects can be unpacked
from buffer. The
              <code class="ApiItem">
               PosLandmarkSerialization
              </code>
              class
contains static methods
              <code class="ApiItem">
               PackL()
              </code>
              and
              <code class="ApiItem">
               UnpackL()
              </code>
              for
packing and unpacking
              <code class="ApiItem">
               CPosLandmark
              </code>
              instances.
              <code class="ApiItem">
               PosLmCategorySerialization
              </code>
              class
contains appropriate methods for packing and unpacking
              <code class="ApiItem">
               CPosLandmarkCategory
              </code>
              instances.
             </p>
             <p>
              <div class="Figure">
               <p class="Image">
                <a name="Classes for packing landmark and categor...">
                 <img src="images/Landmarks_API_Serialz_Class_Structure.png" alt="Classes for packing landmark and categor..." border="0" />
                </a>
               </p>
               <br clear="all" />
               <p class="Caption">
                Classes for packing landmark and categories into buffer
and unpacking back
               </p>
              </div>
             </p>
             <div class="RelatedItems">
              Related APIs
             </div>
             <ul>
              <li>
               <code class="ApiItem">
                CPosLandmark
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLandmarkCategory
               </code>
              </li>
              <li>
               <code class="ApiItem">
                PackL()
               </code>
              </li>
              <li>
               <code class="ApiItem">
                PosLandmarkSerialization
               </code>
              </li>
              <li>
               <code class="ApiItem">
                PosLmCategorySerialization
               </code>
              </li>
              <li>
               <code class="ApiItem">
                UnpackL()
               </code>
              </li>
             </ul>
            </div>
           </div>
          </div>
          <div class="section">
           <a name="Landmarks_API_Specification%2etopic3">
           </a>
           <h1>
            Using the Landmarks API
           </h1>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopicUsingDb">
            </a>
            <h2>
             Using landmarks database
            </h2>
            <p>
             To start accessing landmarks in a landmark database, the client only has
to create an instance of the
             <code class="ApiItem">
              CPosLandmarkDatabase
             </code>
             class.
This is accomplished by calling one of the
             <code class="ApiItem">
              CPosLandmarkDatabase::OpenL()
             </code>
             overloads.
The default landmark database is opened by calling the overload with no parameters.
(If the client wants to open any other landmark database, a URI is used to
specify which database to open, which is described in
             <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicDbUri" title="CPosLandmarkDatabase contains a method OpenL(), which takes a database URI as input. The URI consists of a scheme and the database location, i.e. &lt;scheme&gt;://&lt;location&gt;. If the scheme is left out, it is understood that the database is local on the terminal and is accessed through the file system. The URI c:landmarks.LDB is therefore the same thing as file://c:landmarks.ldb.">
              Database URI
             </a>
             chapter).
            </p>
            <p>
             When the client has opened a landmark database, the database may have to
be initialized. There is a method
             <code class="ApiItem">
              CPosLandmarkDatabase::IsInitializingNeeded()
             </code>
             for
checking if the database has to be initialized and a method
             <code class="ApiItem">
              CPosLandmarkDatabase::InitializeL()
             </code>
             for
performing initialization. If the database is not initialized, the client
will not be able to access the database. The client may also be required to
call
             <code class="ApiItem">
              InitializeL()
             </code>
             in the case when the database needs recovery
(which may happen if a modifying transaction has failed).
            </p>
            <p>
             When the client has a
             <code class="ApiItem">
              CPosLandmarkDatabase
             </code>
             object, it
can start reading or editing the database content.
             <b>
              Note:
             </b>
             It is not
possible to edit the database content if the database is read-only.
            </p>
            <p>
             The database handle is closed by destroying the
             <code class="ApiItem">
              CPosLandmarkDatabase
             </code>
             object.
Closing the handle is not allowed while there are still operations running
on it. Doing so will result in a panic.
            </p>
            <p>
             When the client is done using Landmarks API, it has to call the global
method
             <strong class="unresolvedXref">
              ReleaseLandmarkResources()
             </strong>
             .
If this method is not called, the client may get a memory leak. This method
is described in
             <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicRelease" title="The Landmarks subsystem uses ECom plug-ins that provide the implementation for accessing landmark databases. ECom allocates resources that are not released when the plug-in is unloaded. These must be explicitly released by the client at shutdown. This is done by calling the global method ReleaseLandmarkResources(), which has the same effect as REComSession::FinalClose().">
              Releasing resources
             </a>
             section.
             <div class="Figure">
              <p class="Image">
               <a name="Using database sequence diagram">
                <img src="images/Landmarks_API_UsingDb_Sequence.png" alt="Using database sequence diagram" border="0" />
               </a>
              </p>
              <br clear="all" />
              <p class="Caption">
               Using database sequence diagram
              </p>
             </div>
            </p>
            <p>
             It is recommended to execute initialization operation incrementally (i.e.
asynchronously), see
             <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicIncrementalExecution" title="Some operations in Landmarks API can take a long time to complete. It is recommended to run them incrementally. The client can use an active object to run the incremental operations in the background so that other tasks can be handled in the meantime, in particular handling UI events. To use an incremental operation in Landmarks API, the classes described in the Incremental operations section are used.">
              Executing incremental operations
             </a>
             for more details.
            </p>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicDbUri">
             </a>
             <h3>
              Database URI
             </h3>
             <p>
              <code class="ApiItem">
               CPosLandmarkDatabase
              </code>
              contains a method
              <code class="ApiItem">
               OpenL()
              </code>
              ,
which takes a database URI as input. The URI consists of a scheme and the
database location, i.e.
              <code class="ApiItem">
               &lt;scheme&gt;://&lt;location&gt;
              </code>
              . If the
scheme is left out, it is understood that the database is local on the terminal
and is accessed through the file system. The URI
              <i>
               c:landmarks.LDB
              </i>
              is
therefore the same thing as
              <i>
               file://c:landmarks.ldb
              </i>
              .
             </p>
             <p>
              The location part of a landmark database URI for a database residing in
the terminal is specified by a drive letter, a database name and the LDB extension.
The format is
              <i>
               &lt;drive&gt;:&lt;database name&gt;.ldb
              </i>
              , e.g.
              <i>
               c:landmarks.ldb
              </i>
              .
              <b>
               Note:
              </b>
              A
path cannot be specified. If the URI does not specify the drive letter, for
example
              <i>
               landmarks.ldb
              </i>
              , the default landmark database drive will be
assumed.
             </p>
             <p>
              <code class="ApiItem">
               CPosLandmarkDatabase
              </code>
              provides also method
              <code class="ApiItem">
               DatabaseUriLC()
              </code>
              ,
which retrieves the URI of the open database.
             </p>
             <div class="RelatedItems">
              Related APIs
             </div>
             <ul>
              <li>
               <code class="ApiItem">
                &lt;scheme&gt;://&lt;location&gt;
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLandmarkDatabase
               </code>
              </li>
              <li>
               <code class="ApiItem">
                DatabaseUriLC()
               </code>
              </li>
              <li>
               <code class="ApiItem">
                OpenL()
               </code>
              </li>
             </ul>
            </div>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicCompactDb">
             </a>
             <h3>
              Compacting database
             </h3>
             <p>
              When modifying a landmark database, the database size increases. Some of
this memory is not really used. The client should therefore supervise the
database usage using the
              <code class="ApiItem">
               CPosLandmarkDatabase::SizeL()
              </code>
              method
and compact the database if there is too much unused space.
              <code class="ApiItem">
               CPosLandmarkDatabase::CompactL()
              </code>
              is
used to perform compacting and it can be run incrementally.
             </p>
             <p>
              Compaction is done internally in Landmarks as fallback in case the client
does not do it. This will lock the database and clients will not be able to
access the database until the compaction is complete. This is unexpected behavior
from the user&#8217;s point of view and it is therefore recommended that the client
performs the compaction itself.
             </p>
             <p>
              It is recommended to perform compaction when the usage level drops below
70%.
             </p>
             <div class="RelatedItems">
              Related APIs
             </div>
             <ul>
              <li>
               <code class="ApiItem">
                CPosLandmarkDatabase::CompactL()
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLandmarkDatabase::SizeL()
               </code>
              </li>
             </ul>
            </div>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicRelease">
             </a>
             <h3>
              Releasing resources
             </h3>
             <p>
              The Landmarks subsystem uses ECom plug-ins that provide the implementation
for accessing landmark databases. ECom allocates resources that are not released
when the plug-in is unloaded. These must be explicitly released by the client
at shutdown. This is done by calling the global method
              <strong class="unresolvedXref">
               ReleaseLandmarkResources()
              </strong>
              , which has
the same effect as
              <code class="ApiItem">
               REComSession::FinalClose()
              </code>
              .
             </p>
             <p>
              The most common way to release landmark resources is to call
              <strong class="unresolvedXref">
               ReleaseLandmarkResources()
              </strong>
              last in the
client&#8217;s destructor.
             </p>
             <div class="RelatedItems">
              Related APIs
             </div>
             <ul>
              <li>
               <code class="ApiItem">
                REComSession::FinalClose()
               </code>
              </li>
             </ul>
            </div>
            <div class="RelatedItems">
             Related APIs
            </div>
            <ul>
             <li>
              <code class="ApiItem">
               CPosLandmarkDatabase
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLandmarkDatabase::InitializeL()
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLandmarkDatabase::IsInitializingNeeded()
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLandmarkDatabase::OpenL()
              </code>
             </li>
             <li>
              <code class="ApiItem">
               InitializeL()
              </code>
             </li>
            </ul>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopicReadLandmarks">
            </a>
            <h2>
             Managing landmarks
            </h2>
            <p>
             Landmark properties are maintained by
             <code class="ApiItem">
              CPosLandmark
             </code>
             class.
Client uses this class to get and set landmark data.
            </p>
            <p>
             The following example shows how to open database and read landmarks.
            </p>
            <pre>
             <code class="cpp">
              //&nbsp;Open&nbsp;a&nbsp;handle&nbsp;to&nbsp;the&nbsp;default&nbsp;landmark&nbsp;database.
              <br />
              CPosLandmarkDatabase*&nbsp;db&nbsp;=&nbsp;CPosLandmarkDatabase::OpenL();
              <br />
              CleanupStack::PushL(&nbsp;db&nbsp;);
              <br />
              <br />
              //&nbsp;Perform&nbsp;initialization.&nbsp;
              <br />
              //&nbsp;If&nbsp;initialization&nbsp;is&nbsp;not&nbsp;needed,&nbsp;this&nbsp;method&nbsp;will&nbsp;not&nbsp;do&nbsp;anything.
              <br />
              ExecuteAndDeleteLD(&nbsp;db-&gt;InitializeL()&nbsp;);
              <br />
              <br />
              //&nbsp;Create&nbsp;an&nbsp;iterator&nbsp;for&nbsp;iterating&nbsp;the&nbsp;landmarks&nbsp;in&nbsp;the&nbsp;database
              <br />
              CPosLmItemIterator*&nbsp;iter&nbsp;=&nbsp;db-&gt;LandmarkIteratorL();
              <br />
              CleanupStack::PushL(&nbsp;iter&nbsp;);
              <br />
              <br />
              //&nbsp;Read&nbsp;each&nbsp;landmark&nbsp;in&nbsp;the&nbsp;database&nbsp;and&nbsp;do&nbsp;something.
              <br />
              TPosLmItemId&nbsp;lmID&nbsp;=&nbsp;KPosLmNullItemId;
              <br />
              while&nbsp;(&nbsp;(&nbsp;lmID&nbsp;=&nbsp;iter-&gt;NextL()&nbsp;)&nbsp;!=&nbsp;KPosLmNullItemId&nbsp;)
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;CPosLandmark*&nbsp;lm&nbsp;=&nbsp;db-&gt;ReadLandmarkLC(&nbsp;lmID&nbsp;);
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Do&nbsp;something&nbsp;with&nbsp;the&nbsp;landmark&nbsp;information
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;CleanupStack::PopAndDestroy(&nbsp;lm&nbsp;);
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              //&nbsp;Close&nbsp;the&nbsp;iterator&nbsp;and&nbsp;the&nbsp;database&nbsp;handle.
              <br />
              CleanupStack::PopAndDestroy(&nbsp;iter&nbsp;);
              <br />
              CleanupStack::PopAndDestroy(&nbsp;db&nbsp;);
             </code>
            </pre>
            <p>
             The client can also edit the attributes of a landmark in the database.
In order to save changes permanently in database the
             <code class="ApiItem">
              CPosLandmarkDatabase::UpdateLandmarkL
             </code>
             method
needs to be used.
            </p>
            <p>
             The following example shows how to change the name of a landmark (
             <code class="ApiItem">
              aDatabase
             </code>
             is
an open
             <code class="ApiItem">
              CPosLandmarkDatabase
             </code>
             handle).
            </p>
            <pre>
             <code class="cpp">
              void&nbsp;RenameLandmarkL(&nbsp;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;CPosLandmarkDatabase&amp;&nbsp;aDatabase,
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;TPosLmItemId&nbsp;aLandmarkId,
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;TDesC&amp;&nbsp;aNewName&nbsp;)
              <br />
              {
              <br />
              //&nbsp;Read&nbsp;the&nbsp;landmark&nbsp;from&nbsp;the&nbsp;database.&nbsp;
              <br />
              CPosLandmark*&nbsp;lm&nbsp;=&nbsp;aDatabase.ReadLandmarkLC(&nbsp;aLandmarkId&nbsp;);
              <br />
              <br />
              //&nbsp;Set&nbsp;the&nbsp;new&nbsp;name&nbsp;and&nbsp;update&nbsp;the&nbsp;database
              <br />
              lm-&gt;SetLandmarkNameL(&nbsp;aNewName&nbsp;);
              <br />
              aDatabase.UpdateLandmarkL(&nbsp;*lm&nbsp;);
              <br />
              <br />
              CleanupStack::PopAndDestroy(&nbsp;lm&nbsp;);
              <br />
              }
             </code>
            </pre>
            <p>
             The following example shows how a landmark is added to a landmark database
(
             <code class="ApiItem">
              aDatabase
             </code>
             is an open
             <code class="ApiItem">
              CPosLandmarkDatabase
             </code>
             pointer).
            </p>
            <pre>
             <code class="cpp">
              _LIT(&nbsp;KName,&nbsp;&quot;My&nbsp;Thai&quot;&nbsp;);
              <br />
              _LIT(&nbsp;KDescription,&nbsp;&quot;Best&nbsp;Thai&nbsp;restaurant&nbsp;ever.&nbsp;Spicy&nbsp;food.&quot;&nbsp;);
              <br />
              <br />
              TLocality&nbsp;pos;
              <br />
              pos.SetCoordinate(&nbsp;61.1120,&nbsp;23.4231&nbsp;);
              <br />
              <br />
              //&nbsp;Create&nbsp;the&nbsp;landmark&nbsp;object&nbsp;and&nbsp;set&nbsp;available&nbsp;information.
              <br />
              CPosLandmark*&nbsp;lm&nbsp;=&nbsp;CPosLandmark::NewLC();
              <br />
              lm-&gt;SetLandmarkNameL(&nbsp;KName&nbsp;);
              <br />
              lm-&gt;SetLandmarkDescriptionL(&nbsp;KDescription&nbsp;);
              <br />
              lm-&gt;SetPositionL(&nbsp;pos&nbsp;);
              <br />
              <br />
              //&nbsp;Add&nbsp;the&nbsp;landmark&nbsp;to&nbsp;the&nbsp;database.
              <br />
              aDatabase-&gt;AddLandmarkL(*lm);
              <br />
              <br />
              CleanupStack::PopAndDestroy(lm);
             </code>
            </pre>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicReadPartial">
             </a>
             <h3>
              Reading partial landmarks
             </h3>
             <p>
              Landmark data could be spread among different tables in the landmark database.
When landmark is read from database, all those tables need to be accessed.
However, in many cases when many landmarks are read (e.g. for landmark list)
applications need only partial information for every landmark. In this case
amount of tables accessed and data transferred during reading can be reduced
(thus improving performance) by using &quot;partial read&quot; mechanism of Landmarks
API. Following diagram shows basic steps of partial read.
              <div class="Figure">
               <p class="Image">
                <a name="Partial read sequence diagram">
                 <img src="images/Landmarks_API_ReadPartial_Sequence.png" alt="Partial read sequence diagram" border="0" />
                </a>
               </p>
               <br clear="all" />
               <p class="Caption">
                Partial read sequence diagram
               </p>
              </div>
             </p>
             <p>
              The following example shows how the client can efficiently read just the
names of all the landmarks using partial read.
              <code class="ApiItem">
               aDatabase
              </code>
              is
an open
              <code class="ApiItem">
               CPosLandmarkDatabase
              </code>
              handle. For simplicity the
incremental operation is executed in one batch in this example.
             </p>
             <pre>
              <code class="cpp">
               CArrayPtr&lt;CPosLandmark&gt;*&nbsp;ReadLandmarkNamesOnlyLC(&nbsp;CPosLandmarkDatabase&amp;&nbsp;aDatabase&nbsp;)
               <br />
               {
               <br />
               //&nbsp;Retrieve&nbsp;IDs&nbsp;for&nbsp;all&nbsp;landmarks&nbsp;in&nbsp;the&nbsp;database.
               <br />
               RArray&lt;TPosLmItemId&gt;&nbsp;landmarkIds;
               <br />
               CleanupClosePushL(&nbsp;landmarkIds&nbsp;);
               <br />
               CPosLmItemIterator*&nbsp;iter&nbsp;=&nbsp;aDatabase-&gt;LandmarkIteratorL();
               <br />
               CleanupStack::PushL(&nbsp;iter&nbsp;);
               <br />
               iter-&gt;GetItemIdsL(&nbsp;landmarkIds,&nbsp;0,&nbsp;iter-&gt;NumOfItemsL()&nbsp;);
               <br />
               CleanupStack::PopAndDestroy(iter);
               <br />
               <br />
               //&nbsp;Set&nbsp;partial&nbsp;parameters&nbsp;so&nbsp;that&nbsp;only&nbsp;the&nbsp;landmark&nbsp;name&nbsp;will&nbsp;be&nbsp;retrieved.
               <br />
               CPosLmPartialReadParameters*&nbsp;part&nbsp;=&nbsp;CPosLmPartialReadParameters::NewLC();
               <br />
               part-&gt;SetRequestedAttributes(&nbsp;CPosLandmark::ELandmarkName&nbsp;);
               <br />
               aDatabase-&gt;SetPartialReadParametersL(&nbsp;*part&nbsp;);
               <br />
               CleanupStack::PopAndDestroy(&nbsp;part&nbsp;);
               <br />
               <br />
               //&nbsp;Start&nbsp;collecting&nbsp;the&nbsp;partial&nbsp;landmark&nbsp;data.&nbsp;Note&nbsp;that
               <br />
               //&nbsp;this&nbsp;will&nbsp;be&nbsp;quicker&nbsp;than&nbsp;reading&nbsp;full&nbsp;landmarks.
               <br />
               CPosLmOperation*&nbsp;op&nbsp;=&nbsp;aDatabase-&gt;PreparePartialLandmarksL(&nbsp;landmarkIds&nbsp;);
               <br />
               CleanupStack::PushL(&nbsp;op&nbsp;);
               <br />
               op-&gt;ExecuteL();
               <br />
               <br />
               //&nbsp;The&nbsp;landmark&nbsp;objects&nbsp;can&nbsp;be&nbsp;retrieved&nbsp;from&nbsp;the&nbsp;operation&nbsp;object.&nbsp;These
               <br />
               //&nbsp;landmark&nbsp;objects&nbsp;now&nbsp;contain&nbsp;only&nbsp;the&nbsp;names&nbsp;of&nbsp;the&nbsp;landmarks&nbsp;so
               <br />
               //&nbsp;the&nbsp;heap&nbsp;is&nbsp;used&nbsp;efficiently.
               <br />
               CArrayPtr&lt;CPosLandmark&gt;*&nbsp;lmData&nbsp;=&nbsp;aDatabase-&gt;TakePreparedPartialLandmarksL(&nbsp;op&nbsp;);
               <br />
               CleanupStack::PopAndDestroy(op);
               <br />
               CleanupStack::PopAndDestroy(&nbsp;&amp;landmarkIds&nbsp;);
               <br />
               <br />
               CleanupStack::PushL(&nbsp;lmData&nbsp;);&nbsp;//&nbsp;there&nbsp;is&nbsp;a&nbsp;slot&nbsp;for&nbsp;it&nbsp;freed&nbsp;by&nbsp;previous&nbsp;Pop
               <br />
               return&nbsp;lmData;
               <br />
               }
              </code>
             </pre>
             <div class="RelatedItems">
              Related APIs
             </div>
             <ul>
              <li>
               <code class="ApiItem">
                CPosLandmarkDatabase
               </code>
              </li>
              <li>
               <code class="ApiItem">
                aDatabase
               </code>
              </li>
             </ul>
            </div>
            <div class="RelatedItems">
             Related APIs
            </div>
            <ul>
             <li>
              <code class="ApiItem">
               CPosLandmark
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLandmarkDatabase
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLandmarkDatabase::UpdateLandmarkL
              </code>
             </li>
             <li>
              <code class="ApiItem">
               aDatabase
              </code>
             </li>
            </ul>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopicAccessCats">
            </a>
            <h2>
             Managing categories
            </h2>
            <p>
             To access categories in a landmark database, the classes described in section
             <strong class="unresolvedXref">
              Category
management
             </strong>
             are used. The client must first have a handle to a landmark
database (
             <code class="ApiItem">
              CPosLandmarkDatabase
             </code>
             ). This handle is passed
to
             <code class="ApiItem">
              CPosLmCategoryManager::NewL()
             </code>
             to create a category
manager. After this, the client can read and edit category content in the
database. Category properties are maintained by
             <code class="ApiItem">
              CPosLandmarkCategory
             </code>
             class.
            </p>
            <p>
             The following example shows how to read all landmark categories in a database
and retrieve their names. aDb is an open database handle.
            </p>
            <pre>
             <code class="cpp">
              void&nbsp;ReadAllCategoriesInDatabase(&nbsp;CPosLandmarkDatabase&amp;&nbsp;aDb&nbsp;)
              <br />
              {
              <br />
              //&nbsp;Create&nbsp;the&nbsp;category&nbsp;manager
              <br />
              CPosLmCategoryManager*&nbsp;categoryManager&nbsp;=&nbsp;CPosLmCategoryManager::NewL(&nbsp;aDb&nbsp;);
              <br />
              CleanupStack::PushL(&nbsp;categoryManager&nbsp;);
              <br />
              <br />
              //&nbsp;Create&nbsp;an&nbsp;iterator&nbsp;for&nbsp;iterating&nbsp;the&nbsp;landmarks&nbsp;in&nbsp;the&nbsp;database
              <br />
              CPosLmItemIterator*&nbsp;iter&nbsp;=&nbsp;categoryManager-&gt;CategoryIteratorL();
              <br />
              CleanupStack::PushL(&nbsp;iter&nbsp;);
              <br />
              <br />
              //&nbsp;Read&nbsp;each&nbsp;category&nbsp;in&nbsp;the&nbsp;database&nbsp;and&nbsp;do&nbsp;something.
              <br />
              TPosLmItemId&nbsp;catID;
              <br />
              while&nbsp;(&nbsp;(&nbsp;catID&nbsp;=&nbsp;iter-&gt;NextL()&nbsp;)&nbsp;!=&nbsp;KPosLmNullItemId&nbsp;)
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;CPosLandmarkCategory*&nbsp;cat&nbsp;=&nbsp;categoryManager-&gt;ReadCategoryLC(&nbsp;catID&nbsp;);
              <br />
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;do&nbsp;something&nbsp;with&nbsp;the&nbsp;category&nbsp;information
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;TPtrC&nbsp;catName;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;cat-&gt;GetCategoryName(&nbsp;catName&nbsp;);
              <br />
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;if&nbsp;any&nbsp;changes&nbsp;made,&nbsp;following&nbsp;code&nbsp;saves&nbsp;them&nbsp;to&nbsp;database
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;categoryManager-&gt;UpdateCategoryL(&nbsp;*cat&nbsp;);
              <br />
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;CleanupStack::PopAndDestroy(&nbsp;cat&nbsp;);
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              <br />
              //&nbsp;Close&nbsp;the&nbsp;iterator&nbsp;and&nbsp;the&nbsp;category&nbsp;manager.
              <br />
              CleanupStack::PopAndDestroy(&nbsp;iter&nbsp;);
              <br />
              CleanupStack::PopAndDestroy(&nbsp;categoryManager&nbsp;);
              <br />
              }
             </code>
            </pre>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicAddNewCat">
             </a>
             <h3>
              Creating local category
             </h3>
             <p>
              The following example shows how the client can create a new category and
add it to database.
             </p>
             <pre>
              <code class="cpp">
               //&nbsp;Create&nbsp;a&nbsp;local&nbsp;category&nbsp;object
               <br />
               CPosLandmarkCategory*&nbsp;category&nbsp;=&nbsp;CPosLandmarkCategory::NewLC();
               <br />
               _LIT(&nbsp;KRestaurant,&nbsp;&quot;Restaurant&quot;&nbsp;);
               <br />
               category-&gt;SetCategoryNameL(&nbsp;KRestaurant&nbsp;);
               <br />
               <br />
               //&nbsp;Add&nbsp;it&nbsp;to&nbsp;database
               <br />
               TPosLmItemId&nbsp;categoryId&nbsp;=&nbsp;aCategoryManager-&gt;AddCategoryL(&nbsp;*category&nbsp;);
               <br />
               CleanupStack::PopAndDestroy(&nbsp;category&nbsp;);
              </code>
             </pre>
            </div>
            <div class="RelatedItems">
             Related APIs
            </div>
            <ul>
             <li>
              <code class="ApiItem">
               CPosLandmarkCategory
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLandmarkDatabase
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLmCategoryManager::NewL()
              </code>
             </li>
            </ul>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopicAddCatToLm">
            </a>
            <h2>
             Assigning categories to landmarks
            </h2>
            <p>
             There is a &quot;many-to-many&quot; relationship between landmarks and landmarks
categories: landmark can be assigned to zero or more categories and one category
may be assigned to zero or more landmarks.
            </p>
            <p>
             The following example shows how the client can add a category to a landmark.
            </p>
            <pre>
             <code class="cpp">
              void&nbsp;AddCategoryToLandmarkL(
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;CPosLandmarkDatabase&amp;&nbsp;aDatabase,
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;TPosLmItemId&nbsp;aLandmarkId,
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;TPosLmItemId&nbsp;aCategoryId&nbsp;)
              <br />
              {
              <br />
              //&nbsp;Find&nbsp;landmark&nbsp;in&nbsp;database
              <br />
              CPosLandmark*&nbsp;landmark&nbsp;=&nbsp;aDatabase.ReadLandmarkLC(&nbsp;aLandmarkId&nbsp;);
              <br />
              //&nbsp;Add&nbsp;category.&nbsp;If&nbsp;it&nbsp;is&nbsp;already&nbsp;added,&nbsp;nothing&nbsp;happens
              <br />
              landmark-&gt;AddCategoryL(&nbsp;aCategoryId&nbsp;);
              <br />
              //&nbsp;Save&nbsp;to&nbsp;database
              <br />
              aDatabase.UpdateLandmarkL(&nbsp;*landmark&nbsp;);
              <br />
              //&nbsp;Cleanup
              <br />
              CleanupStack::PopAndDestroy(&nbsp;landmark&nbsp;);
              <br />
              }
             </code>
            </pre>
            <p>
             The following code example shows how the client can add a category to multiple
landmarks. A global category is assigned to a set of landmarks in this example.
            </p>
            <pre>
             <code class="cpp">
              void&nbsp;AddLandmarksToGlobalCategoryL(
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;CPosLandmarkDatabase&amp;&nbsp;aDatabase,
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;RPointerArray&lt;TPosLmItemId&gt;&amp;&nbsp;aLandmarkIds,
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;TPosLmGlobalCategory&nbsp;aGlobalCategoryID&nbsp;)
              <br />
              {
              <br />
              CPosLmCategoryManager*&nbsp;categoryManager&nbsp;=&nbsp;CPosLmCategoryManager::NewL(&nbsp;aDatabase&nbsp;);
              <br />
              CleanupStack::PushL(&nbsp;categoryManager&nbsp;);
              <br />
              <br />
              //&nbsp;Find&nbsp;ID&nbsp;of&nbsp;the&nbsp;given&nbsp;global&nbsp;category&nbsp;in&nbsp;given&nbsp;database
              <br />
              TPosLmItemId&nbsp;categoryId&nbsp;=&nbsp;categoryManager-&gt;GetGlobalCategory(&nbsp;aGlobalCategoryID&nbsp;);
              <br />
              <br />
              //&nbsp;Add&nbsp;given&nbsp;landmarks&nbsp;to&nbsp;this&nbsp;category
              <br />
              ExecuteAndDeleteLD(
              <br />
              &nbsp;categoryManager-&gt;AddCategoryToLandmarksL(&nbsp;categoryId,&nbsp;aLandmarkIds&nbsp;)&nbsp;);
              <br />
              <br />
              CleanupStack::PopAndDestroy(&nbsp;categoryManager&nbsp;);
              <br />
              }
             </code>
            </pre>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopicListenEvents">
            </a>
            <h2>
             Listening to database events
            </h2>
            <p>
             To listen to changes in a landmark database, the classes described in
             <strong class="unresolvedXref">
              Database events
             </strong>
             are
used. The following sequence shows how a client can listen to database events.
            </p>
            <p>
             <ul>
              <li>
               <p>
                The client has a handle to a landmark database; that is, a
                <code class="ApiItem">
                 CPosLandmarkDatabase
                </code>
                instance.
               </p>
              </li>
              <li>
               <p>
                The client calls
                <code class="ApiItem">
                 CPosLandmarkDatabase::NotifyDatabaseEvent()
                </code>
                ,
which takes a
                <code class="ApiItem">
                 TPosLmEvent
                </code>
                object and
                <code class="ApiItem">
                 TRequestStatus
                </code>
                .
               </p>
              </li>
              <li>
               <p>
                <code class="ApiItem">
                 TRequestStatus
                </code>
                is completed when there is an event.
Information about the event is found in the
                <code class="ApiItem">
                 TPosLmEvent
                </code>
                object
supplied by the client.
               </p>
              </li>
              <li>
               <p>
                When the event is handled, the client renews the
                <code class="ApiItem">
                 NotifyDatabaseEvent()
                </code>
                request
to listen to the next event.
               </p>
              </li>
              <li>
               <p>
                When the client does not want to listen to events any more, it stops calling
                <code class="ApiItem">
                 NotifyDatabaseEvent()
                </code>
                .
If the client has an outstanding request to
                <code class="ApiItem">
                 NotifyDatabaseEvent()
                </code>
                ,
it can cancel the request by calling
                <code class="ApiItem">
                 NotifyDatabaseEvent()
                </code>
                .
               </p>
              </li>
             </ul>
             The
             <code class="ApiItem">
              TPosLmEvent
             </code>
             object consists of an event type and
an item ID. The event type specifies what has happened and in some events
the item ID specifies a database item involved in the event (for example,
the ID of a newly added landmark).
            </p>
            <p>
             The following table lists defined events:
            </p>
            <p>
             <em>
              Landmark database events
             </em>
            </p>
            <table class="TableWrap" border="1" cellpadding="1" cellspacing="0">
             <tr valign="top">
              <th>
              </th>
              <th>
               Unknown change event. Something has been changed in the database but
no further details are given. All content, which is of interest for the client,
should be read again from the database. This event may be received if there
are big changes in the database.
              </th>
              <th>
              </th>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                <code class="ApiItem">
                 EPosLmEventNewDefaultDatabaseLocation
                </code>
               </p>
              </td>
              <td class="Cell">
               <p>
                This event is received if the default landmark database location is
changed. The client has to open a new
                <code class="ApiItem">
                 CPosLandmarkDatabase
                </code>
                handle
to access the default database from the new location.
               </p>
              </td>
              <td class="Cell">
               <p>
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                <code class="ApiItem">
                 EPosLmEventMediaRemoved
                </code>
               </p>
              </td>
              <td class="Cell">
               <p>
                This event is received if the media where the database is stored is
removed. After this, the database cannot be accessed. If the media is inserted
again, the database must still be reopened by the client.
               </p>
              </td>
              <td class="Cell">
               <p>
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                <code class="ApiItem">
                 EPosLmEventLandmarkUnknownChanges
                </code>
               </p>
              </td>
              <td class="Cell">
               <p>
                Unknown change event concerns only landmarks. This is analogous to
                <code class="ApiItem">
                 EPosLmEventUnknownChanges
                </code>
                but
it is known that only landmark data has been modified.
               </p>
              </td>
              <td class="Cell">
               <p>
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                <code class="ApiItem">
                 EPosLmEventLandmarkCreated
                </code>
               </p>
              </td>
              <td class="Cell">
               <p>
                A new landmark has been created in the database.
               </p>
              </td>
              <td class="Cell">
               <p>
                The ID of the new landmark.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                <code class="ApiItem">
                 EPosLmEventLandmarkDeleted
                </code>
               </p>
              </td>
              <td class="Cell">
               <p>
                A landmark has been deleted from the database.
               </p>
              </td>
              <td class="Cell">
               <p>
                The ID of the deleted landmark.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                <code class="ApiItem">
                 EPosLmEventLandmarkUpdated
                </code>
               </p>
              </td>
              <td class="Cell">
               <p>
                A landmark in the database has been updated.
               </p>
              </td>
              <td class="Cell">
               <p>
                The ID of the updated landmark.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                <code class="ApiItem">
                 EPosLmEventCategoryUnknownChanges
                </code>
               </p>
              </td>
              <td class="Cell">
               <p>
                Unknown change event concerning only landmark categories. This is analogous
to
                <code class="ApiItem">
                 EPosLmEventUnknownChanges
                </code>
                but it is known that only landmark
category data has been modified.
               </p>
              </td>
              <td class="Cell">
               <p>
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                <code class="ApiItem">
                 EPosLmEventCategoryCreated
                </code>
               </p>
              </td>
              <td class="Cell">
               <p>
                A new landmark category has been created in the database.
               </p>
              </td>
              <td class="Cell">
               <p>
                The ID of the new landmark category.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                <code class="ApiItem">
                 EPosLmEventCategoryDeleted
                </code>
               </p>
              </td>
              <td class="Cell">
               <p>
                A landmark category has been deleted from the database.
                <b>
                 Note:
                </b>
                No
events relating to landmarks are sent even if the deleted category was assigned
to some landmarks.
               </p>
              </td>
              <td class="Cell">
               <p>
                The ID of the deleted landmark category.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                <code class="ApiItem">
                 EPosLmEventCategoryUpdated
                </code>
               </p>
              </td>
              <td class="Cell">
               <p>
                A landmark category in the database has been updated.
               </p>
              </td>
              <td class="Cell">
               <p>
                The ID of the updated landmark category.
               </p>
              </td>
             </tr>
            </table>
            <p>
             The following code example shows how to implement a class, which listens
to changes in a landmark database. The following code section shows how the
class is defined.
            </p>
            <pre>
             <code class="cpp">
              class&nbsp;CLandmarkEventListener&nbsp;:&nbsp;public&nbsp;CActive
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;public:&nbsp;//&nbsp;constructor&nbsp;and&nbsp;destructor
              <br />
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;CLandmarkEventListener*&nbsp;NewL(&nbsp;CPosLandmarkDatabase*&nbsp;aDatabase&nbsp;);
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;virtual&nbsp;~CLandmarkEventListener();
              <br />
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;public:&nbsp;//&nbsp;From&nbsp;CActive
              <br />
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;RunL();
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;DoCancel();
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TInt&nbsp;RunError(&nbsp;TInt&nbsp;aError&nbsp;);
              <br />
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;private:
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CLandmarkEventListener(&nbsp;CPosLandmarkDatabase*&nbsp;aDatabase&nbsp;);
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;ConstructL();
              <br />
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;private:
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CPosLandmarkDatabase*&nbsp;iDatabase;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TPosLmEvent&nbsp;iEvent;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;};
             </code>
            </pre>
            <p>
             The following code section shows the source code for
             <code class="ApiItem">
              CLandmarkEventListener
             </code>
             .
            </p>
            <pre>
             <code class="cpp">
              CLandmarkEventListener::CLandmarkEventListener(&nbsp;CPosLandmarkDatabase*&nbsp;aDatabase&nbsp;)
              <br />
              :&nbsp;CActive(&nbsp;EPriorityStandard&nbsp;),&nbsp;iDatabase(&nbsp;aDatabase&nbsp;)
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              <br />
              void&nbsp;CLandmarkEventListener::ConstructL()
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Start&nbsp;listening&nbsp;for&nbsp;events.
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;iDatabase-&gt;NotifyDatabaseEvent(&nbsp;iEvent,&nbsp;iStatus&nbsp;);
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;SetActive();
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              <br />
              CLandmarkEventListener*&nbsp;CLandmarkEventListener::NewL(
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;CPosLandmarkDatabase*&nbsp;aDatabase)
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;CLandmarkEventListener*&nbsp;self&nbsp;=
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;(ELeave)&nbsp;CLandmarkEventListener(&nbsp;aDatabase&nbsp;);
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;CleanupStack::PushL(&nbsp;self&nbsp;);
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;self-&gt;ConstructL();
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;CleanupStack::Pop(&nbsp;self&nbsp;);
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              <br />
              CLandmarkEventListener::~CLandmarkEventListener()
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Cancel&nbsp;any&nbsp;outstanding&nbsp;event&nbsp;request.
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;Cancel();
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              <br />
              void&nbsp;CLandmarkEventListener::RunL()
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;iStatus&nbsp;!=&nbsp;KErrNone&nbsp;)
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Unexpected&nbsp;error.&nbsp;This&nbsp;should&nbsp;be&nbsp;handled&nbsp;in&nbsp;some&nbsp;way,&nbsp;e.g.
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;shut&nbsp;down&nbsp;application,&nbsp;try&nbsp;to&nbsp;listen&nbsp;again,&nbsp;notify&nbsp;user,&nbsp;etc.
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(&nbsp;iEvent.iEventType&nbsp;)
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EPosLmEventLandmarkCreated&nbsp;:
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TPosLmItemId&nbsp;newLandmarkId&nbsp;=&nbsp;iEvent.iLandmarkItemId;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Read&nbsp;new&nbsp;landmark&nbsp;from&nbsp;database&nbsp;and&nbsp;add&nbsp;it&nbsp;to&nbsp;UI.
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EPosLmEventLandmarkDeleted&nbsp;:
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TPosLmItemId&nbsp;deletedLandmarkId&nbsp;=&nbsp;iEvent.iLandmarkItemId;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Remove&nbsp;the&nbsp;landmark&nbsp;from&nbsp;the&nbsp;UI.
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Resume&nbsp;event&nbsp;listening
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;iDatabase-&gt;NotifyDatabaseEvent(&nbsp;iEvent,&nbsp;iStatus&nbsp;);
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;SetActive();
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              <br />
              void&nbsp;CLandmarkEventListener::DoCancel()
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;iDatabase-&gt;CancelNotifyDatabaseEvent();
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              <br />
              TInt&nbsp;CLandmarkEventListener::RunError(&nbsp;TInt&nbsp;/*aError*/&nbsp;)
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;process&nbsp;leaves&nbsp;from&nbsp;RunL,&nbsp;if&nbsp;any
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;KErrNone;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;}
             </code>
            </pre>
            <div class="RelatedItems">
             Related APIs
            </div>
            <ul>
             <li>
              <code class="ApiItem">
               CLandmarkEventListener
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLandmarkDatabase
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLandmarkDatabase::NotifyDatabaseEvent()
              </code>
             </li>
             <li>
              <code class="ApiItem">
               EPosLmEventCategoryCreated
              </code>
             </li>
             <li>
              <code class="ApiItem">
               EPosLmEventCategoryDeleted
              </code>
             </li>
             <li>
              <code class="ApiItem">
               EPosLmEventCategoryUnknownChanges
              </code>
             </li>
             <li>
              <code class="ApiItem">
               EPosLmEventCategoryUpdated
              </code>
             </li>
             <li>
              <code class="ApiItem">
               EPosLmEventLandmarkCreated
              </code>
             </li>
             <li>
              <code class="ApiItem">
               EPosLmEventLandmarkDeleted
              </code>
             </li>
             <li>
              <code class="ApiItem">
               EPosLmEventLandmarkUnknownChanges
              </code>
             </li>
             <li>
              <code class="ApiItem">
               EPosLmEventLandmarkUpdated
              </code>
             </li>
             <li>
              <code class="ApiItem">
               EPosLmEventMediaRemoved
              </code>
             </li>
             <li>
              <code class="ApiItem">
               EPosLmEventNewDefaultDatabaseLocation
              </code>
             </li>
             <li>
              <code class="ApiItem">
               EPosLmEventUnknownChanges
              </code>
             </li>
             <li>
              <code class="ApiItem">
               NotifyDatabaseEvent()
              </code>
             </li>
             <li>
              <code class="ApiItem">
               TPosLmEvent
              </code>
             </li>
             <li>
              <code class="ApiItem">
               TRequestStatus
              </code>
             </li>
            </ul>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopicExchange">
            </a>
            <h2>
             Exchanging landmarks
            </h2>
            <p>
             A client can exchange landmark data with another party by using the import
and export functionality. Two classes,
             <code class="ApiItem">
              CPosLandmarkEncoder
             </code>
             and
             <code class="ApiItem">
              CPosLandmarkParser
             </code>
             are
used to convert landmark data to exchange format and from. The exchange format
is defined by specifying its MIME type. The recommended format is &quot;application/vnd.nokia.landmarkcollection+xml&quot;.
The parser classes also support GPX format, which is identified
by MIME type, &quot;application/gps+xml&quot;.
            </p>
            <p>
             KML/KMZ format parsing supported. KML format is identified
by MIME &quot;application/vnd.google-earth.kml+xml &quot; and KMZ formate is identified
by MIME &quot;application/vnd.google-earth.kmz &quot;
            </p>
            <p>
             Encoding and Parsing of an URL is also supported.The mime
type to be specified here ,while creating an instance of the
             <code class="ApiItem">
              CPosLandmarkEncoder
             </code>
             and
             <code class="ApiItem">
              CPosLandmarkParser
             </code>
             class
is the hostname of the URL to be parsed.For eg: If the URL to be parsed is
&quot;http://www.maps.ovi.com/? la = 23.45 &amp; lo = 45.65 &quot; then the mime type
to be passed will be &quot; maps.ovi.com&quot; . Currently there is support only for
this hostname.
            </p>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicExport">
             </a>
             <h3>
              Exporting landmarks
             </h3>
             <p>
              To export a set of landmarks, the client must first create a
              <code class="ApiItem">
               CPosLandmarkEncoder
              </code>
              object
for the landmark content format in which the landmarks should be encoded.
The client can add some information of the landmark collection in the encoder
as well.
             </p>
             <p>
              The client must also provide a list of the landmarks to be exported. If
some of the landmarks are not found in the database, the export operation
fails with the error code
              <code class="ApiItem">
               KErrNotFound
              </code>
              . The client does not
have to add any landmarks to the encoder object. The export operation will
add the ones specified in the ID array. The method returns an operation object,
which can be run in incremental mode (see
              <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicIncrementalExecution" title="Some operations in Landmarks API can take a long time to complete. It is recommended to run them incrementally. The client can use an active object to run the incremental operations in the background so that other tasks can be handled in the meantime, in particular handling UI events. To use an incremental operation in Landmarks API, the classes described in the Incremental operations section are used.">
               Executing incremental operations
              </a>
              ). If it is run incrementally, the client can
supervise the progress of the operation.
             </p>
             <p>
              If the
              <code class="ApiItem">
               CPosLmOperation
              </code>
              object is deleted before the
operation is complete, it is possible that only a subset of the landmarks
is exported. The client takes ownership of the returned operation object.
When all the landmarks have been exported, the client must finalize the encoding
by calling
              <code class="ApiItem">
               CPosLandmarkEncoder::FinalizeEncodingL()
              </code>
              .
             </p>
             <p>
              The sequence diagram below describes basic steps a client does to export
landmarks from a database to a file.
             </p>
             <p>
              <div class="Figure">
               <p class="Image">
                <a name="Exporting landmarks sequence diagram">
                 <img src="images/Landmarks_API_Export_Sequence.png" alt="Exporting landmarks sequence diagram" border="0" />
                </a>
               </p>
               <br clear="all" />
               <p class="Caption">
                Exporting landmarks sequence diagram
               </p>
              </div>
             </p>
             <p>
              The following example shows how the client can export landmarks to a file
using the
              <code class="ApiItem">
               CPosLandmarkDatabase::ExportLandmarksL()
              </code>
              method.
aDatabase is an open
              <code class="ApiItem">
               CPosLandmarkDatabase
              </code>
              handle. In this
example incremental operations are executed synchronously.
             </p>
             <pre>
              <code class="cpp">
               void&nbsp;ExportSelectedLandmarksL(&nbsp;
               <br />
               &nbsp;&nbsp;&nbsp;&nbsp;CPosLandmarkDatabase&amp;&nbsp;aDatabase,
               <br />
               &nbsp;&nbsp;&nbsp;&nbsp;RArray&lt;TPosLmItemId&gt;&amp;&nbsp;aSelectedLandmarks)
               <br />
               {
               <br />
               _LIT(&nbsp;KExportFilePath,&nbsp;&quot;c:\\eposLmExport.lmx&quot;&nbsp;);
               <br />
               //&nbsp;Mime&nbsp;type&nbsp;of&nbsp;landmarks&nbsp;exchange&nbsp;format
               <br />
               _LIT8(&nbsp;KPosMimeTypeLandmarkCollectionXml,&nbsp;
               <br />
               &nbsp;&quot;application/vnd.nokia.landmarkcollection+xml&quot;&nbsp;);
               <br />
               <br />
               //&nbsp;Create&nbsp;the&nbsp;encoder&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;exporting&nbsp;landmarks
               <br />
               CPosLandmarkEncoder*&nbsp;encoder&nbsp;=&nbsp;
               <br />
               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CPosLandmarkEncoder::NewL(&nbsp;KPosMimeTypeLandmarkCollectionXml&nbsp;);
               <br />
               CleanupStack::PushL(&nbsp;encoder&nbsp;);
               <br />
               <br />
               //&nbsp;Point&nbsp;out&nbsp;the&nbsp;file&nbsp;to&nbsp;export&nbsp;landmark&nbsp;data&nbsp;to
               <br />
               encoder-&gt;SetOutputFileL(&nbsp;KExportFilePath&nbsp;);
               <br />
               <br />
               //&nbsp;Execute&nbsp;the&nbsp;operation&nbsp;in&nbsp;one&nbsp;batch
               <br />
               //&nbsp;Note:&nbsp;There&nbsp;must&nbsp;be&nbsp;landmarks&nbsp;for&nbsp;specified&nbsp;IDs&nbsp;in&nbsp;the&nbsp;database,
               <br />
               //&nbsp;otherwise&nbsp;operation&nbsp;will&nbsp;fail&nbsp;with&nbsp;KErrNotFound&nbsp;leave&nbsp;code
               <br />
               ExecuteAndDeleteLD(&nbsp;aDatabase-&gt;ExportLandmarksL(&nbsp;
               <br />
               &nbsp;*encoder,&nbsp;aSelectedLandmarks,&nbsp;CPosLandmarkDatabase::EIncludeCategories&nbsp;)&nbsp;);
               <br />
               <br />
               //&nbsp;Finalize&nbsp;encoding&nbsp;to&nbsp;complete&nbsp;export
               <br />
               ExecuteAndDeleteLD(&nbsp;encoder-&gt;FinalizeEncodingL()&nbsp;);
               <br />
               CleanupStack::PopAndDestroy(&nbsp;encoder&nbsp;);
               <br />
               }
              </code>
             </pre>
             <div class="RelatedItems">
              Related APIs
             </div>
             <ul>
              <li>
               <code class="ApiItem">
                CPosLandmarkDatabase
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLandmarkDatabase::ExportLandmarksL()
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLandmarkEncoder
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLandmarkEncoder::FinalizeEncodingL()
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLmOperation
               </code>
              </li>
              <li>
               <code class="ApiItem">
                KErrNotFound
               </code>
              </li>
             </ul>
            </div>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicImport">
             </a>
             <h3>
              Importing landmarks
             </h3>
             <p>
              To import landmark content, the client must first create a parser object
of class
              <code class="ApiItem">
               CPosLandmarkParser
              </code>
              , which can parse the landmark
content. The client does not have to call
              <code class="ApiItem">
               CPosLandmarkParser::ParseContentL()
              </code>
              first.
If the content is not already parsed, this will be handled by the import operation.
             </p>
             <p>
              There are two different
              <code class="ApiItem">
               CPosLandmarkDatabase::ImportLandmarksL()
              </code>
              overloads
defined that can be used to import landmark data. In one of them, the client
can pass an array defining a subset of the landmarks in the parser object.
This way the client can select to import only a part of the landmark content.
The other method does not take any parameters and imports all landmarks. Both
the import methods return an operation object, which can be run in incremental
mode (see
              <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicIncrementalExecution" title="Some operations in Landmarks API can take a long time to complete. It is recommended to run them incrementally. The client can use an active object to run the incremental operations in the background so that other tasks can be handled in the meantime, in particular handling UI events. To use an incremental operation in Landmarks API, the classes described in the Incremental operations section are used.">
               Executing incremental operations
              </a>
              ). If it is run incrementally, the client can
supervise the progress of the operation.
             </p>
             <p>
              If the
              <code class="ApiItem">
               CPosLmOperation
              </code>
              object is deleted before the
operation is complete, it is possible that only a subset of the landmarks
is imported. The client takes ownership of the returned operation object.
After completion,
              <code class="ApiItem">
               CPosLandmarkDatabase::ImportedLandmarksIteratorL()
              </code>
              can
be called to retrieve the IDs of the added landmarks. If the database is read-only,
this operation will complete with the error code
              <code class="ApiItem">
               KErrAccessDenied
              </code>
              .
If the client specifies invalid transfer option values, this operation will
panic.
             </p>
             <p>
              <b>
               Note:
              </b>
              The
              <code class="ApiItem">
               CPosLmOperation::NextStep()
              </code>
              method
cannot be executed synchronously using
              <code class="ApiItem">
               User::WaitForRequest()
              </code>
              for
the import operations. Doing so may cause the operation to hang.
              <code class="ApiItem">
               CPosLmOperation::NextStep()
              </code>
              must
be executed using an active object.
             </p>
             <p>
              The diagram below describes general steps, which client does when imports
landmarks from a file.
             </p>
             <p>
              <div class="Figure">
               <p class="Image">
                <a name="Importing landmarks sequence diagram">
                 <img src="images/Landmarks_API_Import_Sequence.png" alt="Importing landmarks sequence diagram" border="0" />
                </a>
               </p>
               <br clear="all" />
               <p class="Caption">
                Importing landmarks sequence diagram
               </p>
              </div>
             </p>
             <p>
              The following example shows how the client can import landmarks from file
using the
              <code class="ApiItem">
               CPosLandmarkDatabase::ImportLandmarksL()
              </code>
              method.
aDatabase is an open
              <code class="ApiItem">
               CPosLandmarkDatabase
              </code>
              handle.
             </p>
             <pre>
              <code class="cpp">
               void&nbsp;ImportLandmarksL(&nbsp;
               <br />
               &nbsp;&nbsp;&nbsp;&nbsp;CPosLandmarkDatabase&amp;&nbsp;aDatabase,
               <br />
               &nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;TDesC&amp;&nbsp;aImportFilePath&nbsp;)
               <br />
               {
               <br />
               //&nbsp;Mime&nbsp;type&nbsp;of&nbsp;landmarks&nbsp;exchange&nbsp;format
               <br />
               _LIT8(&nbsp;KPosMimeTypeLandmarkCollectionXml,&nbsp;
               <br />
               &nbsp;&nbsp;&nbsp;&nbsp;&quot;application/vnd.nokia.landmarkcollection+xml&quot;);
               <br />
               <br />
               //&nbsp;Create&nbsp;the&nbsp;parser&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;importing&nbsp;landmarks
               <br />
               CPosLandmarkParser*&nbsp;parser&nbsp;=&nbsp;
               <br />
               &nbsp;&nbsp;&nbsp;&nbsp;CPosLandmarkParser::NewL(&nbsp;KPosMimeTypeLandmarkCollectionXml&nbsp;);
               <br />
               CleanupStack::PushL(&nbsp;parser&nbsp;);
               <br />
               <br />
               //&nbsp;Point&nbsp;out&nbsp;the&nbsp;file&nbsp;to&nbsp;import&nbsp;landmark&nbsp;data&nbsp;from
               <br />
               parser-&gt;SetInputFileL(&nbsp;aImportFilePath&nbsp;);
               <br />
               CPosLmOperation*&nbsp;op&nbsp;=&nbsp;aDatabase-&gt;ImportLandmarksL(&nbsp;
               <br />
               &nbsp;&nbsp;&nbsp;&nbsp;*parser,&nbsp;CPosLandmarkDatabase::EDefaultOptions&nbsp;);
               <br />
               CleanupStack::PushL(&nbsp;op&nbsp;);
               <br />
               //&nbsp;Execute&nbsp;the&nbsp;operation&nbsp;in&nbsp;one&nbsp;batch
               <br />
               op-&gt;ExecuteL();
               <br />
               <br />
               //&nbsp;Fetch&nbsp;the&nbsp;landmark&nbsp;iterator&nbsp;of&nbsp;imported&nbsp;landmark&nbsp;IDs
               <br />
               CPosLmItemIterator*&nbsp;iter&nbsp;=&nbsp;aDatabase-&gt;ImportedLandmarksIteratorL(&nbsp;op&nbsp;);
               <br />
               CleanupStack::PushL(&nbsp;iter&nbsp;);&nbsp;
               <br />
               <br />
               //&nbsp;Fetch&nbsp;imported&nbsp;landmark&nbsp;data&nbsp;using&nbsp;this&nbsp;iterator
               <br />
               <br />
               //&nbsp;Cleanup
               <br />
               CleanupStack::PopAndDestroy(&nbsp;iter&nbsp;);
               <br />
               CleanupStack::PopAndDestroy(&nbsp;op&nbsp;);
               <br />
               CleanupStack::PopAndDestroy(&nbsp;parser&nbsp;);
               <br />
               }
              </code>
             </pre>
             <div class="RelatedItems">
              Related APIs
             </div>
             <ul>
              <li>
               <code class="ApiItem">
                CPosLandmarkDatabase
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLandmarkDatabase::ImportLandmarksL()
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLandmarkDatabase::ImportedLandmarksIteratorL()
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLandmarkParser
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLandmarkParser::ParseContentL()
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLmOperation
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLmOperation::NextStep()
               </code>
              </li>
              <li>
               <code class="ApiItem">
                KErrAccessDenied
               </code>
              </li>
              <li>
               <code class="ApiItem">
                User::WaitForRequest()
               </code>
              </li>
             </ul>
            </div>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicEncodetoURL">
             </a>
             <h3>
              Encoding of Landmarks to URL
             </h3>
             <p>
              To encode a landmark to an URL ,the client has to first create an instance
of
              <code class="ApiItem">
               CPosLandmarkEncoder
              </code>
              class with the URL hostname as the
MIME type.( which is 'maps.ovi.com' ).The output buffer into which the encoded
URL is written can be set using the
              <code>
               CPosLandmarkEncoder::SetUseOutputBufferL.The
output can also be encoded into a file by setting the output file using CPosLandmarkEncoder::SetUseOutputFileL.
              </code>
             </p>
             <p>
              The client can specify the landmark to be encoded by using
              <code class="ApiItem">
               CPosLandmarkEncoder::AddLandmarkL()
              </code>
              method.When
the landmark has been encoded, the client must finalize the encoding by calling
              <code class="ApiItem">
               CPosLandmarkEncoder::FinalizeEncodingL().
              </code>
             </p>
             <p>
              The sequence diagram below describes basic steps a client does to encode
landmark to a URL.Currently encoding of only a single landmark is supported.Therefore
if AddLandmarkL() method is called more than once during the encoding process
KErrNotSupported is returned.
             </p>
             <p>
              The following example shows how the client can encode landmark to an URL
using
              <code>
               CPosLandmarkEncoder class.
              </code>
              <pre>
               <code class="cpp">
                void&nbsp;EncodeLandmarktoUrl&nbsp;(&nbsp;CPosLandmark&amp;&nbsp;aLandmark&nbsp;)
                <br />
                {
                <br />
                //Mime&nbsp;type&nbsp;used&nbsp;for&nbsp;encoding&nbsp;URL
                <br />
                _LIT8(&nbsp;KUrlMimeType&nbsp;,&nbsp;&quot;maps.ovi.com&quot;&nbsp;);
                <br />
                <br />
                //&nbsp;Create&nbsp;the&nbsp;encoder&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;encoding&nbsp;landmark&nbsp;to&nbsp;URL
                <br />
                CPosLandmarkEncoder*&nbsp;encoder&nbsp;=&nbsp;
                <br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CPosLandmarkEncoder::NewL(&nbsp;KUrlMimeType&nbsp;);
                <br />
                CleanupStack::PushL(&nbsp;encoder&nbsp;);
                <br />
                <br />
                //&nbsp;Set&nbsp;output&nbsp;buffer&nbsp;into&nbsp;which&nbsp;the&nbsp;encoded&nbsp;URL&nbsp;will&nbsp;be&nbsp;written
                <br />
                CBufBase*&nbsp;outputBuffer&nbsp;=&nbsp;encoder-&gt;SetUseOutputBufferL();
                <br />
                <br />
                //&nbsp;Add&nbsp;the&nbsp;landmark&nbsp;to&nbsp;be&nbsp;encoded
                <br />
                encoder-&gt;AddLandmarkL(&nbsp;aLandmark&nbsp;);
                <br />
                <br />
                //&nbsp;Perform&nbsp;required&nbsp;operation&nbsp;on&nbsp;the&nbsp;outputBuffer
                <br />
                //&nbsp;Delete&nbsp;the&nbsp;buffer
                <br />
                delete&nbsp;outputBuffer;
                <br />
                <br />
                //&nbsp;Finalize&nbsp;encoding
                <br />
                ExecuteAndDeleteLD(&nbsp;encoder-&gt;FinalizeEncodingL()&nbsp;);
                <br />
                CleanupStack::PopAndDestroy(&nbsp;encoder&nbsp;);
                <br />
                <br />
                }
               </code>
              </pre>
             </p>
             <div class="RelatedItems">
              Related APIs
             </div>
             <ul>
              <li>
               <code class="ApiItem">
                CPosLandmarkEncoder
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLandmarkEncoder::AddLandmarkL()
               </code>
              </li>
              <li>
               <code class="ApiItem">
                CPosLandmarkEncoder::FinalizeEncodingL().
               </code>
              </li>
             </ul>
            </div>
            <div class="section">
             <a name="Landmarks_API_Specification%2etopicParsingURL">
             </a>
             <h3>
              Parsing URL to obtain a landmark
             </h3>
             <p>
              The client can parse an URL and decode the landmark information present
in the URL by using the
              <code class="ApiItem">
               CPosLandmarkParser
              </code>
              class.In order
to do this,the client has to first create an instance of the
              <code class="ApiItem">
               CPosLandmarkParser
              </code>
              with
the MIME type as the hostname of the URL( which is 'maps.ovi.com' ).
             </p>
             <p>
              The URL can be provided as an input buffer or input file by using the
              <code>
               CPosLandmarkParser::SetInputBuffer
method and CPosLandmarkParser::SetInputFileL or CPosLandmarkParser::SetInputFileHandleL
methods respectively.
              </code>
             </p>
             <p>
              The URL can then be parsed by calling the CPosLandmarkParser::ParseContentL
method.This method returns a pointer to the
              <code>
               CPosLmOperation class
, which is then used to call the
              </code>
              <code>
               CPosLmOperation::ExecuteL
method to complete the parsing operation.
              </code>
             </p>
             <p>
              The parsed landmark can then be retrieved using the
              <code>
               CPosLandmarkParser::LandmarkLC
method.
              </code>
             </p>
             <p>
              The sequence diagram below describes basic steps a client does to parse
an URLand decode it to a landmark Currently decoding of only a single landmark
is supported.
             </p>
             <p>
              The following example shows how the client can parse an URL using
              <code>
               CPosLandmarkParser
class.
              </code>
              <pre>
               <code class="cpp">
                void&nbsp;ParseURLtoLandmark&nbsp;(&nbsp;TDesC&amp;&nbsp;aUrl&nbsp;)
                <br />
                {
                <br />
                //Mime&nbsp;type&nbsp;used&nbsp;for&nbsp;encoding&nbsp;URL
                <br />
                _LIT8(&nbsp;KUrlMimeType&nbsp;,&nbsp;&quot;maps.ovi.com&quot;&nbsp;);
                <br />
                <br />
                //&nbsp;Create&nbsp;the&nbsp;parser&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;parsing&nbsp;the&nbsp;URL
                <br />
                CPosLandmarkParser*&nbsp;parser&nbsp;=&nbsp;
                <br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CPosLandmarkParser::NewL(&nbsp;KUrlMimeType&nbsp;);
                <br />
                CleanupStack::PushL(&nbsp;parser&nbsp;);
                <br />
                <br />
                <br />
                //&nbsp;Set&nbsp;the&nbsp;input&nbsp;buffer&nbsp;that&nbsp;contains&nbsp;the&nbsp;URL&nbsp;to&nbsp;be&nbsp;parsed
                <br />
                parser-&gt;SetInputBuffer(&nbsp;aUrl&nbsp;);
                <br />
                <br />
                //&nbsp;Parse&nbsp;the&nbsp;URL
                <br />
                CPosLmOperation*&nbsp;op&nbsp;&nbsp;=&nbsp;parser-&gt;ParseContentL();
                <br />
                CleanupStack::PushL(&nbsp;op&nbsp;);
                <br />
                //&nbsp;Execute&nbsp;the&nbsp;operation&nbsp;in&nbsp;one&nbsp;batch
                <br />
                op&nbsp;-&gt;&nbsp;ExecuteL();
                <br />
                <br />
                //&nbsp;Retrieve&nbsp;the&nbsp;parsed&nbsp;landmark
                <br />
                CPosLandmark*&nbsp;parsedLandmark&nbsp;=&nbsp;parser-&gt;LandmarkLC();
                <br />
                <br />
                //&nbsp;Client&nbsp;can&nbsp;perform&nbsp;required&nbsp;operation&nbsp;on&nbsp;the&nbsp;parsedLandmark
                <br />
                <br />
                CleanupStack::PopAndDestroy(&nbsp;parsedLandmark&nbsp;);
                <br />
                CleanupStack::PopAndDestroy(&nbsp;op&nbsp;);
                <br />
                CleanupStack::PopAndDestroy(&nbsp;parser&nbsp;);
                <br />
                <br />
                }
               </code>
              </pre>
             </p>
             <div class="RelatedItems">
              Related APIs
             </div>
             <ul>
              <li>
               <code class="ApiItem">
                CPosLandmarkParser
               </code>
              </li>
             </ul>
            </div>
            <div class="RelatedItems">
             Related APIs
            </div>
            <ul>
             <li>
              <code class="ApiItem">
               CPosLandmarkEncoder
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLandmarkParser
              </code>
             </li>
            </ul>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopicIncrementalExecution">
            </a>
            <h2>
             Incremental operations
            </h2>
            <p>
             Some operations in Landmarks API can take a long time to complete. It is
recommended to run them incrementally. The client can use an active object
to run the incremental operations in the background so that other tasks can
be handled in the meantime, in particular handling UI events. To use an incremental
operation in Landmarks API, the classes described in the
             <strong class="unresolvedXref">
              Incremental operations
             </strong>
             section
are used.
            </p>
            <p>
             The following sequence shows a typical usage of an incremental operation.
            </p>
            <ul>
             <li>
              <p>
              </p>
              <p>
               The client requests an incremental operation, for example
               <code class="ApiItem">
                CPosLandmarkDatabase::CompactL()
               </code>
               .
              </p>
             </li>
             <li>
              <p>
              </p>
              <p>
               The Landmarks API method returns a
               <code class="ApiItem">
                CPosLmOperation
               </code>
               object,
which the client takes ownership of.
              </p>
             </li>
             <li>
              <p>
              </p>
              <p>
               The client uses an active object and calls
               <code class="ApiItem">
                CPosLmOperation::NextStep()
               </code>
               once
every time the active object is scheduled.
               <code class="ApiItem">
                NextStep()
               </code>
               returns
a progress value, which the client uses to display a progress bar to the user.
The client stops when
               <code class="ApiItem">
                NextStep()
               </code>
               reports the status
               <code class="ApiItem">
                KErrNone
               </code>
               or
an error code.
              </p>
             </li>
             <li>
              <p>
              </p>
              <p>
               When
               <code class="ApiItem">
                NextStep()
               </code>
               reports that the operation is complete,
the client is responsible for deleting the
               <code class="ApiItem">
                CPosLmOperation
               </code>
               object.
              </p>
             </li>
            </ul>
            <p>
             The operation can be cancelled by deleting the operation object before
the operation is complete.
             <b>
              Note:
             </b>
             Changes that were already done before
the operation was cancelled are not rolled back. These changes will be a part
of the database.
            </p>
            <p>
             <b>
              Note:
             </b>
             It is still possible to run the operation all at once. This
is done by calling
             <code class="ApiItem">
              CPosLmOperation::ExecuteL()
             </code>
             instead
of
             <code class="ApiItem">
              CPosLmOperation::NextStep()
             </code>
             . If there is some error,
             <code class="ApiItem">
              ExecuteL()
             </code>
             will
leave. There is a utility method,
             <strong class="unresolvedXref">
              ExecuteAndDeleteLD()
             </strong>
             ,
which first calls
             <code class="ApiItem">
              ExecuteL()
             </code>
             and then deletes the operation
object. The utility method leaves if the operation fails. This utility method
is useful when the client does not need to use the operation object after
it has completed.
             <pre>
              <code class="cpp">
               ExecuteAndDeleteLD(&nbsp;database-&gt;InitializeL()&nbsp;);
              </code>
             </pre>
            </p>
            <p>
             <b>
              Note:
             </b>
             The usage of
             <code class="ApiItem">
              ExecuteL()
             </code>
             and
             <code class="ApiItem">
              NextStep()
             </code>
             cannot
be mixed. For instance, if
             <code class="ApiItem">
              NextStep()
             </code>
             has been called, any
call to
             <code class="ApiItem">
              ExecuteL()
             </code>
             will panic.
            </p>
            <p>
             The next example shows how to handle the compaction of a landmark database
using incremental execution of operations.
             <code class="ApiItem">
              CCompactHandler
             </code>
             is
responsible for the compact operation, and to be able to handle incremental
execution asynchronously, it inherits from
             <code class="ApiItem">
              CActive
             </code>
             .
            </p>
            <p>
             The
             <code class="ApiItem">
              CCompactHandler
             </code>
             class is defined as follows:
            </p>
            <pre>
             <code class="cpp">
              class&nbsp;CCompactHandler&nbsp;:&nbsp;public&nbsp;CActive
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;public:
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CCompactHandler(&nbsp;CPosLandmarkDatabase*&nbsp;aDatabase&nbsp;);
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;virtual&nbsp;~CCompactHandler();
              <br />
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;CompactIfNeededL();
              <br />
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;public:&nbsp;//&nbsp;from&nbsp;CActive
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;RunL();
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;DoCancel();
              <br />
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;private:
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CPosLandmarkDatabase*&nbsp;iDatabase;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CPosLmOperation*&nbsp;iCompactOperation;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TReal32&nbsp;iProgress;
              <br />
              &nbsp;};
             </code>
            </pre>
            <p>
             The following code section shows implementation of
             <code class="ApiItem">
              CCompactHandler
             </code>
             .
            </p>
            <pre>
             <code class="cpp">
              CCompactHandler::CCompactHandler(&nbsp;CPosLandmarkDatabase*&nbsp;aDatabase&nbsp;)
              <br />
              :&nbsp;CActive(&nbsp;EPriorityIdle&nbsp;),&nbsp;iDatabase(&nbsp;aDatabase&nbsp;)
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              <br />
              CCompactHandler::~CCompactHandler()
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;Cancel();
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;iCompactOperation;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              <br />
              void&nbsp;CCompactHandler::CompactIfNeededL()
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Only&nbsp;compact&nbsp;if&nbsp;not&nbsp;started&nbsp;yet.
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!iCompactOperation&nbsp;)
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CPosLandmarkDatabase::TSize&nbsp;size&nbsp;=&nbsp;iDatabase-&gt;SizeL();
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;When&nbsp;to&nbsp;compact&nbsp;is&nbsp;up&nbsp;to&nbsp;the&nbsp;client.&nbsp;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;In&nbsp;this&nbsp;example&nbsp;we&nbsp;compact&nbsp;when
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;less&nbsp;than&nbsp;70%&nbsp;of&nbsp;the&nbsp;database&nbsp;is&nbsp;used.
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;TReal32&nbsp;KPercentage&nbsp;=&nbsp;0.70f;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;size.iUsage&nbsp;&lt;&nbsp;KPercentage&nbsp;)
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iCompactOperation&nbsp;=&nbsp;iDatabase-&gt;CompactL();
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iCompactOperation-&gt;NextStep(&nbsp;iStatus,&nbsp;iProgress&nbsp;);
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetActive();
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              <br />
              void&nbsp;CCompactHandler::RunL()
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;iStatus&nbsp;==&nbsp;KPosLmOperationNotComplete&nbsp;)
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;//&nbsp;The&nbsp;compact&nbsp;operation&nbsp;has&nbsp;not&nbsp;completed.
              <br />
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;the&nbsp;value&nbsp;iProgress&nbsp;to&nbsp;show&nbsp;progress&nbsp;bar&nbsp;to&nbsp;the&nbsp;phone&nbsp;user.
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Perform&nbsp;the&nbsp;next&nbsp;compact&nbsp;step
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iCompactOperation-&gt;NextStep(&nbsp;iStatus,&nbsp;iProgress&nbsp;);
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetActive();
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;else
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;//&nbsp;The&nbsp;compact&nbsp;operation&nbsp;has&nbsp;completed.
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;iStatus&nbsp;!=&nbsp;KErrNone&nbsp;)
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Notify&nbsp;user&nbsp;of&nbsp;error
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;iCompactOperation;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iCompactOperation&nbsp;=&nbsp;NULL;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;}
              <br />
              <br />
              void&nbsp;CCompactHandler::DoCancel()
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;{
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Cancel&nbsp;is&nbsp;done&nbsp;by&nbsp;deleting&nbsp;the&nbsp;operation&nbsp;object.
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;iCompactOperation;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;iCompactOperation&nbsp;=&nbsp;NULL;
              <br />
              &nbsp;&nbsp;&nbsp;&nbsp;}
             </code>
            </pre>
            <div class="RelatedItems">
             Related APIs
            </div>
            <ul>
             <li>
              <code class="ApiItem">
               CActive
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CCompactHandler
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLandmarkDatabase::CompactL()
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLmOperation
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLmOperation::ExecuteL()
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLmOperation::NextStep()
              </code>
             </li>
             <li>
              <code class="ApiItem">
               ExecuteL()
              </code>
             </li>
             <li>
              <code class="ApiItem">
               KErrNone
              </code>
             </li>
             <li>
              <code class="ApiItem">
               NextStep()
              </code>
             </li>
            </ul>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopicErrorHandling">
            </a>
            <h2>
             Error handling
            </h2>
            <p>
             Landmarks API uses the standard Symbian error reporting mechanism. In case
of an irrecoverable error, panics are used. Otherwise, errors are reported
through return codes or leaves.
            </p>
            <p>
             For incremental operations (see
             <a href="Landmarks_API_Specification.html#Landmarks_API_Specification%2etopicIncrementalExecution" title="Some operations in Landmarks API can take a long time to complete. It is recommended to run them incrementally. The client can use an active object to run the incremental operations in the background so that other tasks can be handled in the meantime, in particular handling UI events. To use an incremental operation in Landmarks API, the classes described in the Incremental operations section are used.">
              Executing incremental operations
             </a>
             section),
             <code class="ApiItem">
              CPosLmOperation::NextStep()
             </code>
             returns
a status, which indicates if there has been an error.
            </p>
            <p>
             The following table lists the panic codes defined by Landmarks API and
other Landmarks APIs (Landmarks Search API and Landmarks Database Management
API). The panic category is &quot;Landmarks Client&quot;.
            </p>
            <p>
             <em>
              Landmarks panic codes
             </em>
            </p>
            <table class="TableWrap" border="1" cellpadding="1" cellspacing="0">
             <tr valign="top">
              <th>
               0
              </th>
              <th>
               EPosInvalidPositionFieldId
              </th>
              <th>
               A client has specified a position field ID that is invalid for the
landmark.
              </th>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                1
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosNoneOrMultipleLandmarkAttributeSet
               </p>
              </td>
              <td class="Cell">
               <p>
                A client has specified none or multiple landmark attributes.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                2
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosSpecifiedIntervalLiesOutsideIteratedSet
               </p>
              </td>
              <td class="Cell">
               <p>
                A client has specified an interval that lies partially outside the
iterated set.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                3
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosNaNCoordinate
               </p>
              </td>
              <td class="Cell">
               <p>
                A client has specified a coordinate with latitude and/or longitude
set to NaN.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                4
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosInvalidLandmarkAttribute
               </p>
              </td>
              <td class="Cell">
               <p>
                A client has specified a landmark attribute that is invalid.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                5
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosInvalidValueSpecifiedInResourceFile
               </p>
              </td>
              <td class="Cell">
               <p>
                An invalid value has been detected in an internal resource file. Configuration
problem.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                6
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosInvalidPartialReadParameters
               </p>
              </td>
              <td class="Cell">
               <p>
                The client has specified invalid partial read parameters in
                <code class="ApiItem">
                 CPosLmPartialReadParameters
                </code>
                .
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                7
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosInvalidRequestedPositionFields
               </p>
              </td>
              <td class="Cell">
               <p>
                The client has specified invalid requested position fields in
                <code class="ApiItem">
                 CPosLmPartialReadParameters
                </code>
                .
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                8
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosNegativeValue
               </p>
              </td>
              <td class="Cell">
               <p>
                The client specified a negative value where a negative value was not
allowed.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                9
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosInvalidOperationMode
               </p>
              </td>
              <td class="Cell">
               <p>
                Invalid operation mode. Caused by mixed calls to
                <code class="ApiItem">
                 NextStep
                </code>
                and
                <code class="ApiItem">
                 ExecuteL
                </code>
                for
a
                <code class="ApiItem">
                 CPosLmOperation
                </code>
                object or subsequent calls to
                <code class="ApiItem">
                 NextStep
                </code>
                .
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                10
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosInvalidEnumValue
               </p>
              </td>
              <td class="Cell">
               <p>
                Invalid enumeration value.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                11
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosLmProtocolBreak
               </p>
              </td>
              <td class="Cell">
               <p>
                The protocol of
                <code class="ApiItem">
                 CPosLandmarkEncoder
                </code>
                or
                <code class="ApiItem">
                 CPosLandmarkParser
                </code>
                is
not followed.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                12
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosLmInvalidArgument
               </p>
              </td>
              <td class="Cell">
               <p>
                A client has passed an invalid argument.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                14
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosInvalidIndex
               </p>
              </td>
              <td class="Cell">
               <p>
                A client has specified an invalid index.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                15
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosInvalidItemType
               </p>
              </td>
              <td class="Cell">
               <p>
                A client has specified an invalid item type.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                16
               </p>
              </td>
              <td class="Cell">
               <p>
                EPosSearchOperationInUse
               </p>
              </td>
              <td class="Cell">
               <p>
                A client has tried to set/unset display data during an ongoing search.
               </p>
              </td>
             </tr>
            </table>
            <div class="RelatedItems">
             Related APIs
            </div>
            <ul>
             <li>
              <code class="ApiItem">
               CPosLandmarkEncoder
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLandmarkParser
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLmOperation
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLmOperation::NextStep()
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLmPartialReadParameters
              </code>
             </li>
             <li>
              <code class="ApiItem">
               ExecuteL
              </code>
             </li>
             <li>
              <code class="ApiItem">
               NextStep
              </code>
             </li>
            </ul>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopic3%2e3">
            </a>
            <h2>
             Memory overhead
            </h2>
            <p>
             When using Landmarks API, the memory overhead is dependent on the amount
of classes instantiated by the client, but there are also some cases where
extra memory usage can be involved and cannot be controlled by the client.
            </p>
            <p>
             <code class="ApiItem">
              CPosLmItemIterator
             </code>
             objects may use a caching scheme
to enable fast access to landmarks that have already been read. This means
that the iterator can use memory that the client cannot control. This memory
will be released when the iterator is destroyed.
            </p>
            <p>
             <code class="ApiItem">
              CPosLandmarkDatabase::PreparePartialLandmarksL()
             </code>
             allocates
a lot of information on the heap if many landmarks are read, especially if
partial read parameters are set to include a lot of landmark attributes. These
landmark objects are stored inside the
             <code class="ApiItem">
              CPosLmOperation
             </code>
             object
until retrieved by the client.
            </p>
            <p>
             Clients take ownership of the
             <code class="ApiItem">
              CPosLmOperation
             </code>
             objects
and should delete them as soon as they are not needed in order to release
unused heap memory.
            </p>
            <div class="RelatedItems">
             Related APIs
            </div>
            <ul>
             <li>
              <code class="ApiItem">
               CPosLandmarkDatabase::PreparePartialLandmarksL()
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLmItemIterator
              </code>
             </li>
             <li>
              <code class="ApiItem">
               CPosLmOperation
              </code>
             </li>
            </ul>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopic3%2e4">
            </a>
            <h2>
             Extensions to the API
            </h2>
            <p>
             This API does not allow extensions.
            </p>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopicSecurity">
            </a>
            <h2>
             Security issues
            </h2>
            <p>
             Landmarks are considered as important user data and this applies some access
limitations to client applications. For example, in order to be able to read
landmarks from landmark database client must have
             <code class="ApiItem">
              ReadUserData
             </code>
             capability
and
             <code class="ApiItem">
              WriteUserData
             </code>
             in order to modify it. Whenever special
capabilities are needed to work with landmarks database, they are listed in
appropriate class and method descriptions.
            </p>
            <div class="RelatedItems">
             Related APIs
            </div>
            <ul>
             <li>
              <code class="ApiItem">
               ReadUserData
              </code>
             </li>
             <li>
              <code class="ApiItem">
               WriteUserData
              </code>
             </li>
            </ul>
           </div>
          </div>
          <div class="section">
           <a name="Landmarks_API_Specification%2etopic4">
           </a>
           <h1>
            Glossary
           </h1>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopic4%2e1">
            </a>
            <h2>
             Abbreviations
            </h2>
            <p>
             <em>
              Abbreviations
             </em>
            </p>
            <table class="TableWrap" border="1" cellpadding="1" cellspacing="0">
             <tr valign="top">
              <th>
               WGS 84
              </th>
              <th>
               World Geodetic System 1984
              </th>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                GPX
               </p>
              </td>
              <td class="Cell">
               <p>
                GPS Exchange (format)
               </p>
              </td>
             </tr>
            </table>
           </div>
           <div class="section">
            <a name="Landmarks_API_Specification%2etopic4%2e2">
            </a>
            <h2>
             Definitions
            </h2>
            <p>
             <em>
              Definitions
             </em>
            </p>
            <table class="TableWrap" border="1" cellpadding="1" cellspacing="0">
             <tr valign="top">
              <th>
               Landmark
              </th>
              <th>
               A landmark is a named object that contains a location. The location
can be defined by various attributes, e.g. WGS 84 coordinates or a textual
address.
              </th>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                Landmark category
               </p>
              </td>
              <td class="Cell">
               <p>
                A landmark can be categorized by assigning a landmark category to it.
A typical landmark category is &#8220;Restaurant&#8221;.
               </p>
              </td>
             </tr>
             <tr valign="top">
              <td class="Cell">
               <p>
                Landmark database
               </p>
              </td>
              <td class="Cell">
               <p>
                Persistent storage of a collection of landmarks and landmark categories.
               </p>
              </td>
             </tr>
            </table>
           </div>
          </div>
          <div class="section">
           <a name="Landmarks_API_Specification%2etopic">
           </a>
           <h1>
            References
           </h1>
           <p>
            <em>
            </em>
           </p>
           <table class="TableWrap" border="1" cellpadding="1" cellspacing="0">
            <tr valign="top">
             <th>
              GPX
             </th>
             <th>
             </th>
            </tr>
            <tr valign="top">
             <td class="Cell">
              <p>
               KML
              </p>
             </td>
             <td class="Cell">
              <p>
               <a href="http://code.google.com/apis/kml/documentation/kmlreference.html">
                http://code.google.com/apis/kml/documentation/kmlreference.html
               </a>
              </p>
             </td>
            </tr>
            <tr valign="top">
             <td class="Cell">
              <p>
               URL
              </p>
             </td>
             <td class="Cell">
              <p>
               <a href="../../../../rfc/rfc2396-2.txt">
                http://www.rfc-editor.org/rfc/rfc2396.txt
               </a>
               <a href="../../../../rfc/rfc1738.txt">
                http://www.rfc-editor.org/rfc/rfc1738.txt
               </a>
              </p>
             </td>
            </tr>
            <tr valign="top">
             <td class="Cell">
              <p>
               ASCII table
              </p>
             </td>
             <td class="Cell">
              <p>
               <a href="http://www.asciitable.com/">
                http://www.asciitable.com/
               </a>
              </p>
             </td>
            </tr>
           </table>
          </div>
         </div>
        </div>
       </div>
      </div>
     </td>
    </tr>
   </table>
   <div style="clear: both">
   </div>
  </div>
  <div id="includedFooter">
   <div id="devnet_footer">
    Copyright &copy;2010&nbsp; Nokia Corporation and/or its subsidiary(-ies). All rights reserved.
    <a href="http://www.eclipse.org/legal/epl-v10.html">
    </a>
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ???>
 </body>

<!-- Mirrored from devlib.symbian.slions.net/s3/specs/guides/Landmarks_API_Specification/Landmarks_API_Specification.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:25:21 GMT -->
</html>
