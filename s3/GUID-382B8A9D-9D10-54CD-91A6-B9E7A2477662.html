
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:12:56 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="SendAs v2.0" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4" /><meta name="DC.Relation" scheme="URI" content="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388" /><meta name="DC.Relation" scheme="URI" content="GUID-63816E09-46C7-503A-ADA0-E350C7ACF3C4" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662" /><meta name="DC.Language" content="en" /><title>SendAs v2.0 </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662">SendAs v2.0</h1><div>
<div id="GUID-9D54D47A-37D9-5229-92D5-B80B442E8B0D"><h3 class="section-title">Description</h3> <p>The application establishes a session with the SendAs server,
sets a message entry, creates a message, sets its body text, adds
a recipient, sends the message and closes the session. The sequence
of events is detailed in the following list: </p> <ul>
<li id="GUID-ADE16BD9-7B38-5B35-8E72-77E968D1CED2"><a name="GUID-ADE16BD9-7B38-5B35-8E72-77E968D1CED2"><!-- --></a><p>Create a session
with the SendAs server using CMsvSession::OpenSyncL(MMsvSessionObserver
&amp;) function. </p> </li>
<li id="GUID-E1BF3D0E-C278-57F6-9359-4EDC426034BD"><a name="GUID-E1BF3D0E-C278-57F6-9359-4EDC426034BD"><!-- --></a><p>Set the message
entry using the CMsvEntry::SetEntryL(TMsvId) function. </p> </li>
<li id="GUID-C89C044C-B1DF-5541-8F0E-81DBA222E126"><a name="GUID-C89C044C-B1DF-5541-8F0E-81DBA222E126"><!-- --></a><p>After setting
the entry, the application gets a selection containing the IDs of
all the context children, using the CMsvEntry::ChildrenL()const function. </p> </li>
<li id="GUID-B2B5D96F-68F3-5000-B615-3AE7DA32E3A3"><a name="GUID-B2B5D96F-68F3-5000-B615-3AE7DA32E3A3"><!-- --></a><p>The connection
to the server is made using the default number of message slots available
to a session, which is 4, (KSendAsDefaultMessageSlots). </p> </li>
<li id="GUID-5469B019-40CD-5864-BF4B-43DEC2FDF34F"><a name="GUID-5469B019-40CD-5864-BF4B-43DEC2FDF34F"><!-- --></a><p>The draft folder
is emptied, before creating a new message. </p> </li>
<li id="GUID-A1D2D778-42D2-51DA-817C-65E350BABB9C"><a name="GUID-A1D2D778-42D2-51DA-817C-65E350BABB9C"><!-- --></a><p>Fetch the names
and UIDs for the filtered list of message types using the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3.html#GUID-B94FAE68-3EB9-3E01-97B7-3A77CE5A4740"><code class="apiname">RSendAs::FilteredMessageTypesL()</code></a> function to create a SendAs
message. Then the UID based on the message type is returned, and with
the entry set on the drafts folder a SendAs message is created by
calling the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html#GUID-1A133BB1-CD76-3B4E-96E4-E736CB6C43EE"><code class="apiname">RSendAsMessage::CreateL(RSendAs &amp;,TSendAsAccount)</code></a> function. </p> </li>
<li id="GUID-8CE79BC4-4240-5E94-851B-2E13DFB3B271"><a name="GUID-8CE79BC4-4240-5E94-851B-2E13DFB3B271"><!-- --></a><p>Set a body text
for the message and specify the recipients. In this example, the body
text is set using an option, which is read from the user. Option given
to the user are '1' for 8-bit encoding, '2' for 16-bit encoding and
'0' or by default its unicode type of encoding. The encoded descriptor
is set as the message's body text using the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html#GUID-47CCB36A-8DEB-380D-9AE4-A0044B07F082"><code class="apiname">RSendAsMessage::SetBodyTextL(const
CRichText &amp;)</code></a>function. </p></li>
<li><p>The recipients are added using the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html#GUID-89843841-0DF7-3574-A09E-2B7D84CFA827"><code class="apiname">RSendAsMessage::AddRecipientL(const
TDesC &amp;,TSendAsRecipientType)</code></a> function. The recipient's
address is held in a descriptor. The alias is the displayed recipient
name.</p></li>
<li id="GUID-EB161170-E53F-5892-B7A6-6DF4529C924D"><a name="GUID-EB161170-E53F-5892-B7A6-6DF4529C924D"><!-- --></a><p>The recipient
type is one of the TSendAsRecipientType enumeration
values, that is, one of the following: </p> <ul>
<li id="GUID-7D3CA067-B14A-5694-9C80-3FA740E1D3AA"><a name="GUID-7D3CA067-B14A-5694-9C80-3FA740E1D3AA"><!-- --></a><p> ESendAsRecipientTo - The recipient goes in the 'To' field. </p> </li>
<li id="GUID-6E67C22D-4C3F-5F77-8454-AF35290C31A6"><a name="GUID-6E67C22D-4C3F-5F77-8454-AF35290C31A6"><!-- --></a><p> ESendAsRecipientCc - The recipient goes in the 'Cc' field </p> </li>
<li id="GUID-0D5D7039-1970-579C-8629-5C41C3B3538D"><a name="GUID-0D5D7039-1970-579C-8629-5C41C3B3538D"><!-- --></a><p> ESendAsRecipientBcc - The recipient goes in the 'Bcc' field </p> </li>
</ul> <p>If the 'Cc' field is not supported, the recipient will instead
be added to the 'To' field since these are functionally equivalent. </p> <p>If the 'Bcc' field is not supported, this function will return KErrNotSupported. </p> </li>
</ul> <p>The example also displays the names of the accounts present
in the list. </p> <p>To demonstrate this, 3 new accounts are appended
and they are displayed in a for-loop by calling <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-90C4FDEE-3E4D-32B3-85E1-52C157AC4AC4.html#GUID-1FB61663-625D-3294-84BA-D811044D1235"><code class="apiname">CSendAsAccounts::AccountNames().MdcaPoint(i)</code></a>, where the MdcaPoint() function takes in the
integer value of the current iteration in the for-loop and indexes
into a descriptor array. </p> <p>The example also demonstrates how
to refine the available message types of the connected session using
the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3.html#GUID-C87673B0-714F-31C0-9F9E-C095669007AF"><code class="apiname">RSendAs::FilterAgainstCapability()</code></a> function. </p> <p>The <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html#GUID-28EE1E22-8892-388C-990D-BC0E1F18D88E"><code class="apiname">RSendAsMessage::SendMessage()</code></a> function
is used asynchronously to send the message. Finally the RsendAs::Close() function is used to end the session with SendAs server. </p> </div>
<div id="GUID-5D17C0D4-1D8E-5E85-AEFD-7083A748C728"><h3 class="section-title">Download</h3> <p>Click on the following link to download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-90c56a55-33bb-4ab7-a6b8-8932ba181dc8.zip" target="_blank">sendAs.zip</a></p><p>Click: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-90c56a55-33bb-4ab7-a6b8-8932ba181dc8.html#guid-6013a680-57f9-415b-8851-c4fa63356636/guid-90c56a55-33bb-4ab7-a6b8-8932ba181dc8.html">browse </a> to view the example code. </p> </div>
<div id="GUID-3AE6EA98-02BC-41BD-AC4E-157A6700A12A"><h3 class="section-title">Class
summary</h3><p> The SendAs v2 example application uses the following
classes:</p><ul>
<li><p>CMsvEntry </p></li>
<li><p><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-B36289AC-769F-3A83-BADB-AE0568E97581.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-B36289AC-769F-3A83-BADB-AE0568E97581.html"><code class="apiname">MMsvEntryObserver </code></a></p></li>
<li><p>CMsvSession </p></li>
<li><p><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3.html"><code class="apiname">RSendAs </code></a></p></li>
<li><p><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-CB2BB982-F91D-3E06-8D66-56731AA60EB8.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-CB2BB982-F91D-3E06-8D66-56731AA60EB8.html"><code class="apiname">CSendAsMessageTypes </code></a></p></li>
<li><p><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-90C4FDEE-3E4D-32B3-85E1-52C157AC4AC4.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-90C4FDEE-3E4D-32B3-85E1-52C157AC4AC4.html"><code class="apiname">CSendAsAccounts </code></a></p></li>
<li><p><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-90C4FDEE-3E4D-32B3-85E1-52C157AC4AC4.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-90C4FDEE-3E4D-32B3-85E1-52C157AC4AC4.html"><code class="apiname">CSendAsAccounts </code></a></p></li>
<li><p><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1FDBA8F6-D1CC-3AE5-AF48-1256D50C5A4F.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1FDBA8F6-D1CC-3AE5-AF48-1256D50C5A4F.html"><code class="apiname">CMsvOperationWait </code></a></p></li>
<li><p><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html"><code class="apiname">RSendAsMessage </code></a></p></li>
</ul></div>
<div id="GUID-13FDF5EE-00C2-54D4-AF6C-41E3DBDC2B93"><h3 class="section-title">Build</h3> <p>The Symbian build process describes how to build an application. </p> <p>The SendAs example builds an executable called <code>SendAs2Example.exe</code> in the standard location (<code>\epoc32\release\winscw\</code> <em>&lt;build_variant&gt;</em> for CodeWarrior). After launching the
executable, depending on the emulator you are using, you may need
to task away from the app launcher/shell screen to view the console. </p> </div>
</div></div></div><div class="footer"><p class="metadata">Last updated January 10th, 2011</p><hr /><div class="copy">© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:12:58 GMT -->
</html>