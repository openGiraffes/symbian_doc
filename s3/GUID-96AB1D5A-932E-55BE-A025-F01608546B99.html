
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-96AB1D5A-932E-55BE-A025-F01608546B99.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:03:18 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="RAII Idiom" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657" /><meta name="DC.Relation" scheme="URI" content="GUID-324107D1-6E0B-56DD-BDC0-7296F688A9CF" /><meta name="DC.Relation" scheme="URI" content="GUID-28AD51DC-C101-5E6E-9EC3-C2B61400D8CD" /><meta name="DC.Relation" scheme="URI" content="GUID-D60B55FA-D8C1-559A-9D99-48845BE32A6C" /><meta name="DC.Relation" scheme="URI" content="GUID-ECE93783-F571-51DA-AB92-EDDA8618A85C" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-96AB1D5A-932E-55BE-A025-F01608546B99" /><meta name="DC.Language" content="en" /><title>RAII Idiom </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-96AB1D5A-932E-55BE-A025-F01608546B99">RAII Idiom</h1><div><p>The Resource Acquisition Is Initialization (RAII) idiom is the basis of implementation of the smart pointer class template. It is also used by the implementation of the file stream classes provided by C++ Standard Library and by many others. The Symbian C++ class templates for automatic resource management are based on the C++ RAII idiom, in order to provide exception-safe automatic cleanup on normal or exceptional exit from a scope. </p> <div><h3 class="section-title">Need for RAII Idiom</h3> <p>The current Symbian C++ resource management mechanism is the Symbian Cleanup Stack. The CleanupStack class and the associated functions provides Symbian C++ exception-safe (leave safe) cleanup when used in conjunction with the Symbian Leave mechanism. The RAII idiom can free resources automatically. The idiom consists of a class with a constructor that allocates a resource and a destructor that frees the resource. When a local variable of that class type is declared, it will automatically call the destructor to free the resource when leaving the scope. This also protects against leaks caused by thrown exceptions. </p> </div> <div><h3 class="section-title">RAII APIs</h3> <p>The LCleanedupX and LManagedX class templates share a common API as described below: </p> <ul><li id="GUID-73832E1B-FF2E-5779-AB4C-CAABAB564CE8"><a name="GUID-73832E1B-FF2E-5779-AB4C-CAABAB564CE8"><!-- --></a><p>  ReleaseResource() </p> <pre class="codeblock">void ReleaseResource()</pre> <p> <strong>Description:</strong> This method forces cleanup of a managed resource. If automatic resource management is enabled, the specified cleanup strategy is invoked for the managed reference and the automatic resource management is then disabled. </p> </li> <li id="GUID-77F69FF8-E61A-5B57-B887-D66EC29F4CF9"><a name="GUID-77F69FF8-E61A-5B57-B887-D66EC29F4CF9"><!-- --></a><p>  Unmanage() </p> <pre class="codeblock">T&amp; Unmanage()</pre> <p> <strong>Description:</strong> This method disables automatic cleanup of a managed resource and returns a reference to the object of type T. </p> </li> <li id="GUID-E1CC7B50-A4C6-599E-9A4B-A78D650B8121"><a name="GUID-E1CC7B50-A4C6-599E-9A4B-A78D650B8121"><!-- --></a><p> IsEnabled() </p> <pre class="codeblock">TBool IsEnabled()</pre> <p> <strong>Description:</strong> This method returns ETrue if automatic resource management is enabled, otherwise returns EFalse. </p> </li> <li id="GUID-4B6610DD-BD24-527E-A9C6-6E23391C789C"><a name="GUID-4B6610DD-BD24-527E-A9C6-6E23391C789C"><!-- --></a><p> Get() </p> <pre class="codeblock">T&amp; Get()</pre> <p> <strong>Description:</strong> This method returns a reference to the managed object of type T for Ref, Handle and Guard variants of LCleanedupX and LManagedX. </p> <pre class="codeblock">T* Get()</pre> <p> <strong>Description:</strong> This method returns a pointer to the managed object of type T for Ptr and Array variants of LCleanedupX and LManagedX. </p> </li> <li id="GUID-96477A5F-5CB1-55DE-9924-7A4AB341AFBE"><a name="GUID-96477A5F-5CB1-55DE-9924-7A4AB341AFBE"><!-- --></a><p>Operators </p> <p>The <strong>.</strong> operator gives access to the public members of the managing class. </p> <p>The <strong>-&gt;</strong> operator gives access to the public members of the managed class. </p> <p>The <strong>*</strong> operator is used to get a reference or pointer to the underlying managed object. </p> <p> </p> <p> </p> </li> </ul> </div> <div><h3 class="section-title">See Also</h3> <p><a href="GUID-B007634D-4D55-528A-8B85-6120C633AC8B.html">EUser High Level Library Overview</a> </p> <p><a href="GUID-D33EB877-CCCB-527B-8AFC-4A8385C55E78.html">EUser High Level Library Tutorials</a> </p> </div> </div></div></div><div class="footer"><p class="metadata">Last updated October 9th, 2009</p><hr /><div class="copy">Â© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-96AB1D5A-932E-55BE-A025-F01608546B99.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:03:18 GMT -->
</html>