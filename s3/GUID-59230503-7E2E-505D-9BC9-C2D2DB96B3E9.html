
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:15:21 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="RTPExample: RTP Packet Streaming Example" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-6425B722-4095-56E3-9198-70BA3E06C617" /><meta name="DC.Relation" scheme="URI" content="GUID-C467E6CD-6656-55F6-BDDF-BFA4F187B14F" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9" /><meta name="DC.Language" content="en" /><title>RTPExample: RTP Packet Streaming Example </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9">RTPExample: RTP Packet Streaming Example</h1><div>
<div id="GUID-50EDE46C-719B-4D77-8C61-666A5125C07C"><h3 class="section-title">Description</h3> <p>This example code demonstrates RTP packet streaming. It uses <code class="codeph">CRtpFileSender</code> to send RTP packets and <code class="codeph">CRtpFileStreamer</code> to receive RTP packets. The example opens an RTP session using the
pre-connected socket and initialises new send and receive sources
on the RTP session. It registers the callback functions when an RTP
packet is successfully sent by a send source or received by a receive
source, to receive notifications whenever an RTP packet is sent or
received. </p> <p>The <code>RTPExample</code> example code
provides the following functionality: </p> </div>
<div id="GUID-1A5135CC-CAF2-58D8-B37D-5C04B0454D59"><h3 class="section-title">Download</h3> <p>Click on the following link to download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-a4ef24ea-0ffa-410a-a19c-e1085f64c0e2.zip" target="_blank">RTPExample.zip</a></p><p>Click <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-a4ef24ea-0ffa-410a-a19c-e1085f64c0e2.html#guid-6013a680-57f9-415b-8851-c4fa63356636/guid-a4ef24ea-0ffa-410a-a19c-e1085f64c0e2.html">browse</a> to view the example code. </p> </div>
<div id="GUID-6CB87F84-BDBB-4606-917D-3FE79FDA16C5"><h3 class="section-title">Initialising</h3> <pre class="codeblock">void CRtpFileStreamer::ConstructL();</pre> <p>Opens an RTP session using the pre-connected socket and initialises
new send sources on the RTP session. </p> </div>
<div id="GUID-3F6D2D79-9639-4EAC-9EE6-BA32DC688B6F"><h3 class="section-title">Sending
an RTP packet</h3> <pre class="codeblock">void CRtpFileSender::RunL();</pre> <p>Sends the RTP packet. This does the following: </p> <ul>
<li id="GUID-C279418B-B804-53F1-B18F-1FB030BC6007"><a name="GUID-C279418B-B804-53F1-B18F-1FB030BC6007"><!-- --></a><p>gets a new RTP
packet to send from the send source </p> </li>
<li id="GUID-35269B55-BD88-5CEA-A9E1-5423BB0E3AF9"><a name="GUID-35269B55-BD88-5CEA-A9E1-5423BB0E3AF9"><!-- --></a><p>sets the RTP
timestamp of the RTP packet </p> </li>
<li id="GUID-E38F83C8-5D08-51D2-9E6A-DA81FEBF6512"><a name="GUID-E38F83C8-5D08-51D2-9E6A-DA81FEBF6512"><!-- --></a><p>reads a block
of data from the source file </p> </li>
<li id="GUID-42F2FE2D-D3B5-583E-B05C-CC693D3E14C9"><a name="GUID-42F2FE2D-D3B5-583E-B05C-CC693D3E14C9"><!-- --></a><p>creates an RTP
packet using the block of data </p> </li>
<li id="GUID-B6ED7AF9-F395-589E-B511-3EBEAEF2E359"><a name="GUID-B6ED7AF9-F395-589E-B511-3EBEAEF2E359"><!-- --></a><p>sends the RTP
packet </p> </li>
<li id="GUID-84488760-F28D-584A-A5F1-9E5D44C8C2D4"><a name="GUID-84488760-F28D-584A-A5F1-9E5D44C8C2D4"><!-- --></a><p>closes the source
file. </p> </li>
</ul> <p> <code class="codeph">CRtpFileSender::PacketSent()</code> is called
to notify that the RTP packet has been successfully sent. </p> </div>
<div id="GUID-72251E64-B5EF-4994-8ECF-89872AE23D2F"><h3 class="section-title">Receiving
an RTP packet</h3> <pre class="codeblock">void CRtpFileStreamer::NewSource();</pre> <p>When an RTP packet with a new receive source arrives, this callback
function is called, which registers the packet. This can be used for
different types of RTP packets such as APP, BYE, SDES, SR and RR. </p> <pre class="codeblock">void CRtpFileStreamer::PacketArrived();</pre> <p>Whenever an RTP packet arrives, this callback function is called.
The function retrieves the payload from the packet received and writes
it to the target file. </p> </div>
<div id="GUID-2291AD95-0A59-4FE0-A52E-12FA0876E097"><h3 class="section-title">Class
summary</h3><ul>
<li><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">RSocket</code></a></li>
<li><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-EF29C1D7-B1E5-370F-AE37-66231A6BE449.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-EF29C1D7-B1E5-370F-AE37-66231A6BE449.html"><code class="apiname">RSocketServ</code></a></li>
<li><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html"><code class="apiname">RConnection</code></a></li>
<li><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-97FC8566-E4AD-3881-8669-134798A88779.html"><code class="apiname"> RRtpSession</code></a></li>
<li><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-EF30A0A3-612A-362D-9AC5-07FD314E5CDC.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-EF30A0A3-612A-362D-9AC5-07FD314E5CDC.html"><code class="apiname">RRtpSendSource</code></a></li>
<li><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3690BFA1-A4EA-34EA-AD63-5FCC14CB67A2.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3690BFA1-A4EA-34EA-AD63-5FCC14CB67A2.html"><code class="apiname">RRtpReceiveSource</code></a></li>
<li><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0720D1BD-7F73-3EF6-80A6-17127EF17C91.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0720D1BD-7F73-3EF6-80A6-17127EF17C91.html"><code class="apiname">RRtpSendPacket</code></a></li>
<li><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3E4F47A8-0432-307A-B871-A2F7F3A7505F.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3E4F47A8-0432-307A-B871-A2F7F3A7505F.html"><code class="apiname">RRtpReceivePacket</code></a></li>
<li><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html"><code class="apiname">RFs</code></a></li>
<li><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html"><code class="apiname">RFile</code></a></li>
</ul></div>
<div id="GUID-8FE5D0CA-57F6-4CF2-A5AA-44C6A7534AA3"><h3 class="section-title">Usage</h3> <p>The Symbian build process describes how to build an application. </p> <p>This is a console application, so does not have a GUI. It builds
an executable called <code>RTPExample.exe</code> in the standard
location (<code>\epoc32\release\winscw\</code> <em>&lt;build_variant&gt;</em> for CodeWarrior). After launching the executable, depending on the
emulator you are using, you may need to task away from the app launcher/shell
screen to view the console. </p> </div>
<div id="GUID-467EE2A3-9D85-4909-9CB1-98C9CBCAA41D"><h3 class="section-title">See
also</h3> <p> <a href="GUID-993629CB-17B4-5E87-8DE1-06A4AC473FDD.html">RTP overview</a> </p> </div>
</div></div></div><div class="footer"><p class="metadata">Last updated November 15th, 2010</p><hr /><div class="copy">Â© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:15:22 GMT -->
</html>