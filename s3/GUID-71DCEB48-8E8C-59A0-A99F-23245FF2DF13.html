
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:01:23 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="timezoneconversion: Time Zone Conversion Example" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7" /><meta name="DC.Relation" scheme="URI" content="GUID-4FCF605D-52D9-5B2D-80CF-80C940F680CA" /><meta name="DC.Relation" scheme="URI" content="GUID-726E3025-173C-4A91-8959-49F11DACA92B" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13" /><meta name="DC.Language" content="en" /><title>timezoneconversion: Time Zone Conversion Example </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13">timezoneconversion: Time Zone Conversion Example</h1><div>
<div id="GUID-340A1745-6C2C-41E5-A637-346F32F11A21"><h3 class="section-title">Download</h3> <p>Click on the following link to download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-c9019536-b967-4421-8221-150afb121307.zip" target="_blank">TZExample.zip</a></p><p>Click: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-c9019536-b967-4421-8221-150afb121307.html#guid-6013a680-57f9-415b-8851-c4fa63356636/guid-c9019536-b967-4421-8221-150afb121307.html">browse</a> to view the example code. </p> </div>
<div id="GUID-A36EB85A-A039-4396-BF31-2780D57E85F7"><h3 class="section-title">Description</h3> <p>This example code first connects to the time zone server (class <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-052221AD-916E-3E47-9510-AC0495A19A70.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-052221AD-916E-3E47-9510-AC0495A19A70.html"><code class="apiname">RTz</code></a>). Then it uses <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-052221AD-916E-3E47-9510-AC0495A19A70.html#GUID-A7D33D36-8AA5-3775-B4B8-36C30EF88DB0"><code class="apiname">RTz::ConvertToLocalTime()</code></a> to convert a UTC time to local time. The time to convert and the
time zone to convert it to are randomly chosen. This demonstrates
that the time zone server can convert any time, past, present or future,
for any time zone, as long as a rule exists for the conversion. Conversion
rules are stored in a native Symbian database that is a compressed
form of the Olson time zone database (<a href="http://www.twinsun.com/tz/tz-link.htm" target="_blank">http://www.twinsun.com/tz/tz-link.htm</a>). The database can be configured by phone manufacturers to save
space. </p> <p>The example then converts the current local time for
the system time zone to the current local time for a different time
zone. This is a two stage process. First, the local time is converted
to UTC using <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-052221AD-916E-3E47-9510-AC0495A19A70.html#GUID-645162AA-631E-3125-A002-82EB8D91DB08"><code class="apiname">RTz::ConvertToUniversalTime()</code></a>. When
converting between local and UTC times for the current system time
zone, there is no need to specify the time zone ID. Then UTC is converted
to local time for the other time zone. Before the example terminates,
the connection to the server is closed. </p> <p>No special capabilities
are needed to do time zone conversion. </p> <p>Class <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0B5453C5-76A2-31B2-A32C-2CDC1F3367CE.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0B5453C5-76A2-31B2-A32C-2CDC1F3367CE.html"><code class="apiname">CTzId</code></a> identifies a time zone. It stores the identifier either as text,
(for instance Australia/Sydney), or as a number. Numeric time zone
IDs are assigned by the phone manufacturer, so can vary from phone
to phone. </p> <p>For efficiency, the time zone server caches a copy
of a range of conversion rules for the current time zone. These cached
rules are <em>actualised</em>, meaning they have been expanded from
the encoded compact format as stored in the database, so are quicker
to access. </p> <p>Class <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-37A4A4ED-FFF8-3C98-B028-EA1947EA7BEF.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-37A4A4ED-FFF8-3C98-B028-EA1947EA7BEF.html"><code class="apiname">CTzConverter</code></a>, which is
not used in this example, provides an alternative conversion API to <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-052221AD-916E-3E47-9510-AC0495A19A70.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-052221AD-916E-3E47-9510-AC0495A19A70.html"><code class="apiname">RTz</code></a>. It caches 5 years' worth of conversion rules for a
specific time zone (either the time zone specified in the conversion
function, or the system time zone), on the client side, so avoiding
the need for an an IPC call for each conversion. <code class="codeph">CTzConverter</code> is more efficient than <code class="codeph">RTz</code> when doing multiple
conversions for a single time zone. </p> </div>
<div id="GUID-A56CA8E4-4794-41A4-9C12-F5867525DD8C"><h3 class="section-title">Usage</h3><p> This is a console application, so does not have a GUI. It builds
an executable called<code> TZExample.exe</code> in the standard
location (<code>\epoc32\release\winscw\&lt;build_variant&gt;</code> for CodeWarrior). After launching the executable, depending on the
emulator you are using, you may need to task away from the app launcher/shell
screen to view the console.</p></div>
<div id="GUID-2E27B7FB-A188-450C-8BA3-485FFB63F66C"><h3 class="section-title">Class
Summary</h3><ul>
<li><p><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-052221AD-916E-3E47-9510-AC0495A19A70.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-052221AD-916E-3E47-9510-AC0495A19A70.html"><code class="apiname">RTz</code></a></p></li>
<li><p><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0B5453C5-76A2-31B2-A32C-2CDC1F3367CE.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0B5453C5-76A2-31B2-A32C-2CDC1F3367CE.html"><code class="apiname">CTzId</code></a></p></li>
<li><p><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-BE7D196E-357B-36BE-80BB-CCBBE00DFA90.html#GUID-C58E6A33-D690-3071-A93D-A2509D989AE4"><code class="apiname">ESock::TTime</code></a></p></li>
</ul></div>
</div></div></div><div class="footer"><p class="metadata">Last updated May 6th, 2010</p><hr /><div class="copy">Â© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:01:24 GMT -->
</html>