
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 05:50:59 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Reading Remote SDP Service Attributes" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-227B6970-A536-470F-B5A1-A1871F65D7F3" /><meta name="DC.Relation" scheme="URI" content="GUID-071A1E59-FE77-5D4D-B4D1-E6ECDF68BB03" /><meta name="DC.Relation" scheme="URI" content="GUID-EC7A9299-4272-5C1E-8A10-8267E154D56A" /><meta name="DC.Relation" scheme="URI" content="GUID-8D5E17DA-8EF1-52B4-9706-9836B8D6CE43" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032" /><meta name="DC.Language" content="en" /><title>Reading Remote SDP Service Attributes </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032">Reading Remote SDP Service Attributes</h1><div><p>The data for a service record is contained in attributes. Each attribute has a well-known ID, a type, and a value. </p> <p>Attribute requests take service record handles found as a result of service searches and return attributes. You can limit the attributes returned to a specific attribute, or to a range of IDs. </p> <div><h3 class="section-title">How to read service attributes</h3> <p>As with a service search, service attribute search results are returned through asynchronous callbacks to an <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-AD76DB7F-CD45-3903-A07A-E94BE583CDB0.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-AD76DB7F-CD45-3903-A07A-E94BE583CDB0.html"><code class="apiname">MSdpAgentNotifier</code></a> interface, which the querier must implement. </p> <p><strong>Basic Procedure</strong> </p> <p>The steps to read attributes are as follows: </p> <ol id="GUID-57B7E72F-16E6-5304-B860-900325A5F403"><li id="GUID-46729165-B8B4-58E6-AD3F-59A33C2083F9"><a name="GUID-46729165-B8B4-58E6-AD3F-59A33C2083F9"><!-- --></a><p>Create a <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-7DA0506B-F2C1-374B-847F-8DF070BD2FE9.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-7DA0506B-F2C1-374B-847F-8DF070BD2FE9.html"><code class="apiname">CSdpAttrIdMatchList</code></a> object in which to specify the attributes to be retrieved (called the match list). </p> </li> <li id="GUID-AEFC4866-2957-573D-A65A-F705FD5F6EB8"><a name="GUID-AEFC4866-2957-573D-A65A-F705FD5F6EB8"><!-- --></a><p>Add the attribute IDs to the match list using <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-7DA0506B-F2C1-374B-847F-8DF070BD2FE9.html#GUID-69FF9400-A3F9-3DCA-8231-8EAF019014F2"><code class="apiname">CSdpAttrIdMatchList::AddL()</code></a>. IDs are wrapped in a <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-E2E5E504-FB8E-38B3-80C8-C6C4946AD8C5.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-E2E5E504-FB8E-38B3-80C8-C6C4946AD8C5.html"><code class="apiname">TAttrRange</code></a> type, which can specify a single attribute or a range of IDs. </p> </li> <li id="GUID-81920A53-C0D4-57DF-BBDA-77FC6CDFA77B"><a name="GUID-81920A53-C0D4-57DF-BBDA-77FC6CDFA77B"><!-- --></a><p>Start the query by calling <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A33D6A1-63C8-3A15-A2BC-5D08F07C5AB6.html#GUID-5D0C3302-1D4B-3B55-94F8-29F97D74643A"><code class="apiname">CSdpAgent::AttributeRequestL()</code></a>. As well as the match list, specify the record handle of interest. </p> </li> </ol> <p><strong>Reading Remote Attributes</strong> </p> <p>The following code fragements may be used, in an appropriate context, to query a remote device's SDP database for the attribute indicated by the attribute UUID. The steps are given here: </p> <ol id="GUID-E445C4DC-DA70-5F68-A726-954D5B46C31B"><li id="GUID-2E12E6AA-E32B-55B4-98CA-2B8DBE654461"><a name="GUID-2E12E6AA-E32B-55B4-98CA-2B8DBE654461"><!-- --></a><p>Create a match list. </p> <p>The following code fragements assume <code class="codeph">agent</code> is a <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A33D6A1-63C8-3A15-A2BC-5D08F07C5AB6.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6A33D6A1-63C8-3A15-A2BC-5D08F07C5AB6.html"><code class="apiname">CSdpAgent</code></a>, and <code class="codeph">serviceHandle</code> a service record handle </p> <pre class="codeblock">CSdpAttrIdMatchList* matchList = CSdpAttrIdMatchList::NewL();
CleanupStack::PushL(matchList);</pre> </li> <li id="GUID-9A72886D-4E70-53FE-B806-6B8F4338979A"><a name="GUID-9A72886D-4E70-53FE-B806-6B8F4338979A"><!-- --></a><p>Add an attribute ID to match list. </p> <pre class="codeblock">matchList-&gt;AddL(TAttrRange(0x1000));</pre> </li> <li id="GUID-11A32341-09A3-5A25-9CAC-2F1A682772D3"><a name="GUID-11A32341-09A3-5A25-9CAC-2F1A682772D3"><!-- --></a><p>Set the match list on the agent. </p> <pre class="codeblock">agent-&gt;AttributeRequestL(serviceHandle, *matchList);

CleanupStack::PopAndDestroy(); //matchList</pre> </li> </ol> <p><strong>Note </strong> </p> <p> <code class="codeph">CSdpAgent::AttributeRequestL()</code> is an overloaded function. Some of the overloads allow you to supply an <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3DC9CB25-E55D-38E6-8940-B3320EF7E9DD.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3DC9CB25-E55D-38E6-8940-B3320EF7E9DD.html"><code class="apiname">MSdpElementBuilder</code></a> object: if it is supplied, then the object will be called with each type found in the response. </p> </div> <div><h3 class="section-title">Where next?</h3> <p>The complete set of Service Discovery Agent tutorials are shown below: </p> <ul><li id="GUID-96E64157-9833-538C-AA29-AE0AA0A2CD7F"><a name="GUID-96E64157-9833-538C-AA29-AE0AA0A2CD7F"><!-- --></a><p> <a href="GUID-275D7892-EEBD-5DBD-A9D7-F6A715B79659.html">Querying the SDP database</a> </p> </li> <li id="GUID-0FAD2FB2-A6BF-571B-9D4C-0AB05B4C8574"><a name="GUID-0FAD2FB2-A6BF-571B-9D4C-0AB05B4C8574"><!-- --></a><p> <strong>Reading remote SDP service attributes</strong> - This document </p> </li> <li id="GUID-DE096F8B-F1F8-5AD5-BC9F-A698129CC59F"><a name="GUID-DE096F8B-F1F8-5AD5-BC9F-A698129CC59F"><!-- --></a><p> <a href="GUID-65F8675F-FF08-5707-BA5B-BF3B4B779393.html">Handling SDP query results</a> </p> </li> </ul> <p>Also refer to the <a href="GUID-2F1C6B4C-2C23-5A35-A0D2-223EC6238F7D.html">Bluetooth Service Discovery Agent Overview</a> and the <a href="GUID-8451102A-8E68-5C86-9E40-D53183E32261.html">Bluetooth SDP Overview</a> for additional background information. </p> </div> </div></div></div><div class="footer"><p class="metadata">Last updated October 9th, 2009</p><hr /><div class="copy">Â© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 05:50:59 GMT -->
</html>