<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">

<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 07:58:55 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2011"/>
<meta name="DC.rights.owner" content="(C) Copyright 2011"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="CServer2"/>
<meta name="abstract" content=""/>
<meta name="description" content=""/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C"/>
<link rel="stylesheet" type="text/css" href="css/commonltr.css"/>
<title>CServer2</title>
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="css/nokiacxxref.css"/><link href="css/html.css" rel="stylesheet" type="text/css"/><link href="css/style.css" rel="stylesheet" type="text/css"/><link href="css/nwg.css" rel="stylesheet" type="text/css"/><link href="css/eclipse.css" rel="stylesheet" type="text/css"/></head>
<body id="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C"><a name="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C"><!-- --></a><div class="body"><div class="contentLeft prTxt">

	<h1 class="sectiontitle">CServer2 Class Reference</h1>
	
	<div class="section include"><p>#include 
            
                    &lt;e32base.h&gt;
                </p></div>
<div class="section signature"><table class="signature"><tr><td>class CServer2 : public CActive</td></tr></table></div><div class="section derivation"><h2 class="sectiontitle">Inherits from</h2><ul class="derivation derivation-root"><li class="derivation-depth-0 ">CServer2<ul class="derivation"><li class="derivation-depth-1 "><a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive</a><ul class="derivation"><li class="derivation-depth-2 "><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase</a></li></ul></li></ul></li></ul></div>
<div class="section member-index"><table class="member-index"><thead><tr><th colspan="2">Protected Attributes</th></tr></thead><tbody><tr><td align="right" valign="top" class="code">
					<a href="GUID-46C6F8E4-C7B5-39B2-A9E6-F022A924FF8C.html">TDblQueIter</a>&lt; <a href="GUID-D5A30C75-E22C-34E8-913B-7D2CA6AD5C51.html">CSession2</a> &gt;</td><td><a href="#GUID-A3C64284-CD54-3669-932C-E717193CFB12">iSessionIter</a></td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Public Member Enumerations</th></tr></thead><tbody><tr><td align="right" valign="top" class="code">enum</td><td><a href="#GUID-B8CF6E97-8678-3E77-9ACB-C27356471E1C">TPanic</a> { <a href="#GUID-72395025-640F-3AC7-A8D2-9BE90586C97D">EBadMessageNumber</a>, <a href="#GUID-25AD5F61-B85D-3958-98F1-962B35FD1BFD">ESessionNotConnected</a>, <a href="#GUID-B097A26E-B8EC-3759-85C2-C47AB46208B2">ESessionAlreadyConnected</a>, <a href="#GUID-1B615EFF-550D-34B2-832E-235DE4F9C42A">EClientDoesntHaveRequiredCaps</a> }</td></tr><tr class="bg"><td align="right" valign="top" class="code">enum</td><td><a href="#GUID-62425249-7A82-3D9E-8899-702D3B6475D9">TServerType</a> { <a href="#GUID-493C9161-4D6D-3DB7-B336-F28CD1CFDB03">EUnsharableSessions</a>, <a href="#GUID-EAC02470-7D60-3DEF-B080-8D7DF716D873">ESharableSessions</a>, <a href="#GUID-FA03DA04-5DAE-343A-857D-EAC988F2DFDE">EGlobalSharableSessions</a> }</td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">pure virtual </td><td><a href="#GUID-9A5074B3-3F22-3213-B382-720F2C2A75D8">~CServer2</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-BC69FE78-9DAE-3A04-A5A7-FAD1F8D8C157">ReStart</a>()</td></tr><tr><td align="right" class="code">
					<a href="GUID-5349904B-ACB2-3A03-B3B8-406DEA7CB80A.html">RServer2</a>
				</td><td><a href="#GUID-C1F428A3-0B1A-3096-BB2B-E3E598A16FE6">Server</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-51F669BC-08CE-399D-8A0A-3C9DE246EE84">SetMaster</a>(const <a href="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C.html">CServer2</a> *)</td></tr><tr><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-0D88DE89-A15D-3A25-A288-3F748CB753C6">SetPinClientDescriptors</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><a href="#GUID-B24E93E1-C7AD-305F-A38F-2FDB83D9342D">Start</a>(const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;)</td></tr><tr><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-35FFDAB7-044B-3648-ABB9-2FB04314D261">StartL</a>(const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;)</td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Protected Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-FD932034-24C2-311A-B438-789F7E48097B">CServer2</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a href="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C.html">TServerType</a>)</td></tr><tr class="bg"><td align="right" class="code">virtual IMPORT_C void</td><td><a href="#GUID-CE3D6B63-BE97-3498-81E2-23CD7B186F5C">DoCancel</a>()</td></tr><tr><td align="right" class="code">virtual IMPORT_C void</td><td><a href="#GUID-C1462925-DCBC-3D81-9161-E59A847EE8C2">DoConnect</a>(const <a href="GUID-D7D422D3-65E5-378B-8F52-6485BC5603A0.html">RMessage2</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">virtual IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><a href="#GUID-852744CD-721F-3A71-9D39-5783C3BF0DD7">Extension_</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a>, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *&amp;, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *)</td></tr><tr><td align="right" class="code">const <a href="GUID-D7D422D3-65E5-378B-8F52-6485BC5603A0.html">RMessage2</a> &amp;</td><td><a href="#GUID-528B81A5-4F90-38CB-81B2-ADFB478289A3">Message</a>()</td></tr><tr class="bg"><td align="right" class="code">virtual IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><a href="#GUID-D33A1DFA-47F6-36F3-BD77-0073727A4BCF">RunError</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>)</td></tr><tr><td align="right" class="code">virtual IMPORT_C void</td><td><a href="#GUID-2F93CF2B-6823-313A-95E4-433AB9A3711C">RunL</a>()</td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Inherited Attributes</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::iStatus</a></td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Inherited Enumerations</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive:TPriority</a></td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Inherited Functions</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::CActive(TInt)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::Cancel()</a></td></tr><tr><td> </td><td><a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::Deque()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::IsActive()const</a></td></tr><tr><td> </td><td><a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::IsAdded()const</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::Priority()const</a></td></tr><tr><td> </td><td><a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::SetActive()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::SetPriority(TInt)</a></td></tr><tr><td> </td><td><a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::~CActive()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::CBase()</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Delete(CBase *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave,TUint)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TUint)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::~CBase()</a></td></tr></tbody></table></div><div class="section apidesc"><h2 class="sectiontitle">Detailed Description</h2>
			<p>Abstract base class for servers (version 2).</p>

			<p>This is an active object. It accepts requests from client threads and forwards them to the relevant server-side client session. It also handles the creation of server-side client sessions as a result of requests from client threads.</p>

			<p>A server must define and implement a derived class.</p>

			<p>(Note that this class should be used instead of CServer) </p>

		</div>
<h2 class="sectiontitle">Member Attribute Documentation</h2><div class="nested1" id="GUID-A3C64284-CD54-3669-932C-E717193CFB12"><a name="GUID-A3C64284-CD54-3669-932C-E717193CFB12"><!-- --></a>
		<h3 class="sectiontitle">iSessionIter</h3>
		
		<div class="section signature"><table class="signature"><tr><td>
					<a href="GUID-46C6F8E4-C7B5-39B2-A9E6-F022A924FF8C.html">TDblQueIter</a>&lt; <a href="GUID-D5A30C75-E22C-34E8-913B-7D2CA6AD5C51.html">CSession2</a> &gt;</td><td>iSessionIter</td><td>[protected]</td></tr></table></div><div class="section apidesc"/>

	</div>
<h2 class="sectiontitle">Member Enumeration Documentation</h2><div class="nested1" id="GUID-B8CF6E97-8678-3E77-9ACB-C27356471E1C"><a name="GUID-B8CF6E97-8678-3E77-9ACB-C27356471E1C"><!-- --></a>
		<h3 class="sectiontitle">Enum TPanic</h3>
		
		<div class="section enumerationdetail"><div class="section apidesc"/>
<div class="section enumerators"><table class="enumerators"><thead><tr><th>Enumerator</th><th>Value</th><th>Description</th></tr></thead><tr><td><a name="GUID-72395025-640F-3AC7-A8D2-9BE90586C97D"/><span class="enumerator">EBadMessageNumber</span></td><td/><td> </td></tr><tr class="bg"><td><a name="GUID-25AD5F61-B85D-3958-98F1-962B35FD1BFD"/><span class="enumerator">ESessionNotConnected</span></td><td/><td> </td></tr><tr><td><a name="GUID-B097A26E-B8EC-3759-85C2-C47AB46208B2"/><span class="enumerator">ESessionAlreadyConnected</span></td><td/><td> </td></tr><tr class="bg"><td><a name="GUID-1B615EFF-550D-34B2-832E-235DE4F9C42A"/><span class="enumerator">EClientDoesntHaveRequiredCaps</span></td><td/><td> </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-62425249-7A82-3D9E-8899-702D3B6475D9"><a name="GUID-62425249-7A82-3D9E-8899-702D3B6475D9"><!-- --></a>
		<h3 class="sectiontitle">Enum TServerType</h3>
		
		<div class="section enumerationdetail"><div class="section apidesc">
				<p>This enumeration defines the maximum sharability of sessions opened with this server; for backwards compatibilty, these should be have the same values as the corresponding EIpcSessionType enumeration </p>

			</div>
<div class="section enumerators"><table class="enumerators"><thead><tr><th>Enumerator</th><th>Value</th><th>Description</th></tr></thead><tr><td><a name="GUID-493C9161-4D6D-3DB7-B336-F28CD1CFDB03"/><span class="enumerator">EUnsharableSessions</span></td><td>EIpcSession_Unsharable</td><td> </td></tr><tr class="bg"><td><a name="GUID-EAC02470-7D60-3DEF-B080-8D7DF716D873"/><span class="enumerator">ESharableSessions</span></td><td>EIpcSession_Sharable</td><td> </td></tr><tr><td><a name="GUID-FA03DA04-5DAE-343A-857D-EAC988F2DFDE"/><span class="enumerator">EGlobalSharableSessions</span></td><td>EIpcSession_GlobalSharable</td><td> </td></tr></table></div>
</div>

	</div>
<h2 class="sectiontitle">Constructor &amp; Destructor Documentation</h2><div class="nested1" id="GUID-FD932034-24C2-311A-B438-789F7E48097B"><a name="GUID-FD932034-24C2-311A-B438-789F7E48097B"><!-- --></a>
		<a name="GUID-AC4A0CDF-A067-3E86-B11C-DD6ADEA62BD8"><!----></a><h3 class="sectiontitle">CServer2 ( TInt, TServerType )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C</td><td>CServer2</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aPriority</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C.html">TServerType</a></td><td><span class="parameter">aType</span> = EUnsharableSessions</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[protected]</td></tr></table></div><div class="section apidesc">
				<p>Constructs the server object, specifying the server type and the active object priority.</p>

				<p>Derived classes must define and implement a constructor through which the priority can be specified. A typical implementation calls this server base class constructor through a constructor initialization list.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aPriority</td><td>The priority of this active object.  </td></tr><tr class="bg"><td class="parameter">aType</td><td>Indicates the type of session that the server creates. If not explicitly stated, then the server creates a session that is not sharable with other threads.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-9A5074B3-3F22-3213-B382-720F2C2A75D8"><a name="GUID-9A5074B3-3F22-3213-B382-720F2C2A75D8"><!-- --></a>
		<h3 class="sectiontitle">~CServer2 (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C</td><td>~CServer2</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>Frees resources prior to destruction.</p>

				<p>Specifically, it cancels any outstanding request for messages, and deletes all server-side client session objects. </p>

			</div>
</div>

	</div>
<h2 class="sectiontitle">Member Function Documentation</h2><div class="nested1" id="GUID-CE3D6B63-BE97-3498-81E2-23CD7B186F5C"><a name="GUID-CE3D6B63-BE97-3498-81E2-23CD7B186F5C"><!-- --></a>
		<h3 class="sectiontitle">DoCancel (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>DoCancel</td><td>(</td><td>)</td><td>[protected, virtual]</td></tr></table></div><div><p>Reimplemented from <a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::DoCancel()</a></p></div><div class="section apidesc">
				<p>Implements the cancellation of any outstanding request for messages. </p>

			</div>
</div>

	</div>
<div class="nested1" id="GUID-C1462925-DCBC-3D81-9161-E59A847EE8C2"><a name="GUID-C1462925-DCBC-3D81-9161-E59A847EE8C2"><!-- --></a>
		<a name="GUID-0D08C27F-FA5F-3437-870B-7742DE5B58AB"><!----></a><h3 class="sectiontitle">DoConnect ( const RMessage2 &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>DoConnect</td><td>(</td><td>const <a href="GUID-D7D422D3-65E5-378B-8F52-6485BC5603A0.html">RMessage2</a> &amp;</td><td><span class="parameter">aMessage</span></td><td>)</td><td>[protected, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Handles the connect request from the client. We trap Leaves, to ensure that existing sessions aren't affected by failure to create a new one.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aMessage</td><td>The Connect message sent by the client requesting the connection. aMessage.Ptr0() is the required Version.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-852744CD-721F-3A71-9D39-5783C3BF0DD7"><a name="GUID-852744CD-721F-3A71-9D39-5783C3BF0DD7"><!-- --></a>
		<a name="GUID-22C6F0EC-B303-323A-826F-B64DD573164D"><!----></a><h3 class="sectiontitle">Extension_ ( TUint, TAny *&amp;, TAny * )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>Extension_</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a></td><td><span class="parameter">aExtensionId</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *&amp;</td><td><span class="parameter">a0</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *</td><td><span class="parameter">a1</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[protected, virtual]</td></tr></table></div><div><p>Reimplemented from <a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::Extension_(TUint,TAny *&amp;,TAny *)</a></p></div><div class="section apidesc">
				<p>Extension function </p>

			</div>
<div class="section parameters"/>
</div>

	</div>
<div class="nested1" id="GUID-528B81A5-4F90-38CB-81B2-ADFB478289A3"><a name="GUID-528B81A5-4F90-38CB-81B2-ADFB478289A3"><!-- --></a>
		<h3 class="sectiontitle">Message (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>const <a href="GUID-D7D422D3-65E5-378B-8F52-6485BC5603A0.html">RMessage2</a> &amp;</td><td>Message</td><td>(</td><td>)</td><td>const [protected, inline]</td></tr></table></div><div class="section apidesc">
				<p>Gets a reference to the server's current message.</p>

				<p/>

			</div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">The current message that contains the client request details. </span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-BC69FE78-9DAE-3A04-A5A7-FAD1F8D8C157"><a name="GUID-BC69FE78-9DAE-3A04-A5A7-FAD1F8D8C157"><!-- --></a>
		<h3 class="sectiontitle">ReStart (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>ReStart</td><td>(</td><td>)</td><td/></tr></table></div><div class="section apidesc">
				<p>Restarts the server.</p>

				<p>The function issues a request for messages. </p>

			</div>
</div>

	</div>
<div class="nested1" id="GUID-D33A1DFA-47F6-36F3-BD77-0073727A4BCF"><a name="GUID-D33A1DFA-47F6-36F3-BD77-0073727A4BCF"><!-- --></a>
		<a name="GUID-B25E032B-0AF4-3767-85BC-E71B5F551176"><!----></a><h3 class="sectiontitle">RunError ( TInt )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>RunError</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aError</span></td><td>)</td><td>[protected, virtual]</td></tr></table></div><div><p>Reimplemented from <a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::RunError(TInt)</a></p></div><div class="section apidesc">
				<p>Handles the situation where a call to <a href="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C.html#GUID-2F93CF2B-6823-313A-95E4-433AB9A3711C">CServer2::RunL()</a>, leaves.</p>

				<p>This is the server active object's implementation of the active object framework's <a href="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C.html#GUID-D33A1DFA-47F6-36F3-BD77-0073727A4BCF">RunError()</a> function.</p>

				<p>In practice, the leave can only be caused by a session's ServiceL() function, which is called from this <a href="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C.html#GUID-2F93CF2B-6823-313A-95E4-433AB9A3711C">RunL()</a>; this error is reflected back to that session by calling its ServiceError() function.</p>

				<p/>

				<p>See also: <a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html#GUID-5D018F25-5173-36C1-A0B9-5C3A33211C5D">CActive::RunL()</a> <a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html#GUID-49FE8001-39DC-389F-851D-44C74BCE55D2">CActive::RunError()</a> <a href="GUID-D5A30C75-E22C-34E8-913B-7D2CA6AD5C51.html#GUID-ACB9F4CA-1A7D-3D29-9346-687563BD63B5">CSession2::ServiceError()</a> </p>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aError</td><td>The leave code. </td></tr></table></div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">KErrNone.</span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-2F93CF2B-6823-313A-95E4-433AB9A3711C"><a name="GUID-2F93CF2B-6823-313A-95E4-433AB9A3711C"><!-- --></a>
		<h3 class="sectiontitle">RunL (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>RunL</td><td>(</td><td>)</td><td>[protected, virtual]</td></tr></table></div><div><p>Reimplemented from <a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::RunL()</a></p></div><div class="section apidesc">
				<p>Handles the receipt of a message. </p>

			</div>
</div>

	</div>
<div class="nested1" id="GUID-C1F428A3-0B1A-3096-BB2B-E3E598A16FE6"><a name="GUID-C1F428A3-0B1A-3096-BB2B-E3E598A16FE6"><!-- --></a>
		<h3 class="sectiontitle">Server (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>
					<a href="GUID-5349904B-ACB2-3A03-B3B8-406DEA7CB80A.html">RServer2</a>
				</td><td>Server</td><td>(</td><td>)</td><td>const [inline]</td></tr></table></div><div class="section apidesc">
				<p>Gets a handle to the server.</p>

				<p>Note that the <a href="GUID-5349904B-ACB2-3A03-B3B8-406DEA7CB80A.html#GUID-5349904B-ACB2-3A03-B3B8-406DEA7CB80A">RServer2</a> object is classified as Symbian internal, and its member functions cannot be acessed. However, the handle can be passed to the <a href="GUID-6D8A458C-9A39-3000-A3BC-060A2A3663E6.html#GUID-9ADB8E8B-9466-3E13-942B-54AA9316A54B">RSessionBase::CreateSession()</a> variants that take a server handle.</p>

				<p/>

			</div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">The handle to the server. </span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-51F669BC-08CE-399D-8A0A-3C9DE246EE84"><a name="GUID-51F669BC-08CE-399D-8A0A-3C9DE246EE84"><!-- --></a>
		<a name="GUID-8A5ABECF-AA2A-31AB-90CB-BF27CFF4D77C"><!----></a><h3 class="sectiontitle">SetMaster ( const CServer2 * )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>SetMaster</td><td>(</td><td>const <a href="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C.html">CServer2</a> *</td><td><span class="parameter">aServer</span></td><td>)</td><td/></tr></table></div><div class="section apidesc">
				<p>Assigns a role (master or slave) for this server.</p>

				<p>The master server is typically named, and receives all Connect messages from clients. It can hand off some sessions to be processed by one or more anonymous slave servers, each running in a separate thread.</p>

				<p>Both master and slave servers must call this function before calling <a href="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C.html#GUID-B24E93E1-C7AD-305F-A38F-2FDB83D9342D">Start()</a>, in order to define their roles. Once the server is started, its role cannot be changed.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>panic</strong>
							</dt>

							<dd>E32USER-CBase-? When this method is invoked after the server has been started. </dd>

						
					</dl>

				</div>

				<p>See also: <a href="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C.html#GUID-B24E93E1-C7AD-305F-A38F-2FDB83D9342D">CServer2::Start()</a></p>

			</div>
<div class="section parameters"/>
</div>

	</div>
<div class="nested1" id="GUID-0D88DE89-A15D-3A25-A288-3F748CB753C6"><a name="GUID-0D88DE89-A15D-3A25-A288-3F748CB753C6"><!-- --></a>
		<a name="GUID-0114808B-81D9-39BA-98B5-7F685C6673F4"><!----></a><h3 class="sectiontitle">SetPinClientDescriptors ( TBool )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>SetPinClientDescriptors</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td><span class="parameter">aPin</span></td><td>)</td><td/></tr></table></div><div class="section apidesc">
				<p>Sets whether the kernel will pin descriptors passed to this server in the context of the client thread.</p>

				<p>Setting this is one way of ensuring that the server will not take page faults when accessing client descriptors, which would otherwise happen if the data was paged out.</p>

				<p>This method overrides the default pinning policy of the server which is for the server to pin its client's descriptors if the process creating the server is not data paged. I.e. if <a href="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C.html#GUID-0D88DE89-A15D-3A25-A288-3F748CB753C6">CServer2::SetPinClientDescriptors()</a> is not invoked on the server and <a href="GUID-9DD1EA2B-DC59-315C-8E9C-CE6D9461B695.html#GUID-E09712D3-D9C1-3901-8C30-BFCDD6A9F6C3">RProcess::DefaultDataPaged()</a> of the process creating the server returns EFalse, the server will pin its client's descriptors, otherwise the server will not pin its client's descriptors.</p>

				<p>This method must be called prior to starting the server by calling the <a href="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C.html#GUID-B24E93E1-C7AD-305F-A38F-2FDB83D9342D">Start()</a> method.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>panic</strong>
							</dt>

							<dd>E32USER-CBase 106 When this method is invoked after the server has been started. </dd>

						
					</dl>

				</div>

				<p>See also: <a href="GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C.html#GUID-B24E93E1-C7AD-305F-A38F-2FDB83D9342D">CServer2::Start()</a></p>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aPin</td><td>Set to ETrue for the server to pin its client's descriptors, set to EFalse otherwise.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-B24E93E1-C7AD-305F-A38F-2FDB83D9342D"><a name="GUID-B24E93E1-C7AD-305F-A38F-2FDB83D9342D"><!-- --></a>
		<a name="GUID-3B6AC8A4-251C-39A7-BFB2-30AD454DF590"><!----></a><h3 class="sectiontitle">Start ( const TDesC &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>Start</td><td>(</td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td><span class="parameter">aName</span></td><td>)</td><td/></tr></table></div><div class="section apidesc">
				<p>Adds the server with the specified name to the active scheduler, and issues the first request for messages.</p>

				<p>If KNullDesC is specified for the name, then an anonymous server will be created. To create a session to such a server, an overload of <a href="GUID-6D8A458C-9A39-3000-A3BC-060A2A3663E6.html#GUID-9ADB8E8B-9466-3E13-942B-54AA9316A54B">RSessionBase::CreateSession()</a> which takes <a href="GUID-5349904B-ACB2-3A03-B3B8-406DEA7CB80A.html#GUID-5349904B-ACB2-3A03-B3B8-406DEA7CB80A">RServer2</a> object as a parameter can be used.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>capability</strong>
							</dt>

							<dd>ProtServ if aName starts with a '!' character </dd>

						
					</dl>

				</div>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aName</td><td>The name of the server. KNullDesC, to create anonymous servers.  </td></tr></table></div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">KErrNone, if successful, otherwise one of the other system wide error codes.</span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-35FFDAB7-044B-3648-ABB9-2FB04314D261"><a name="GUID-35FFDAB7-044B-3648-ABB9-2FB04314D261"><!-- --></a>
		<a name="GUID-9E3CA9FF-94C0-3F93-BBFA-2924CC56DADA"><!----></a><h3 class="sectiontitle">StartL ( const TDesC &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>StartL</td><td>(</td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td><span class="parameter">aName</span></td><td>)</td><td/></tr></table></div><div class="section apidesc">
				<p>Adds the server with the specified name to the active scheduler, and issues the first request for messages, and leaves if the operation fails.</p>

				<p>If KNullDesC is specified for the name, then an anonymous server will be created. To create a session to such a server, the overload of <a href="GUID-6D8A458C-9A39-3000-A3BC-060A2A3663E6.html#GUID-9ADB8E8B-9466-3E13-942B-54AA9316A54B">RSessionBase::CreateSession()</a> which takes an <a href="GUID-5349904B-ACB2-3A03-B3B8-406DEA7CB80A.html#GUID-5349904B-ACB2-3A03-B3B8-406DEA7CB80A">RServer2</a> object as a parameter can be used.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>capability</strong>
							</dt>

							<dd>ProtServ if aName starts with a '!' character </dd>

						
					</dl>

				</div>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aName</td><td>The name of the server. KNullDesC, to create anonymous servers.  </td></tr></table></div>
</div>

	</div>

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</div></div><div class="footer"><hr/><div class="copy">© Nokia 2011.</div></div>
</body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-8E316AC4-4676-301A-9A23-659E83AA1D1C.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 07:58:55 GMT -->
</html>