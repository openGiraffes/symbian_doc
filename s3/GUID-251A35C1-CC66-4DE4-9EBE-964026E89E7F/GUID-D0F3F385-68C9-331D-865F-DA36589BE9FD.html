<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">

<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-D0F3F385-68C9-331D-865F-DA36589BE9FD.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 08:02:37 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2011"/>
<meta name="DC.rights.owner" content="(C) Copyright 2011"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="MDevSoundObserver"/>
<meta name="abstract" content=""/>
<meta name="description" content=""/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-D0F3F385-68C9-331D-865F-DA36589BE9FD"/>
<link rel="stylesheet" type="text/css" href="css/commonltr.css"/>
<title>MDevSoundObserver</title>
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="css/nokiacxxref.css"/><link href="css/html.css" rel="stylesheet" type="text/css"/><link href="css/style.css" rel="stylesheet" type="text/css"/><link href="css/nwg.css" rel="stylesheet" type="text/css"/><link href="css/eclipse.css" rel="stylesheet" type="text/css"/></head>
<body id="GUID-D0F3F385-68C9-331D-865F-DA36589BE9FD"><a name="GUID-D0F3F385-68C9-331D-865F-DA36589BE9FD"><!-- --></a><div class="body"><div class="contentLeft prTxt">

	<h1 class="sectiontitle">MDevSoundObserver Class Reference</h1>
	
	<div class="section include"><p>#include 
            
                    &lt;mmf/server/sounddevice.h&gt;
                </p></div>
<div class="section linkagainst" id="GUID-D0F3F385-68C9-331D-865F-DA36589BE9FD__linkagainst"><a name="GUID-D0F3F385-68C9-331D-865F-DA36589BE9FD__linkagainst"><!-- --></a><p>Link against: AdvancedAudioController.lib</p></div>
<div class="section signature"><table class="signature"><tr><td>class MDevSoundObserver</td></tr></table></div><div class="section member-index"><table class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">pure virtual void</td><td><a href="#GUID-B07D8FF9-A223-3416-A9D0-7896326051BC">BufferToBeEmptied</a>(<a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html">CMMFBuffer</a> *)</td></tr><tr class="bg"><td align="right" class="code">pure virtual void</td><td><a href="#GUID-3BF7D30D-2DFC-383F-A2DE-A02B0A53C44F">BufferToBeFilled</a>(<a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html">CMMFBuffer</a> *)</td></tr><tr><td align="right" class="code">pure virtual void</td><td><a href="#GUID-37031CB8-099E-32F8-98B0-5639CA093DEC">ConvertError</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>)</td></tr><tr class="bg"><td align="right" class="code">pure virtual void</td><td><a href="#GUID-E5ADC08A-A955-30E7-A1A6-7AF0776FED67">DeviceMessage</a>(<a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a>, const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;)</td></tr><tr><td align="right" class="code">pure virtual void</td><td><a href="#GUID-73FED260-30FE-313A-8F48-8806F05FA403">InitializeComplete</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>)</td></tr><tr class="bg"><td align="right" class="code">pure virtual void</td><td><a href="#GUID-5226D1B4-42A3-34D1-A00B-A1A2C120A896">PlayError</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>)</td></tr><tr><td align="right" class="code">pure virtual void</td><td><a href="#GUID-EE6404E0-AE51-324D-83EC-6C8ED7429042">RecordError</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>)</td></tr><tr class="bg"><td align="right" class="code">virtual void</td><td><a href="#GUID-A5EB97DB-CE16-3BDB-AFC3-7D87188B991D">SendEventToClient</a>(const <a href="GUID-759E8D08-D8BE-3450-9C2A-CE42A6C395EB.html">TMMFEvent</a> &amp;)</td></tr><tr><td align="right" class="code">pure virtual void</td><td><a href="#GUID-8AD3FCA2-84C3-3BFC-B0A9-CEAF132D0BF5">ToneFinished</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>)</td></tr></tbody></table></div><div class="section apidesc"><h2 class="sectiontitle">Detailed Description</h2>
			<p>An interface to a set of DevSound callback functions.</p>

			<p>This serves as the method of communication between the client and the DevSound.</p>

			<p>The class is a mixin and is intended to be inherited by the client class that is interested in observing the DevSound operation. The functions encapsulated by this class are called when specific events occur in the process of initializing and playing/recording an audio sample or playing tones. </p>

		</div>
<h2 class="sectiontitle">Member Function Documentation</h2><div class="nested1" id="GUID-B07D8FF9-A223-3416-A9D0-7896326051BC"><a name="GUID-B07D8FF9-A223-3416-A9D0-7896326051BC"><!-- --></a>
		<a name="GUID-0E4EB9DB-B802-3CE0-979A-F41767BFD017"><!----></a><h3 class="sectiontitle">BufferToBeEmptied ( CMMFBuffer * )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>BufferToBeEmptied</td><td>(</td><td><a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html">CMMFBuffer</a> *</td><td><span class="parameter">aBuffer</span></td><td>)</td><td>[pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>Handles <a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object's data request event.</p>

				<p>A derived class must provide an implementation to process the data supplied by <a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object while recording or converting.</p>

				<p>
					<a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object calls this function when the buffer, aBuffer gets filled while recording or converting. The observer should notify <a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object as quickly as possible after data in the buffer is processed by calling RecordData(), otherwise the implementation might callback the function <a href="GUID-D0F3F385-68C9-331D-865F-DA36589BE9FD.html#GUID-EE6404E0-AE51-324D-83EC-6C8ED7429042">RecordError()</a> on derived class object with error code KErrOverflow.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aBuffer</td><td>Buffer containing processed (recorded or converted) data. The amount of data that is available is specified in CMMFBuffer::RequestSize().  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-3BF7D30D-2DFC-383F-A2DE-A02B0A53C44F"><a name="GUID-3BF7D30D-2DFC-383F-A2DE-A02B0A53C44F"><!-- --></a>
		<a name="GUID-FBB7A51D-771C-3820-80A6-1297F98CDCFF"><!----></a><h3 class="sectiontitle">BufferToBeFilled ( CMMFBuffer * )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>BufferToBeFilled</td><td>(</td><td><a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html">CMMFBuffer</a> *</td><td><span class="parameter">aBuffer</span></td><td>)</td><td>[pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>Handles <a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object's data request event.</p>

				<p>A derived class must provide an implementation to supply <a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object the data that it needs to play or convert.</p>

				<p>
					<a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object calls this function when and where it needs data for playing or converting. The observer should notify <a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object as quickly as possible after the data is read into buffer, aBuffer by calling PlayData(), otherwise the implementation might callback function <a href="GUID-D0F3F385-68C9-331D-865F-DA36589BE9FD.html#GUID-5226D1B4-42A3-34D1-A00B-A1A2C120A896">PlayError()</a> on derived class object with error code KErrUnderflow. This does not apply to the very first call to PlayData(), however. It is possible for a user of DevSound to hold the first buffer sent in <a href="GUID-D0F3F385-68C9-331D-865F-DA36589BE9FD.html#GUID-3BF7D30D-2DFC-383F-A2DE-A02B0A53C44F">BufferToBeFilled()</a> until ready to play. The use case for this is if a low latency audio response is required, as at this point all the resources used to play audio are open. If used in this way then it is important to be aware that when when the resources for audio are ready at the <a href="GUID-D0F3F385-68C9-331D-865F-DA36589BE9FD.html#GUID-3BF7D30D-2DFC-383F-A2DE-A02B0A53C44F">BufferToBeFilled()</a> callback, a Devsound on a real device will be running at increased power consumption as the audio hw and any required DSPs will be powered up etc.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aBuffer</td><td>Buffer into which data should be read. The amount of data that is needed is specified in CMMFBuffer::RequestSize().  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-37031CB8-099E-32F8-98B0-5639CA093DEC"><a name="GUID-37031CB8-099E-32F8-98B0-5639CA093DEC"><!-- --></a>
		<a name="GUID-BA8C3534-960C-375F-935B-E867F6CB6E24"><!----></a><h3 class="sectiontitle">ConvertError ( TInt )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>ConvertError</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aError</span></td><td>)</td><td>[pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>Handles conversion completion or cancel event.</p>

				<p>A derived class must provide an implementation to handle the conversion completion or cancel request.</p>

				<p>
					<a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object calls this function when an attempt to convert data from source format to destination format has completed, successfully or otherwise.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aError</td><td>Error code. KErrCancel conversion operation is cancelled. KErrNone conversion is complete. Other values are possible indicating a problem converting data.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-E5ADC08A-A955-30E7-A1A6-7AF0776FED67"><a name="GUID-E5ADC08A-A955-30E7-A1A6-7AF0776FED67"><!-- --></a>
		<a name="GUID-F7494D86-FC37-3A09-A22C-1986ADA586C9"><!----></a><h3 class="sectiontitle">DeviceMessage ( TUid, const TDesC8 &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>DeviceMessage</td><td>(</td><td><a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a></td><td><span class="parameter">aMessageType</span>,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td><span class="parameter">aMsg</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>Handles device event.</p>

				<p>A derived class must provide an implementtion to handle the messages from audio hardware device.</p>

				<p>
					<a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object calls this function when a message is received from the audio hardware device.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aMessageType</td><td>Defines the type of message. Used to determine how to interpret the contents of aMsg.  </td></tr><tr class="bg"><td class="parameter">aMsg</td><td>Message that is packed in the Descriptor format.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-73FED260-30FE-313A-8F48-8806F05FA403"><a name="GUID-73FED260-30FE-313A-8F48-8806F05FA403"><!-- --></a>
		<a name="GUID-089CF9C1-92EF-3F40-8669-A5EF5C064AD4"><!----></a><h3 class="sectiontitle">InitializeComplete ( TInt )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>InitializeComplete</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aError</span></td><td>)</td><td>[pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>Handles initialization completion event.</p>

				<p>A derived class must provide an implementation to handle the initialization request.</p>

				<p>
					<a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object calls this function when its InitializeL() function completes.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aError</td><td>Error code. KErrNone if successful. Other values are possible indicating a problem initializing CMMFDevSound object.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-5226D1B4-42A3-34D1-A00B-A1A2C120A896"><a name="GUID-5226D1B4-42A3-34D1-A00B-A1A2C120A896"><!-- --></a>
		<a name="GUID-E30D0EE3-F594-32B5-B8D8-9E492C5985D7"><!----></a><h3 class="sectiontitle">PlayError ( TInt )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>PlayError</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aError</span></td><td>)</td><td>[pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>Handles play completion or cancel event.</p>

				<p>A derived class must provide an implementation to handle the play completion or cancel request.</p>

				<p>
					<a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object calls this function when an attempt to play audio sample has completed, successfully or otherwise.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aError</td><td>Error code. The status of playback. KErrUnderflow playing of the audio sample is complete. KErrAccessDenied the sound device is in use by another higher priority client.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-EE6404E0-AE51-324D-83EC-6C8ED7429042"><a name="GUID-EE6404E0-AE51-324D-83EC-6C8ED7429042"><!-- --></a>
		<a name="GUID-D3EB5208-94CD-3443-84E2-FD7AA9758AAC"><!----></a><h3 class="sectiontitle">RecordError ( TInt )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>RecordError</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aError</span></td><td>)</td><td>[pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>Handles record completion or cancel event.</p>

				<p>A derived class must provide an implementation to handle the record completion or cancel request.</p>

				<p>
					<a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object calls this function when an attempt to record audio sample has completed, successfully or otherwise.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aError</td><td>Error code. The status of recording. KErrOverflow audio devices runs out of internal buffer. KErrAccessDenied the sound device is in use by another higher priority client.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-A5EB97DB-CE16-3BDB-AFC3-7D87188B991D"><a name="GUID-A5EB97DB-CE16-3BDB-AFC3-7D87188B991D"><!-- --></a>
		<a name="GUID-0D91950A-A11C-3A86-84F4-1D0D0539C63D"><!----></a><h3 class="sectiontitle">SendEventToClient ( const TMMFEvent &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>SendEventToClient</td><td>(</td><td>const <a href="GUID-759E8D08-D8BE-3450-9C2A-CE42A6C395EB.html">TMMFEvent</a> &amp;</td><td><span class="parameter">aEvent</span></td><td>)</td><td>[inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Handles policy request completion event.</p>

				<p>A derived class must provide an implementation to handle the policy request completion event.</p>

				<p>
					<a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object calls this function when an attempt to acquire sound device is rejected by audio policy server.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aEvent</td><td>Not used  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-8AD3FCA2-84C3-3BFC-B0A9-CEAF132D0BF5"><a name="GUID-8AD3FCA2-84C3-3BFC-B0A9-CEAF132D0BF5"><!-- --></a>
		<a name="GUID-F89960BE-A51C-3148-AF19-58303BF5250F"><!----></a><h3 class="sectiontitle">ToneFinished ( TInt )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>ToneFinished</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aError</span></td><td>)</td><td>[pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>Handles tone play completion event.</p>

				<p>A derived class must provide an implementation to handle the tone play completion request.</p>

				<p>
					<a href="GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD.html#GUID-B3E9B015-1413-35A6-A316-D1C01C1001AD">CMMFDevSound</a> object calls this function when an attempt to play tone has completed, successfully or otherwise.</p>

				<p>The following are the play tone functions; PlayToneL(), PlayDMTFStringL(), PlayToneSequenceL(), and PlayFixedSequenceL().</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aError</td><td>Error code. The status of tone playback. KErrUnderflow playing of the tone is complete. KErrAccessDenied the sound device is in use by another higher priority client. KErrCancel playing of the audio sample is stopped by DevSound client another higher priority client.  </td></tr></table></div>
</div>

	</div>

	
	
	
	
	
	
	
	
	
</div></div><div class="footer"><hr/><div class="copy">© Nokia 2011.</div></div>
</body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-D0F3F385-68C9-331D-865F-DA36589BE9FD.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 08:02:37 GMT -->
</html>