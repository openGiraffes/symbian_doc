<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">

<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 07:59:26 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2011"/>
<meta name="DC.rights.owner" content="(C) Copyright 2011"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="CDirScan"/>
<meta name="abstract" content=""/>
<meta name="description" content=""/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB"/>
<link rel="stylesheet" type="text/css" href="css/commonltr.css"/>
<title>CDirScan</title>
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="css/nokiacxxref.css"/><link href="css/html.css" rel="stylesheet" type="text/css"/><link href="css/style.css" rel="stylesheet" type="text/css"/><link href="css/nwg.css" rel="stylesheet" type="text/css"/><link href="css/eclipse.css" rel="stylesheet" type="text/css"/></head>
<body id="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB"><a name="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB"><!-- --></a><div class="body"><div class="contentLeft prTxt">

	<h1 class="sectiontitle">CDirScan Class Reference</h1>
	
	<div class="section include"><p>#include 
            
                    &lt;f32file.h&gt;
                </p></div>
<div class="section linkagainst" id="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB__linkagainst"><a name="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB__linkagainst"><!-- --></a><p>Link against: efsrv.lib</p></div>
<div class="section signature"><table class="signature"><tr><td>class CDirScan : public CBase</td></tr></table></div><div class="section derivation"><h2 class="sectiontitle">Inherits from</h2><ul class="derivation derivation-root"><li class="derivation-depth-0 ">CDirScan<ul class="derivation"/></li></ul></div>
<div class="section member-index"><table class="member-index"><thead><tr><th colspan="2">Public Member Enumerations</th></tr></thead><tbody><tr><td align="right" valign="top" class="code">enum</td><td><a href="#GUID-F64B5759-2F48-3F32-86E3-25D44B185BA5">TScanDirection</a> { <a href="#GUID-BDDFFFCE-2413-35C4-9216-A27F207EEC96">EScanUpTree</a>, <a href="#GUID-12D3D468-49A1-35B7-B227-E0C17C749453">EScanDownTree</a> }</td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-55146C2F-2BA8-3CAE-9B00-770FA519AD18">~CDirScan</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a href="GUID-8FE95467-D48B-3E61-9028-29C0F15F567E.html">TPtrC</a></td><td><a href="#GUID-0D5B1877-F03F-3BBB-A734-930625B72D83">AbbreviatedPath</a>()</td></tr><tr><td align="right" class="code">IMPORT_C <a href="GUID-8FE95467-D48B-3E61-9028-29C0F15F567E.html">TPtrC</a></td><td><a href="#GUID-F27F8BD6-E281-3522-9FAA-24929191E165">FullPath</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a href="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB.html">CDirScan</a> *</td><td><a href="#GUID-19151643-EFBB-3EC0-92BB-EB6CE991683C">NewL</a>(<a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp;)</td></tr><tr><td align="right" class="code">IMPORT_C <a href="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB.html">CDirScan</a> *</td><td><a href="#GUID-80FA537F-E92A-3522-88BC-D475A1393233">NewLC</a>(<a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-FEA314EE-6727-36CA-B0FA-BE74C1AA1F12">NextL</a>(<a href="GUID-15AEDE72-80FF-3689-A771-E00F1CF3EB88.html">CDir</a> *&amp;)</td></tr><tr><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-49A65BAE-171D-35D5-8650-FCE7BB1CE992">SetScanDataL</a>(const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a>, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a>, <a href="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB.html">TScanDirection</a>)</td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Protected Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-555216F3-7D02-378D-9DCD-F199E8DA7DB0">CDirScan</a>(<a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp;)</td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Inherited Functions</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::CBase()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Delete(CBase *)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Extension_(TUint,TAny *&amp;,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave,TUint)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TUint)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::~CBase()</a></td></tr></tbody></table></div><div class="section apidesc"><h2 class="sectiontitle">Detailed Description</h2>
			<p>Scans a directory structure.</p>

			<p>The scan moves from directory to directory through the hierarchy, returning a list of the entries contained in each. The order in which the directories are scanned is determined by a sort key which is specified when setting up the scan. The base directory to be scanned and the entry types of interest must also be specified before performing the scan.</p>

			<p>This class is not intended for user derivation </p>

		</div>
<h2 class="sectiontitle">Member Enumeration Documentation</h2><div class="nested1" id="GUID-F64B5759-2F48-3F32-86E3-25D44B185BA5"><a name="GUID-F64B5759-2F48-3F32-86E3-25D44B185BA5"><!-- --></a>
		<h3 class="sectiontitle">Enum TScanDirection</h3>
		
		<div class="section enumerationdetail"><div class="section apidesc">
				<p>Defines the scan direction. </p>

			</div>
<div class="section enumerators"><table class="enumerators"><thead><tr><th>Enumerator</th><th>Value</th><th>Description</th></tr></thead><tr><td><a name="GUID-BDDFFFCE-2413-35C4-9216-A27F207EEC96"/><span class="enumerator">EScanUpTree</span></td><td/><td>
							<p>Scan upwards from the lowest level directory in the hierarchy to the top level directory. </p>

						 </td></tr><tr class="bg"><td><a name="GUID-12D3D468-49A1-35B7-B227-E0C17C749453"/><span class="enumerator">EScanDownTree</span></td><td/><td>
							<p>Scan downwards from the top level directory in the hierarchy to the bottom level directory. </p>

						 </td></tr></table></div>
</div>

	</div>
<h2 class="sectiontitle">Constructor &amp; Destructor Documentation</h2><div class="nested1" id="GUID-555216F3-7D02-378D-9DCD-F199E8DA7DB0"><a name="GUID-555216F3-7D02-378D-9DCD-F199E8DA7DB0"><!-- --></a>
		<a name="GUID-88687FF6-A517-3F5B-BB61-69E3DE0F0149"><!----></a><h3 class="sectiontitle">CDirScan ( RFs &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>CDirScan</td><td>(</td><td><a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp;</td><td><span class="parameter">aFs</span></td><td>)</td><td>[protected]</td></tr></table></div><div class="section apidesc"/>
<div class="section parameters"/>
</div>

	</div>
<div class="nested1" id="GUID-55146C2F-2BA8-3CAE-9B00-770FA519AD18"><a name="GUID-55146C2F-2BA8-3CAE-9B00-770FA519AD18"><!-- --></a>
		<h3 class="sectiontitle">~CDirScan (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C</td><td>~CDirScan</td><td>(</td><td>)</td><td/></tr></table></div><div class="section apidesc">
				<p>Desctructor.</p>

				<p>Frees all resources owned by the object, prior to its destruction. </p>

			</div>
</div>

	</div>
<h2 class="sectiontitle">Member Function Documentation</h2><div class="nested1" id="GUID-0D5B1877-F03F-3BBB-A734-930625B72D83"><a name="GUID-0D5B1877-F03F-3BBB-A734-930625B72D83"><!-- --></a>
		<h3 class="sectiontitle">AbbreviatedPath (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a href="GUID-8FE95467-D48B-3E61-9028-29C0F15F567E.html">TPtrC</a></td><td>AbbreviatedPath</td><td>(</td><td>)</td><td/></tr></table></div><div class="section apidesc">
				<p>Gets the abbreviated path of the entry currently being scanned.</p>

				<p>The abbreviated path is the path relative to the top level directory in the scan.</p>

				<p/>

			</div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">A non modifiable pointer descriptor for the abbreviated path of the entry currently being scanned. </span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-F27F8BD6-E281-3522-9FAA-24929191E165"><a name="GUID-F27F8BD6-E281-3522-9FAA-24929191E165"><!-- --></a>
		<h3 class="sectiontitle">FullPath (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a href="GUID-8FE95467-D48B-3E61-9028-29C0F15F567E.html">TPtrC</a></td><td>FullPath</td><td>(</td><td>)</td><td/></tr></table></div><div class="section apidesc">
				<p>Gets the full path of the entry currently being scanned.</p>

				<p>The full path includes the drive letter.</p>

				<p/>

			</div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">A non modifiable pointer descriptor for the full path of the entry currently being scanned. </span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-19151643-EFBB-3EC0-92BB-EB6CE991683C"><a name="GUID-19151643-EFBB-3EC0-92BB-EB6CE991683C"><!-- --></a>
		<a name="GUID-8AD14F5C-06F0-381C-AF42-79E4519AFCC9"><!----></a><h3 class="sectiontitle">NewL ( RFs &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a href="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB.html">CDirScan</a> *</td><td>NewL</td><td>(</td><td><a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp;</td><td><span class="parameter">aFs</span></td><td>)</td><td>[static]</td></tr></table></div><div class="section apidesc">
				<p>Constructs and allocates memory for a new <a href="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB.html#GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB">CDirScan</a> object.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aFs</td><td>The file server session. </td></tr></table></div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">A pointer to the new directory scan object. </span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-80FA537F-E92A-3522-88BC-D475A1393233"><a name="GUID-80FA537F-E92A-3522-88BC-D475A1393233"><!-- --></a>
		<a name="GUID-4E362368-1FD3-35BD-A194-29CA0315750A"><!----></a><h3 class="sectiontitle">NewLC ( RFs &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a href="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB.html">CDirScan</a> *</td><td>NewLC</td><td>(</td><td><a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp;</td><td><span class="parameter">aFs</span></td><td>)</td><td>[static]</td></tr></table></div><div class="section apidesc">
				<p>Constructs and allocates memory for a new <a href="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB.html#GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB">CDirScan</a> object, putting a pointer to the object onto the cleanup stack.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aFs</td><td>The file server session. </td></tr></table></div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">A pointer to the new directory scan object. </span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-FEA314EE-6727-36CA-B0FA-BE74C1AA1F12"><a name="GUID-FEA314EE-6727-36CA-B0FA-BE74C1AA1F12"><!-- --></a>
		<a name="GUID-9F8CEC7E-7251-3582-AFFD-13A2EA2F364D"><!----></a><h3 class="sectiontitle">NextL ( CDir *&amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>NextL</td><td>(</td><td><a href="GUID-15AEDE72-80FF-3689-A771-E00F1CF3EB88.html">CDir</a> *&amp;</td><td><span class="parameter">aDirEntries</span></td><td>)</td><td/></tr></table></div><div class="section apidesc">
				<p>Scans the next directory entry in the structure.</p>

				<p>The order in which the structure is scanned is determined by the scan direction and the entry sort mask. These values are specified when setting up the scan. The type of entries retrieved by this function is determined by the entry attribute mask. This is also specified when setting up the scan.</p>

				<p>Notes:</p>

				<p>1. The function first sets aDirEntries to NULL, and then allocates memory for it before appending entries to it. Therefore, aDirEntries should have no memory allocated to it before this function is called, otherwise this memory will become orphaned.</p>

				<p>2. The caller of this function is responsible for deleting aDirEntries after the function has returned.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aDirEntries</td><td>On return, a pointer to an array containing filtered entries from the next directory in the structure. NULL if there are no more directories in the structure.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-49A65BAE-171D-35D5-8650-FCE7BB1CE992"><a name="GUID-49A65BAE-171D-35D5-8650-FCE7BB1CE992"><!-- --></a>
		<a name="GUID-904B65E6-61DE-3A5D-A5E1-E7577D0FD2BB"><!----></a><h3 class="sectiontitle">SetScanDataL ( const TDesC &amp;, TUint, TUint, TScanDirection )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>SetScanDataL</td><td>(</td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td><span class="parameter">aMatchName</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a></td><td><span class="parameter">anEntryAttMask</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a></td><td><span class="parameter">anEntrySortMask</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB.html">TScanDirection</a></td><td><span class="parameter">aScanDir</span> = EScanDownTree</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table></div><div class="section apidesc">
				<p>Initialises the scan.</p>

				<p>This involves specifying:</p>

				<p>1. the directory at the top of the structure to be scanned</p>

				<p>2. a filter for the entry types of interest</p>

				<p>3. the order in which the entries in each directory in the structure are to be sorted</p>

				<p>4. the scan direction.</p>

				<p>Whether the scan direction is upwards or downwards, the directories that are scanned are those in the part of the hierarchy below the directory specified in aMatchName. By default, the scan direction is downwards. If the scan direction is set to <a href="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB.html#GUID-BDDFFFCE-2413-35C4-9216-A27F207EEC96">CDirScan::EScanUpTree</a>, then all branches of the tree are explored starting at the lowest level directory in the tree below aMatchName, and ending at aMatchName. This option is provided for deleting a directory structure.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aMatchName</td><td>The top level directory for the scan. Any path components that are not specified here are taken from the session path. Note that the trailing backslash is required to specify the directory. I.e. path x:\dir1\dir2\ means that the scan will start from dir2, while path x:\dir1\dir2 assumes scan starting from x:\dir1\ </td></tr><tr class="bg"><td class="parameter">anEntryAttMask</td><td>A bit mask that filters the entry types which should be returned by NextL(). The mask works as follows: To match files only, specify KEntryAttNormal. To match both files and directories, specify KEntryAttDir. To match directories only, specify KEntryAttDir|KEntryAttMatchExclusive. To match files with a specific attribute, then OR the attribute involved with KEntryAttMatchExclusive. For example, to match read-only files, specify KEntryAttReadOnly|KEntryAttMatchExclusive. For more information, see KEntryAttNormal or the other file/directory attributes.  </td></tr><tr><td class="parameter">anEntrySortMask</td><td>The order in which the directories are scanned by NextL(). This flag is defined in TEntryKey.  </td></tr><tr class="bg"><td class="parameter">aScanDir</td><td>The direction of the scan. The default is downwards.  </td></tr></table></div>
</div>

	</div>

	
	
	
	
	
	
	
	
	
	
</div></div><div class="footer"><hr/><div class="copy">© Nokia 2011.</div></div>
</body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 07:59:26 GMT -->
</html>