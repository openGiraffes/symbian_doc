<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">

<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-69E209A1-E01B-3D9A-9572-53301106FAEE.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 08:02:56 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2011"/>
<meta name="DC.rights.owner" content="(C) Copyright 2011"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="UserPromptService::RUpsSubsession"/>
<meta name="abstract" content=""/>
<meta name="description" content=""/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-69E209A1-E01B-3D9A-9572-53301106FAEE"/>
<link rel="stylesheet" type="text/css" href="css/commonltr.css"/>
<title>UserPromptService::RUpsSubsession</title>
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="css/nokiacxxref.css"/><link href="css/html.css" rel="stylesheet" type="text/css"/><link href="css/style.css" rel="stylesheet" type="text/css"/><link href="css/nwg.css" rel="stylesheet" type="text/css"/><link href="css/eclipse.css" rel="stylesheet" type="text/css"/></head>
<body id="GUID-69E209A1-E01B-3D9A-9572-53301106FAEE"><a name="GUID-69E209A1-E01B-3D9A-9572-53301106FAEE"><!-- --></a><div class="body"><div class="contentLeft prTxt">

	<h1 class="sectiontitle">UserPromptService::RUpsSubsession Class Reference</h1>
	
	<div class="section include"><p>#include 
            
                    &lt;ups/upsclient.h&gt;
                </p></div>
<div class="section linkagainst" id="GUID-69E209A1-E01B-3D9A-9572-53301106FAEE__linkagainst"><a name="GUID-69E209A1-E01B-3D9A-9572-53301106FAEE__linkagainst"><!-- --></a><p>Link against: upsclient.lib</p></div>
<div class="section signature"><table class="signature"><tr><td>class UserPromptService::RUpsSubsession : public RScsClientSubsessionBase</td></tr></table></div><div class="section derivation"><h2 class="sectiontitle">Inherits from</h2><ul class="derivation derivation-root"><li class="derivation-depth-0 ">UserPromptService::RUpsSubsession<ul class="derivation"/></li></ul></div>
<div class="section member-index"><table class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-414C5D58-AF06-3930-98B9-5711269DA68B">RUpsSubsession</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-896982D4-95F6-31AB-98D6-19EC1E2A6B2D">Authorise</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>, const <a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TServiceId</a> &amp;, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;, <a href="GUID-5A7E19C8-8541-373C-94C5-892C91B6F62E.html">TUpsDecision</a> &amp;, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-B84B8E1D-6DE5-341B-BE39-1545D4EF12E1">Authorise</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>, const <a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TServiceId</a> &amp;, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;, const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;, <a href="GUID-5A7E19C8-8541-373C-94C5-892C91B6F62E.html">TUpsDecision</a> &amp;, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-0408D171-02CD-31EC-BCA7-DA1D823DE038">CancelPrompt</a>()</td></tr><tr><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-4F5C0B67-9317-3D19-BAF7-665FDA808F0B">Close</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><a href="#GUID-E5B9DF83-743C-3D67-9C95-6D977E3688A3">Initialise</a>(<a href="GUID-C5A902A7-C0BA-3728-9848-743D5CA66AE4.html">RUpsSession</a> &amp;, const <a href="GUID-B0E661BC-4058-3256-B9C3-5A4FD52F6DE5.html">RThread</a> &amp;)</td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Inherited Functions</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-ED500FD3-37B1-39F0-942A-EA5227738753.html">RScsClientSubsessionBase::CallSubsessionFunction(TInt)const</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-ED500FD3-37B1-39F0-942A-EA5227738753.html">RScsClientSubsessionBase::CallSubsessionFunction(TInt,const TIpcArgs &amp;)const</a></td></tr><tr><td> </td><td><a href="GUID-ED500FD3-37B1-39F0-942A-EA5227738753.html">RScsClientSubsessionBase::CallSubsessionFunction(TInt,const TIpcArgs &amp;,TRequestStatus &amp;)const</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-ED500FD3-37B1-39F0-942A-EA5227738753.html">RScsClientSubsessionBase::CancelSubsessionFunction(TInt)const</a></td></tr><tr><td> </td><td><a href="GUID-ED500FD3-37B1-39F0-942A-EA5227738753.html">RScsClientSubsessionBase::CreateSubsession(const RScsClientBase &amp;,TInt,const TIpcArgs &amp;)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-ED500FD3-37B1-39F0-942A-EA5227738753.html">RScsClientSubsessionBase::RScsClientSubsessionBase()</a></td></tr><tr><td> </td><td><a href="GUID-1BBE1448-1DF8-33C4-BF9E-5A5F427AEE35.html">RSubSessionBase::CloseSubSession(TInt)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-1BBE1448-1DF8-33C4-BF9E-5A5F427AEE35.html">RSubSessionBase::CreateAutoCloseSubSession(RSessionBase &amp;,TInt,const TIpcArgs &amp;)</a></td></tr><tr><td> </td><td><a href="GUID-1BBE1448-1DF8-33C4-BF9E-5A5F427AEE35.html">RSubSessionBase::CreateSubSession(const RSessionBase &amp;,TInt)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-1BBE1448-1DF8-33C4-BF9E-5A5F427AEE35.html">RSubSessionBase::CreateSubSession(const RSessionBase &amp;,TInt,const TIpcArgs &amp;)</a></td></tr><tr><td> </td><td><a href="GUID-1BBE1448-1DF8-33C4-BF9E-5A5F427AEE35.html">RSubSessionBase::RSubSessionBase()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-1BBE1448-1DF8-33C4-BF9E-5A5F427AEE35.html">RSubSessionBase::Send(TInt)const</a></td></tr><tr><td> </td><td><a href="GUID-1BBE1448-1DF8-33C4-BF9E-5A5F427AEE35.html">RSubSessionBase::Send(TInt,const TIpcArgs &amp;)const</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-1BBE1448-1DF8-33C4-BF9E-5A5F427AEE35.html">RSubSessionBase::SendReceive(TInt)const</a></td></tr><tr><td> </td><td><a href="GUID-1BBE1448-1DF8-33C4-BF9E-5A5F427AEE35.html">RSubSessionBase::SendReceive(TInt,TRequestStatus &amp;)const</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-1BBE1448-1DF8-33C4-BF9E-5A5F427AEE35.html">RSubSessionBase::SendReceive(TInt,const TIpcArgs &amp;)const</a></td></tr><tr><td> </td><td><a href="GUID-1BBE1448-1DF8-33C4-BF9E-5A5F427AEE35.html">RSubSessionBase::SendReceive(TInt,const TIpcArgs &amp;,TRequestStatus &amp;)const</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-1BBE1448-1DF8-33C4-BF9E-5A5F427AEE35.html">RSubSessionBase::Session()const</a></td></tr><tr><td> </td><td><a href="GUID-1BBE1448-1DF8-33C4-BF9E-5A5F427AEE35.html">RSubSessionBase::SubSessionHandle()const</a></td></tr></tbody></table></div><div class="section apidesc"><h2 class="sectiontitle">Detailed Description</h2>
			<p>System servers use this class to establish a connection to the UPS for a specific client. Before checking a request with the <a href="GUID-C197C9A7-EA05-3F24-9854-542E984C612D.html#GUID-C197C9A7-EA05-3F24-9854-542E984C612D">User</a> Prompt Service the Authorise method first checks whether authorisation from the <a href="GUID-C197C9A7-EA05-3F24-9854-542E984C612D.html#GUID-C197C9A7-EA05-3F24-9854-542E984C612D">User</a> Prompt Service is required. If authorisation is not required e.g. the client has the correct capabilities for the service then Authorise completes immediately. </p>

		</div>
<h2 class="sectiontitle">Constructor &amp; Destructor Documentation</h2><div class="nested1" id="GUID-414C5D58-AF06-3930-98B9-5711269DA68B"><a name="GUID-414C5D58-AF06-3930-98B9-5711269DA68B"><!-- --></a>
		<h3 class="sectiontitle">RUpsSubsession (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C</td><td>RUpsSubsession</td><td>(</td><td>)</td><td/></tr></table></div><div class="section apidesc">
				<p>This constructor provides a single point of definition from which the superclass constructor is called. </p>

			</div>
</div>

	</div>
<h2 class="sectiontitle">Member Function Documentation</h2><div class="nested1" id="GUID-896982D4-95F6-31AB-98D6-19EC1E2A6B2D"><a name="GUID-896982D4-95F6-31AB-98D6-19EC1E2A6B2D"><!-- --></a>
		<a name="GUID-F7B6E994-FEC8-3A70-84A3-7B52EE8DCE89"><!----></a><h3 class="sectiontitle">Authorise ( TBool, const TServiceId &amp;, const TDesC &amp;, TUpsDecision &amp;, TRequestStatus &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>Authorise</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td><span class="parameter">aServerCheckOk</span>,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TServiceId</a> &amp;</td><td><span class="parameter">aServiceId</span>,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td><span class="parameter">aDestination</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-5A7E19C8-8541-373C-94C5-892C91B6F62E.html">TUpsDecision</a> &amp;</td><td><span class="parameter">aDecision</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td><span class="parameter">aStatus</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table></div><div class="section apidesc">
				<p>Determines whether the system server should perform the service requested by the client application. Depending on licensee configuration this function will either complete immediately if the client passed the system servers security policy check. Alternatively, every request may require additional authorisation by the <a href="GUID-C197C9A7-EA05-3F24-9854-542E984C612D.html#GUID-C197C9A7-EA05-3F24-9854-542E984C612D">User</a> Prompt Service.</p>

				<p/>

				<p>See also: RUpsSubsession::AuthoriseInternal</p>

				<dl class="user">
					
						<dt class="dlterm">
							<strong>capability</strong>
						</dt>

						<dd>ProtServ </dd>

					
				</dl>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aServerCheckOk</td><td>Whether the client request passed the security check implemented by the system server e.g. does the client have the correct capabilities for the requested service.  </td></tr><tr class="bg"><td class="parameter">aServiceId</td><td>Service which the client wants to use.  </td></tr><tr><td class="parameter">aDestination</td><td>More information about the service, e.g. this could be a telephone number is the client wanted to make a call.  </td></tr><tr class="bg"><td class="parameter">aDecision</td><td>When the request completes successfully, the verdict is written to this variable.  </td></tr><tr><td class="parameter">aStatus</td><td>The server completes this request object when it has finished handling the request.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-B84B8E1D-6DE5-341B-BE39-1545D4EF12E1"><a name="GUID-B84B8E1D-6DE5-341B-BE39-1545D4EF12E1"><!-- --></a>
		<h3 class="sectiontitle">Authorise ( TBool, const TServiceId &amp;, const TDesC &amp;, const TDesC8 &amp;, TUpsDecision &amp;, TRequestStatus &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>Authorise</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td><span class="parameter">aServerCheckOk</span>,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TServiceId</a> &amp;</td><td><span class="parameter">aServiceId</span>,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td><span class="parameter">aDestination</span>,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td><span class="parameter">aOpaqueData</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-5A7E19C8-8541-373C-94C5-892C91B6F62E.html">TUpsDecision</a> &amp;</td><td><span class="parameter">aDecision</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td><span class="parameter">aStatus</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table></div><div class="section apidesc">
				<p>Determines whether the system server should perform the service requested by the client application. Depending on licensee configuration this function will either complete immediately if the client passed the system servers security policy check. Alternatively, every request may require additional authorisation by the <a href="GUID-C197C9A7-EA05-3F24-9854-542E984C612D.html#GUID-C197C9A7-EA05-3F24-9854-542E984C612D">User</a> Prompt Service.</p>

				<p/>

				<p>See also: RUpsSubsession::AuthoriseInternal</p>

				<dl class="user">
					
						<dt class="dlterm">
							<strong>capability</strong>
						</dt>

						<dd>ProtServ </dd>

					
				</dl>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aServerCheckOk</td><td>Whether the client request passed the security check implemented by the system server e.g. does the client have the correct capabilities for the requested service.  </td></tr><tr class="bg"><td class="parameter">aServiceId</td><td>Service which the client wants to use.  </td></tr><tr><td class="parameter">aDestination</td><td>More information about the service, e.g. this could be a telephone number is the client wanted to make a call.  </td></tr><tr class="bg"><td class="parameter">aOpaqueData</td><td>Additional information to describe the request.  </td></tr><tr><td class="parameter">aDecision</td><td>When the request completes successfully, the verdict is written to this variable.  </td></tr><tr class="bg"><td class="parameter">aStatus</td><td>The server completes this request object when it has finished handling the request.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-0408D171-02CD-31EC-BCA7-DA1D823DE038"><a name="GUID-0408D171-02CD-31EC-BCA7-DA1D823DE038"><!-- --></a>
		<h3 class="sectiontitle">CancelPrompt (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>CancelPrompt</td><td>(</td><td>)</td><td/></tr></table></div><div class="section apidesc">
				<p>Cancel the prompt request which was launched by calling Authorise.</p>

				<div class="p">This function has no effect if there is no outstanding request. <dl class="user"><dt class="dlterm"><strong>capability</strong></dt>
<dd>ProtServ </dd>
</dl>
</div>

			</div>
</div>

	</div>
<div class="nested1" id="GUID-4F5C0B67-9317-3D19-BAF7-665FDA808F0B"><a name="GUID-4F5C0B67-9317-3D19-BAF7-665FDA808F0B"><!-- --></a>
		<h3 class="sectiontitle">Close (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>Close</td><td>(</td><td>)</td><td/></tr></table></div><div><p>Reimplemented from <a href="GUID-ED500FD3-37B1-39F0-942A-EA5227738753.html">RScsClientSubsessionBase::Close()</a></p></div><div class="section apidesc">
				<p>Close and clean up this subsession object. </p>

			</div>
</div>

	</div>
<div class="nested1" id="GUID-E5B9DF83-743C-3D67-9C95-6D977E3688A3"><a name="GUID-E5B9DF83-743C-3D67-9C95-6D977E3688A3"><!-- --></a>
		<a name="GUID-AF8B574D-27E7-3292-A84F-24FC592DFF1E"><!----></a><h3 class="sectiontitle">Initialise ( RUpsSession &amp;, const RThread &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>Initialise</td><td>(</td><td><a href="GUID-C5A902A7-C0BA-3728-9848-743D5CA66AE4.html">RUpsSession</a> &amp;</td><td><span class="parameter">aSession</span>,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-B0E661BC-4058-3256-B9C3-5A4FD52F6DE5.html">RThread</a> &amp;</td><td><span class="parameter">aClient</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table></div><div class="section apidesc">
				<p>Saves the details required to create a subsession specific to the client thread.</p>

				<p>The actual subsession creation is defered until the subsession is required (which may be never if the policy says server checks are sufficient).</p>

				<p>Several <a href="GUID-69E209A1-E01B-3D9A-9572-53301106FAEE.html#GUID-69E209A1-E01B-3D9A-9572-53301106FAEE">RUpsSubsession</a> objects can share a single <a href="GUID-C5A902A7-C0BA-3728-9848-743D5CA66AE4.html#GUID-C5A902A7-C0BA-3728-9848-743D5CA66AE4">RUpsSession</a>.</p>

				<p>If any of the <a href="GUID-69E209A1-E01B-3D9A-9572-53301106FAEE.html#GUID-69E209A1-E01B-3D9A-9572-53301106FAEE">RUpsSubsession</a> objects are to be used in a different thread to the <a href="GUID-C5A902A7-C0BA-3728-9848-743D5CA66AE4.html#GUID-C5A902A7-C0BA-3728-9848-743D5CA66AE4">RUpsSession</a>, then ShareAuto() must be called on the <a href="GUID-C5A902A7-C0BA-3728-9848-743D5CA66AE4.html#GUID-C5A902A7-C0BA-3728-9848-743D5CA66AE4">RUpsSession</a>.</p>

				<p/>

				<p>See also: RSubSessionBase::CreateSubsession</p>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aSession</td><td>Connected session to the UPS server.  </td></tr><tr class="bg"><td class="parameter">aClient</td><td>SS client for whom this session is set up.  </td></tr></table></div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">Symbian OS error code where KErrNone indicates success and any other value indicates failure. </span></p></div>
</div>

	</div>

	
	
	
	
	
	
	
</div></div><div class="footer"><hr/><div class="copy">© Nokia 2011.</div></div>
</body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-69E209A1-E01B-3D9A-9572-53301106FAEE.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 08:02:57 GMT -->
</html>