
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-A5F65344-BE05-5295-85BB-E8114505FB82.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:01:01 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Alarm Sound Play Control" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7" /><meta name="DC.Relation" scheme="URI" content="GUID-1FB321DE-4A02-5468-9AF1-F3786EB678CF" /><meta name="DC.Relation" scheme="URI" content="GUID-CFE3A216-E637-51C1-B258-2ADF4E0F4150" /><meta name="DC.Relation" scheme="URI" content="GUID-E6788741-EF34-57B7-B4D4-8AAC21B25774" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-A5F65344-BE05-5295-85BB-E8114505FB82" /><meta name="DC.Language" content="en" /><title>Alarm
Sound Play Control </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82">Alarm
Sound Play Control</h1><div>
<p>This section explains the use of sound, which is one of the several ways
that the Alarm Server can notify the user. </p>
<div><h3 class="section-title">Alarm Play Interval Configuration</h3> <p>The alarm sound
play definition (<a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html"><code class="apiname">TASCliSoundPlayDefinition</code></a>) is set using
the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html"><code class="apiname">RASCliSession</code></a> class. Alarm sounds are played according
to intervals that consist of a duration and an offset. The <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html"><code class="apiname">TASCliSoundPlayDefinition</code></a> class
defines when alarm sounds are to be played, and for how long. </p> <p>The
purpose of configuring alarm sound play is to enable the Alarm Server to perform
the following operations: </p> <ul>
<li id="GUID-954909FC-2690-50A6-A967-AB4E3C97A319"><a name="GUID-954909FC-2690-50A6-A967-AB4E3C97A319"><!-- --></a><p>set the alarm sound
state to ON or OFF (<a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html#GUID-EE45EA45-0289-3946-ACB8-25971D32FDC7"><code class="apiname">RASCliSession::SetAlarmSoundState()</code></a>). </p> </li>
<li id="GUID-B8D77E1F-0F9C-5AA2-8269-68A04CD73525"><a name="GUID-B8D77E1F-0F9C-5AA2-8269-68A04CD73525"><!-- --></a><p>silence all alarms until
a specific time (<a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html#GUID-C15F814F-AFB6-3FE4-8674-B961A1EFA6F2"><code class="apiname">RASCliSession::SetAlarmSoundsSilentUntil()</code></a>).
No sound is played for any alarm that is notified before this time. </p> </li>
<li id="GUID-7359767C-FFC6-5903-B4C1-099C55EB0C3E"><a name="GUID-7359767C-FFC6-5903-B4C1-099C55EB0C3E"><!-- --></a><p>silence all alarms for
a specified interval (<a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html#GUID-D86F97E4-3407-32C9-ADBA-0FD44D5A3ED3"><code class="apiname">RASCliSession::SetAlarmSoundsSilentFor()</code></a>).
No alarm sound is played for any alarm notified during this period. </p> </li>
<li id="GUID-79917BFC-C399-5FCB-A1B3-9E3CA16250F7"><a name="GUID-79917BFC-C399-5FCB-A1B3-9E3CA16250F7"><!-- --></a><p>cancel the silent period,
turning the alarm sounds ON (<a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html#GUID-92A4C2FD-46B9-36CA-A624-002EEFA9671C"><code class="apiname">RASCliSession::CancelAlarmSilence()</code></a>). </p> </li>
<li id="GUID-D701C819-91AC-55F6-8A2B-99A3B95BB22D"><a name="GUID-D701C819-91AC-55F6-8A2B-99A3B95BB22D"><!-- --></a><p>configure alarm sound
play intervals (<a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html#GUID-BB9A298E-C3AE-3E98-A677-E7A028F67602"><code class="apiname">RASCliSession::SetAlarmPlayIntervalsL()</code></a>),
which specify the duration of the ‘play/silence/play’ when an alarm expires. </p> </li>
<li id="GUID-4FCCE100-C356-5F22-8300-C4BFD6A64F0B"><a name="GUID-4FCCE100-C356-5F22-8300-C4BFD6A64F0B"><!-- --></a><p>determine whether the
alarm server has temporarily silenced the sounds (<a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html#GUID-EB8DC5EB-ABA9-3AB9-9D1B-E37DA612C0BB"><code class="apiname">RASCliSession::AlarmSoundsTemporarilySilenced()</code></a>).
This returns ETrue if alarm sound playing is temporarily
silenced, else EFalse is specified. </p> </li>
</ul> <p> <strong>NOTE</strong>: These APIs can be used <em>only</em> if the alarm sound
play control is enabled from the Alarm Server side. </p> <p>To perform these
operations, the Alarm Server uses a resource file, which defines the sound
play intervals and durations. </p> <p><strong>Resource File</strong> </p> <p>The alarm
play intervals are defined in <code class="codeph">AlarmServer.rss</code> resource file.
The compiled resource file (configuration file) must be named as <code class="codeph">alarmserver.rsc</code> and
be placed in the Alarm Server’s private directory (<code class="codeph">C:\private\101F5027</code> on
emulator, or <code class="codeph">Z:\private\101F5027</code> on target platforms). </p> <p>The
resource file must start with the necessary include directives, resource name,
and standard signature entry as illustrated in the following code fragment: </p> <pre class="codeblock">#include &lt;badef.rh&gt;
#include &lt;alarmserver.rh&gt;

NAME ASRV
RESOURCE BA_RSS_SIGNATURE
    {
    signature = 1;
    }</pre> <p>The resource file specifies only the Offset (in minutes)
and Duration (in seconds) of the Alarm play intervals. It is used only for
initial configuration. </p> <p>At runtime, Alarm Server configurations are
backed up to a file called as <code>AlarmServer.ini</code>, on the
PC side. The backup operation performed can be one of the following types: </p> <ul>
<li id="GUID-46E046BC-44CB-5B8C-90DD-4E022F258145"><a name="GUID-46E046BC-44CB-5B8C-90DD-4E022F258145"><!-- --></a><p> <strong>Secure Backup</strong> -
In this method, <code class="codeph">backuprestorenotification.lib</code> (provides a
notification mechanism) is used for backing and restoring operation to and
from <code class="codeph">C:\private\101F5027\AlarmServer.ini</code>. </p> </li>
<li id="GUID-B17FCD6F-500A-5D49-9FC2-389B7F41E810"><a name="GUID-B17FCD6F-500A-5D49-9FC2-389B7F41E810"><!-- --></a><p> <strong>Passive Backup</strong> -
In this method, the required backup behavior is mentioned in a backup registration
file called <code>backup_registration.xml</code>, placed in its private
directory. The list of private directories and files that must be backed up
are mentioned in this backup registration file. </p> </li>
</ul> <p> <strong>NOTE</strong>: The backup file takes precedence over the resource
file the next time the Alarm Server is started. Therefore, if changes are
made to the resource file, <code>AlarmServer.ini</code> must be deleted
manually before restarting the Alarm Server. </p> <p><strong>Alarm Sound Play Intervals
and Durations</strong> </p> <p>The following diagram illustrates the alarm sound
play intervals: </p> <div class="figure" id="GUID-477088D0-57BD-58BF-91BC-BF05E3EF2162"><img src="GUID-3E23788D-4D67-5E9B-961F-B67D7471BB71_d0e166372_href.png" /><p class="figure-title"><strong>Figure: </strong>                 ALARM SOUND PLAY INTERVALS               </p></div> <p>Alarm play intervals define the toggling of alarm sound playing/stopping
and alarm dialog show/hide when an alarm expires. It consists of a duration
and an offset. The offset is the time, in minutes, from the beginning alarm
time or the end of the last snooze. The duration is the time period, in seconds,
during which the alarm sound is played. </p> <p>At each offset, the Alarm
Server makes a request to the Alarm Alert server to display the alarm dialog
and play the alarm sound. At the end of each duration period, the Alarm Server
makes a request to the Alarm Alert server to hide the alarm and stop playing
the alarm sound. </p> <p>The following is an example code fragment that plays
the sound for 30 seconds, then pauses for 30 seconds, and repeats the pattern
two more times: </p> <pre class="codeblock">RESOURCE sound_controller
    {
    intervals =
        {
        SOUND_INTERVAL { offset = 0; duration = 30; },
        SOUND_INTERVAL { offset = 1; duration = 30; },
        SOUND_INTERVAL { offset = 2; duration = 30; };
        };
    }</pre> <p>An interval must have an offset of zero if more than
one offset is specified. </p> <p> <strong>NOTE</strong>: The <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html"><code class="apiname">TASCliSoundPlayDefinition</code></a> class
is the runtime equivalent of the sound intervals array. It defines <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html#GUID-79792213-24E6-3862-BEF5-832F8C34BF5A"><code class="apiname">TASCliSoundPlayDefinition::Offset()</code></a> length
in minutes and defines <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html#GUID-1900BA63-48B2-32A6-93DB-F77CC7AA3E39"><code class="apiname">TASCliSoundPlayDefinition::Duration()</code></a> length
in seconds. The API to set a <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html"><code class="apiname">TASCliSoundPlayDefinition</code></a> array
is <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html#GUID-AB1E72B5-D9CE-3BAD-860D-6C1F443442E8"><code class="apiname">TASCliSoundPlayDefinition::SetAlarmPlayIntervalsL()</code></a>. </p> </div>
<div><h3 class="section-title">Alarm Play Sequence Repeat Option</h3> <p>The resource
file provides an option to repeat the sequence when the end of the alarm play
sequence is reached. </p> <p>For backward compatibility, the default behavior
is to restart the sequence when the end of the alarm play sequence is reached
(see EAlarmSoundRepeatSettingStop). This occurs if there
is no resource file, or if the resource file does not specify an option. There
are two more end-of-sequence options: </p> <ul>
<li id="GUID-73A1D734-2938-5477-81F7-B17F5237C374"><a name="GUID-73A1D734-2938-5477-81F7-B17F5237C374"><!-- --></a><p> EAlarmSoundRepeatSettingLoop -
stop when the end of sequence reached. </p> </li>
<li id="GUID-F531E88D-AAD6-5F8D-9CDE-B153467D4DB1"><a name="GUID-F531E88D-AAD6-5F8D-9CDE-B153467D4DB1"><!-- --></a><p> EAlarmSoundRepeatSettingRepeatLast -
repeat last interval indefinitely. This is an optional entry in the resource
file. </p> </li>
</ul> <p>The following is a resource file example illustrating the use of
an option to repeat the alarm play sequence: </p> <pre class="codeblock">RESOURCE sound_controller
    {
    option = EAlarmSoundRepeatSettingRepeatLast;
    intervals = 
        {
         ...
        }
    }</pre> </div>
<div><h3 class="section-title">See also</h3> <p><a href="GUID-59D2B677-63D7-5FE7-98F4-549D9C235E56.html">Playing
Alarm Sound Continuously</a> </p> </div>
</div></div></div><div class="footer"><p class="metadata">Last updated November 4th, 2009</p><hr /><div class="copy">© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-A5F65344-BE05-5295-85BB-E8114505FB82.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:01:04 GMT -->
</html>