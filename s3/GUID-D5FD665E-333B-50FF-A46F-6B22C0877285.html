
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-D5FD665E-333B-50FF-A46F-6B22C0877285.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 05:50:09 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Defensive Programming" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-35D7EEFC-B2E4-5444-8875-2A24790E08C2" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-D5FD665E-333B-50FF-A46F-6B22C0877285" /><meta name="DC.Language" content="en" /><title>Defensive Programming </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-D5FD665E-333B-50FF-A46F-6B22C0877285">Defensive Programming</h1><div><p>To help Symbian developers identify potential problems early in development, macros are provided to test for error conditions in functions (asserts) and objects (class invariants). Casting is one well known source of hard-to-find errors. <a href="#GUID-A0253DF3-098C-5427-9B45-3CEC4F4875AB">Casting</a> discusses its use. </p> <div id="GUID-55EB9D07-65F1-572B-8F36-9A442F69B9C2"><h3 class="section-title">Testing conditions with asserts and invariants</h3> <p>One method of catching errors early is to identify conditions that should be true at the beginning and end of functions, and raise errors if they are not. </p> <p>Two mechanisms support this programming style. </p> <ul><li id="GUID-620C4F53-5465-5A53-9880-7DC27EF752FF"><a name="GUID-620C4F53-5465-5A53-9880-7DC27EF752FF"><!-- --></a><p>asserts </p> </li> <li id="GUID-9A1881EA-4C72-5359-9D16-553806070556"><a name="GUID-9A1881EA-4C72-5359-9D16-553806070556"><!-- --></a><p>class invariants </p> </li> </ul> <p><strong>Asserts</strong> </p> <p>Two macros are supplied for asserting specific conditions in functions: </p> <ul><li id="GUID-9481684E-5E9D-54B1-87E0-3539F4A29157"><a name="GUID-9481684E-5E9D-54B1-87E0-3539F4A29157"><!-- --></a><p> <code class="codeph">__ASSERT_ALWAYS</code> to catch run-time invalid input, for both release and debug builds </p> </li> <li id="GUID-4BAF939D-03D4-5D1E-A1BD-79537D930E93"><a name="GUID-4BAF939D-03D4-5D1E-A1BD-79537D930E93"><!-- --></a><p> <code class="codeph">__ASSERT_DEBUG</code> to catch programming errors, for debug builds only </p> </li> </ul> <p><strong>Class Invariants</strong> </p> <p>Class invariants are used to test that an object is in a valid state. They are used only in debug builds. </p> <ul><li id="GUID-F79328BA-61FD-5CB6-9D09-4C4DF6A2459B"><a name="GUID-F79328BA-61FD-5CB6-9D09-4C4DF6A2459B"><!-- --></a><p>Define class invariants for non-trivial classes using <code class="codeph">__DECLARE_TEST</code>. The class must supply functions that specify its allowed stable states. </p> </li> <li id="GUID-541758DE-21E9-5599-A12B-0208867240CA"><a name="GUID-541758DE-21E9-5599-A12B-0208867240CA"><!-- --></a><p>To ensures that the object is in a stable state prior to executing the function, call the invariant at the start of all public functions using <code class="codeph">__TEST_INVARIANT</code>. </p> </li> <li id="GUID-20FFC383-0371-5494-8887-D0B3888162EE"><a name="GUID-20FFC383-0371-5494-8887-D0B3888162EE"><!-- --></a><p>For non-const functions, you can ensure that the object has been left in a stable state by also calling the invariant at the end of the function. </p> </li> </ul> </div> <div id="GUID-A0253DF3-098C-5427-9B45-3CEC4F4875AB"><h3 class="section-title">Casting</h3> <p>Casts, as in other operating systems, should be used with caution. If a cast seems to be needed, check that this does not reflect a design weakness. </p> <p>The C++ <code class="codeph">dynamic_cast</code> operator should not be used because the Symbian platform does not use C++ exceptions in user code. </p> <p>Note that in early versions of the OS (pre v6.0), the GCC compiler did not support the C++ casting operators. The idiom was then to use instead one of the macros <code class="codeph">REINTERPRET_CAST</code>, <code class="codeph">STATIC_CAST</code>, <code class="codeph">CONST_CAST</code>, and <code class="codeph"> MUTABLE_CAST</code>, which were defined as simple C style casts for that compiler. </p> </div> </div></div></div><div class="footer"><p class="metadata">Last updated October 8th, 2009</p><hr /><div class="copy">Â© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-D5FD665E-333B-50FF-A46F-6B22C0877285.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 05:50:09 GMT -->
</html>