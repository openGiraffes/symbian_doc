
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-0039F43D-82BF-438D-A394-1DEC44797D95.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:16:23 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="task" /><meta name="DC.Title" content="Reading NFC Forum Type 1, 2, 3 Tags" /><meta name="abstract" content="This tutorial describes how to read data from NFC Forum type 1, type 2 and type 3 tags." /><meta name="description" content="This tutorial describes how to read data from NFC Forum type 1, type 2 and type 3 tags." /><meta name="DC.Relation" scheme="URI" content="GUID-3DC13AA4-6CC8-45CA-8FF8-8B222DFFC00B" /><meta name="DC.Relation" scheme="URI" content="GUID-F5F59B7B-591A-4294-84ED-359CB2AD52EA" /><meta name="DC.Relation" scheme="URI" content="GUID-B6BDE53C-A583-4CC1-B8B9-5A1BBA59C8B1" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-76C9285D-5C89-4CBC-AB05-F14D6A95BC90" /><meta name="DC.Relation" scheme="URI" content="GUID-7A72B008-901E-454D-AD93-F99555CA904A" /><meta name="DC.Relation" scheme="URI" content="GUID-D2E1F93F-5320-4CDA-A760-86B9146620A3" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-0039F43D-82BF-438D-A394-1DEC44797D95" /><meta name="DC.Language" content="en" /><title>Reading NFC Forum Type 1, 2, 3 Tags  </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-0039F43D-82BF-438D-A394-1DEC44797D95">Reading NFC Forum Type 1, 2, 3 Tags </h1><div><p>This tutorial describes how to read data from NFC Forum
type 1, type 2 and type 3 tags.</p>
<div id="GUID-A1DCD347-6C54-48E6-A401-EC0FD63DFAA0"><h3 class="section-title">Context</h3><p>The NFC
Tag Extension API provides access to different types of tags. An instance
of a connection class is created and is passed to a <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4278615F-1C20-31D7-87D4-996F988B732B.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4278615F-1C20-31D7-87D4-996F988B732B.html"><code class="apiname">MNfcTag</code></a> object which activates the connection. On activating the connection,
the tags can be accessed for reading.</p></div><div id="GUID-796DF997-C0E3-49D1-BBA0-812B350716D6"><h3 class="section-title">Prerequisites</h3><p>Before you
begin, refer to the following: </p><ul>
<li><p><a href="GUID-B6BDE53C-A583-4CC1-B8B9-5A1BBA59C8B1.html#GUID-CC637278-AD88-40BD-A99D-A65E1875B3BF">NFC Forum Tags</a></p></li>
<li><p>nfcconnection.h, <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-58818925-6366-30DB-8DEE-68AD60A34FE0.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-58818925-6366-30DB-8DEE-68AD60A34FE0.html"><code class="apiname">MNfcConnection</code></a></p></li>
<li><p>nfctype1connection.h, <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6D102F2B-F74B-3B80-B244-C8BF902449B4.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6D102F2B-F74B-3B80-B244-C8BF902449B4.html"><code class="apiname">CNfcType1Connection</code></a></p></li>
<li><p>nfctype2connection.h, <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-CDE7C968-FA04-368D-9189-00AEC2BE0B24.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-CDE7C968-FA04-368D-9189-00AEC2BE0B24.html"><code class="apiname">CNfcType2Connection</code></a></p></li>
<li><p>nfctype3connection.h, <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-2B1CEAFC-83C3-3D63-B347-46ADF6B40BFE.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-2B1CEAFC-83C3-3D63-B347-46ADF6B40BFE.html"><code class="apiname">CNfcType3Connection</code></a></p></li>
<li><p>nfctag.h, <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4278615F-1C20-31D7-87D4-996F988B732B.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4278615F-1C20-31D7-87D4-996F988B732B.html"><code class="apiname">MNfcTag</code></a></p></li>
</ul></div>
<h3>Steps</h3><ol id="GUID-4DD07DEC-6017-4237-BE46-1D69E5FBD744-GENID-GUID-A064A525-0126-4611-B5B4-7EE8851345A7"><a name="GUID-4DD07DEC-6017-4237-BE46-1D69E5FBD744-GENID-GUID-A064A525-0126-4611-B5B4-7EE8851345A7"><!-- --></a>
<li id="GUID-9A69E5AD-E938-4092-A8C2-CB65C37C8962-GENID-GUID-A064A525-0126-4611-B5B4-7EE8851345A7"><a name="GUID-9A69E5AD-E938-4092-A8C2-CB65C37C8962-GENID-GUID-A064A525-0126-4611-B5B4-7EE8851345A7"><!-- --></a><p>Follow the
steps in <a href="GUID-B961F4BB-ABF3-442E-A6E9-7AB103E9CAA6.html">Discovering
NFC Tags</a> to detect the type 1 tag.</p>
</li>
<li id="GUID-5D4FBAC9-8FC8-4409-B104-D62953F0F436-GENID-GUID-A064A525-0126-4611-B5B4-7EE8851345A7"><a name="GUID-5D4FBAC9-8FC8-4409-B104-D62953F0F436-GENID-GUID-A064A525-0126-4611-B5B4-7EE8851345A7"><!-- --></a><p>Create a
new instance of the specific tag class.</p>
<ul>
<li><div class="p"><strong>Tag Type 1</strong>: Create a new instance of <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6D102F2B-F74B-3B80-B244-C8BF902449B4.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6D102F2B-F74B-3B80-B244-C8BF902449B4.html"><code class="apiname">CNfcType1Connection</code></a> class. For example, <pre class="codeblock">CNfcType1Connection* Type1Connection;
Type1Connection = CNfcType1Connection::NewL(iNfcServer);</pre></div></li>
<li><div class="p"><strong>Tag Type 2</strong>: Create a new instance of <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-CDE7C968-FA04-368D-9189-00AEC2BE0B24.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-CDE7C968-FA04-368D-9189-00AEC2BE0B24.html"><code class="apiname">CNfcType2Connection</code></a> class. For example, <pre class="codeblock">CNfcType2Connection* Type2Connection;
Type2Connection = CNfcType2Connection::NewL(iNfcServer);</pre></div></li>
<li><div class="p"><strong>Tag Type 3</strong>: Create a new instance of <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-2B1CEAFC-83C3-3D63-B347-46ADF6B40BFE.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-2B1CEAFC-83C3-3D63-B347-46ADF6B40BFE.html"><code class="apiname">CNfcType3Connection</code></a> class. For example, <pre class="codeblock">CNfcType3Connection* Type3Connection;
Type3Connection = CNfcType3Connection::NewL(iNfcServer);</pre></div></li>
</ul>
</li>
<li id="GUID-626C2A60-CC19-4B8C-BE30-3B0E94654F96-GENID-GUID-A064A525-0126-4611-B5B4-7EE8851345A7"><a name="GUID-626C2A60-CC19-4B8C-BE30-3B0E94654F96-GENID-GUID-A064A525-0126-4611-B5B4-7EE8851345A7"><!-- --></a><p>Open the
connection to the tag using <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-4278615F-1C20-31D7-87D4-996F988B732B.html#GUID-E2A1B6F0-8544-3D7A-BCA0-54212098A7F7"><code class="apiname">MNfcTag::OpenConnection()</code></a> and pass the instance of the tag class.</p>
<p>For example for the Type 1 tag:</p><pre class="codeblock">MNfcTag* iTag; 
iTag-&gt;OpenConnection( *Type1Connection );       </pre>
</li>
<li id="GUID-626C2A60-CC19-4B8C-BE30-3B0E94654F96-GENID-GUID-A064A525-0126-4611-B5B4-7EE8851345A7"><a name="GUID-626C2A60-CC19-4B8C-BE30-3B0E94654F96-GENID-GUID-A064A525-0126-4611-B5B4-7EE8851345A7"><!-- --></a><p>Read the
data from the tags using the specific tag methods.</p>
<div class="note"><p><strong class="note_title">Note: </strong>Only one read command can be requested at a time for
a specific type of tag.</p></div>
<ul>
<li><p><strong>Type 1 Tag</strong>: Read data from the target Type 1 tag using <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-6D102F2B-F74B-3B80-B244-C8BF902449B4.html#GUID-E98F6AA6-E18E-3D2F-A941-EB7C3DE9626A"><code class="apiname">CNfcType1Connection::Read()</code></a>. For example, </p><pre class="codeblock">void CMyTagInitializer::Type1ReadL()
{
//Specify the no. of bytes of information that has to be read
TInt amount = 5 ;

//Specify the byte address
TInt byte = 0; 

//Specify the block address
Tint block =6; 

//Specify the address from which the read operation should start.
TNfcType1Address type1address( byte, block ); 
iReadBuffer.Zero();
iReadBuffer.ReAlloc(amount); 
iNfcType1Connection-&gt;Read( iReadWait-&gt;iStatus, iReadBuffer, amount, type1address );       
iReadWait-&gt;SetActive();    

//The data is read in iReadBuffer.
}</pre></li>
<li><p><strong>Type 2 Tag</strong>: Read data from the target Type 2 tag using <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-CDE7C968-FA04-368D-9189-00AEC2BE0B24.html#GUID-E5FA7D0E-6008-3FB9-ADAD-DA22C1F224C6"><code class="apiname">CNfcType2Connection::Read()</code></a>. </p><pre class="codeblock">void CMyTagInitializer::Type2ReadL()
{
//Specify the no. of bytes of information that has to be read
TInt amount = 5 ;

//Specify the byte address
TInt byte = 0; 

//Specify the block address
Tint block =6; 

//Specify the address from which the read operation should start.
TNfcType2Address type2address( byte, block ); 

iReadBuffer.Zero();
iReadBuffer.ReAlloc(amount); 
iNfcType2Connection-&gt;Read( iReadWait-&gt;iStatus, iReadBuffer, amount, type2address );       
iReadWait-&gt;SetActive();    

//The data is read in iReadBuffer.
}</pre></li>
<li><p><strong>Type 3 Tag</strong>: Read memory blocks from the Type 3 tag using <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-2B1CEAFC-83C3-3D63-B347-46ADF6B40BFE.html#GUID-BB59B38A-F202-36CC-8329-C06B8DD5FBA7"><code class="apiname">CNfcType3Connection::Check()</code></a>. </p><pre class="codeblock">void CMyTagInitializer::Type3ReadL()
{
//Specify the no. of bytes of information that has to be read
TInt amount = 5 ;

//Specify the byte address
TInt byte = 0; 

//Specify the block address
Tint block =6; 

//Specify the servicecode address.
TInt service = 11;	

//Specify the address from which the read operation should start.
TNfcType3Address type3address( byte, block, service ); 

iReadBuffer.Zero();
iReadBuffer.ReAlloc(amount); 
iNfcType3Connection-&gt;Check( iReadWait-&gt;iStatus, iReadBuffer, amount, type3address );       
iReadWait-&gt;SetActive();    

//The data is read in iReadBuffer.
}</pre></li>
</ul><div class="note"><p><strong class="note_title">Note: </strong>The <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-D283C457-DD37-366E-866F-8620494A3599.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-D283C457-DD37-366E-866F-8620494A3599.html"><code class="apiname">TNfcType1Address</code></a>, <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-FFF0FED5-8AE5-37DC-BB28-A3A2D6F0E758.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-FFF0FED5-8AE5-37DC-BB28-A3A2D6F0E758.html"><code class="apiname">TNfcType2Address</code></a> and <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-910B80CA-DF08-3BA1-8A1E-F49684D8457F.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-910B80CA-DF08-3BA1-8A1E-F49684D8457F.html"><code class="apiname">TNfcType3Address</code></a> are helper classes  which
provides access to manage NFC Forum Type 1, Type 2 and Type 3 addresses
respectively. The read address is specified by <code class="codeph">aAddress</code> parameter. If <code class="codeph">aAddress</code> parameter is <code class="codeph">NULL</code>, the read operation continues from where the latest read operation
had stopped.</p></div>
<p>The sequence diagram below illustrates how reading from a
tag works:</p><div class="figure" id="GUID-966B0EEB-0864-4F6B-B79D-591EF10C8623"><img src="GUID-F2200C37-8C10-45C7-A443-AB74ECE7C477_d0e416821_href.png" /></div>
</li>
</ol>
</div><h3>Related concepts</h3><ul><li><a href="GUID-B6BDE53C-A583-4CC1-B8B9-5A1BBA59C8B1.html">NFC
Services Concepts</a></li></ul><h3>Related tasks</h3><ul><li><a href="GUID-3DC13AA4-6CC8-45CA-8FF8-8B222DFFC00B.html">Exchanging
Data with NFC Forum Type 4 Tag</a></li><li><a href="GUID-F5F59B7B-591A-4294-84ED-359CB2AD52EA.html">Writing
to NFC Forum Type 1, 2, 3 Tags</a></li></ul></div></div><div class="footer"><p class="metadata">Last updated January 11th, 2011</p><hr /><div class="copy">© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-0039F43D-82BF-438D-A394-1DEC44797D95.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:16:24 GMT -->
</html>