
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-E71DEB5F-A13A-5675-B2DE-9BCFDB38A3EC.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 05:59:53 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="What is the mechanism for reading, writing and searching for data" /><meta name="abstract" content="This topic describes the mechanism for reading data from the Comms Database and writing data to the Comms Database." /><meta name="description" content="This topic describes the mechanism for reading data from the Comms Database and writing data to the Comms Database." /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04" /><meta name="DC.Relation" scheme="URI" content="GUID-C3018CEE-865B-595A-A735-40E11665E50A" /><meta name="DC.Relation" scheme="URI" content="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138" /><meta name="DC.Relation" scheme="URI" content="GUID-1AFDDD6F-CB99-587D-A0B5-D3F5B27F7135" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-E71DEB5F-A13A-5675-B2DE-9BCFDB38A3EC" /><meta name="DC.Language" content="en" /><title>What is the mechanism for reading, writing and searching for data </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-E71DEB5F-A13A-5675-B2DE-9BCFDB38A3EC">What is the mechanism for reading, writing and searching for data</h1><div><p>This topic describes the mechanism for reading data from the Comms Database and writing data to the Comms Database. </p><p>All elements that you can read and write have the class <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">MMetaDatabase</code></a> as a base class. This base class contains the functions that get and store that element. </p> <p>Tables, records, links and fields are all elements. The classes that represent tables, records, links and fields have <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">MMetaDatabase</code></a> in their class hierarchy. You use the functions in <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">MMetaDatabase</code></a> to load and store tables, records, links and fields. </p> <div class="figure" id="GUID-3EED9581-A88B-5E79-B672-42486CFB6BE3"><img src="GUID-69831D75-D16D-54CF-A083-0EDB358F3390_d0e109772_href.png" /></div> <p>The <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">MMetaDatabase</code></a> class gives you: </p> <ul><li id="GUID-3D33E6EE-F6FA-5B75-A165-4A8731BD2FCB"><a name="GUID-3D33E6EE-F6FA-5B75-A165-4A8731BD2FCB"><!-- --></a><p>the functions to get data from the Comms Database: <code class="codeph">LoadL()</code>, <code class="codeph">FindL()</code>, <code class="codeph">RefreshL()</code> </p> </li> <li id="GUID-413D285C-2447-5157-B573-51056F79C50D"><a name="GUID-413D285C-2447-5157-B573-51056F79C50D"><!-- --></a><p>the functions to put data into the Comms Database: <code class="codeph">StoreL()</code>, <code class="codeph">ModifyL()</code>, <code class="codeph">DeleteL()</code> </p> </li> </ul> <div><h3 class="section-title">Getting data directly from the Comms Database</h3> <p>If you know the record Id part of the <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a> of a table, record, field or link, you can load the table, record, field or link from the Comms Database. Call <code class="codeph">SetRecordId()</code> on the <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">CMDBElement</code></a> base class to set the record Id. Call <code class="codeph">LoadL()</code> on the <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">MMetaDatabase</code></a> base class to load the table, record, field or link. </p> <p>The CommsDat API gets the data that the tool or application is allowed to see from the Comms database. The data that the tool or application can see depends on platform security capabilities and the access attributes for the session. </p> <p>A request to load a single element fails if the tool or application does not have the platform security capabilities. </p> <p>A request to load a table does not fail if some records in the table are not available. The tool or application can see only those records that are available. </p> <p>A request to load a record does not fail if some fields in the record are not available. The tool or application can see only those fields that are available. </p> <p> <code class="codeph">LoadL()</code> writes over the content of the table, record, field or link object in memory. </p> <p> <code class="codeph">LoadL()</code> opens a read-only transaction with the Comms Database if the tool or application has not already started a transaction. </p> </div> <div><h3 class="section-title">Finding data in the Comms Database</h3> <p>You can search for records in the Comms Database. There are two patterns: </p> <p><strong>Finding a single record that has specified field values </strong> </p> <p>You create a <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">CMDBRecordBase</code></a> object in memory. You select the fields for the search and set the field values. Call <code class="codeph">FindL()</code> on the <code class="codeph">CMDBRecordBase</code> object. <code class="codeph">FindL()</code> is member of the <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">MMetaDatabase</code></a> base class. If the search is successful, the CommsDat API fills the <code class="codeph">CMDBRecordBase</code> object with the values from the first record in the Comms Database that matches. The values include the <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a>. If the search is not successful, the <code class="codeph">CMDBRecordBase</code> object is not changed. </p> <p> <code class="codeph">FindL()</code> opens a read-only transaction with the Comms Database if the tool or application has not already started a transaction. </p> <p>Note that you do not need to set the record Id part of the <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a> of the table, the record, the field or the link object. </p> <p><strong>Finding all records in a table that match a specified record </strong> </p> <p>You create a <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">CMDBRecordSet</code></a> object and append a single record to the array of records. You select the fields for the search and set the field values. This record is the 'search record'. Call <code class="codeph">FindL()</code> on the <code class="codeph">CMDBRecordSet</code> object. If the search is successful, the function returns a number of complete records. The first record found writes over the 'search record'. If the search is not successful, the <code class="codeph">CMDBRecordSet</code> object is not changed </p> <p> <code class="codeph">FindL()</code> opens a read-only transaction with the Comms Database if the tool or application has not already started a transaction. </p> <p>Note that you do not need to set the record Id part of the <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a> of the table, the record, the field or the link object. </p> </div> <div><h3 class="section-title">Refreshing data in memory</h3> <p>You can update your copy of the data in memory. You call <code class="codeph">RefreshL()</code> to update the data. The method is similar to <code class="codeph">LoadL()</code> but the method does not write over fields that the tool or application has changed. All other fields are refreshed from the Comms Database. </p> <p> <code class="codeph">RefreshL()</code> is a member of the <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">MMetaDatabase</code></a> base class. </p> <p> <code class="codeph">RefreshL()</code> is useful if a tool or application maintains a cache of Comms information. </p> <p> <code class="codeph">RefreshL()</code> opens a read-only transaction with the Comms Database if the tool or application has not already started a transaction. </p> </div> <div><h3 class="section-title">Adding new data to the Comms Database</h3> <p>If need to add or change the data in the Comms Database you must add or change the data in the table, the record, the link or the field object in memory. </p> <p>Call <code class="codeph">StoreL()</code> to create new records, tables and fields. The CommsDat API only stores the fields that the tool or application has changed. </p> <p>A table, record, field or link object that exists must have a valid <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a> before the call to <code class="codeph">StoreL()</code>. </p> <p>To add a new user defined table to the Comms Database set the record Id part of the <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a> of the table to <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">KCDNewTableRequest</code></a> before the call to <code class="codeph">StoreL()</code>. Call <code class="codeph">SetRecordId()</code> on the <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">CMDBElement</code></a> base class to set the record Id. </p> <p>To add a new record to a table set the record Id part of the <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a> of the table to <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">KCDNewRecordRequest</code></a> before the call to <code class="codeph">StoreL()</code>. Call <code class="codeph">SetRecordId()</code> on the <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">CMDBElement</code></a> base class to set the record Id. The table must exist before you add the new record. </p> <p>To add a new column to a user defined table set the record Id part of the <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a> of the table to <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">KCDNewColumnRequest</code></a> before the call to <code class="codeph">StoreL()</code>. Call <code class="codeph">SetRecordId()</code> on the <strong class="conversion-error-message" title="[NOKX000E] Unable to find definition for key reference 'CommsDat'">[[[ERROR: [NOKX000E] Unable to find definition for key reference 'CommsDat']]]</strong><a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html#GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><code class="apiname">CMDBElement</code></a> base class to set the record Id. The effect of a new column is to add a new field in the user defined records. </p> <p>The tool or application must have the platform security capabilities to write to the Comms Database. </p> <p> <code class="codeph">StoreL()</code> opens a read/write transaction with the Comms Database if the tool or application has not already started a transaction. </p> </div> <div><h3 class="section-title">Changing data in the Comms Database</h3> <p>If you need to change data in the Comms Database you must change the data in the table, the record, the link or the field object in memory. The table, the record, the link and the field must already exist in the database. </p> <p>Call <code class="codeph">ModifyL()</code> to change existing data. The function cannot create new records or tables, but can store new fields in a record. </p> <p>The tool or application must have the platform security capabilities to write to the Comms Database. </p> <p> <code class="codeph">ModifyL()</code> opens a read/write transaction with the Comms Database if the tool or application has not already started a transaction. </p> </div> <div><h3 class="section-title">Deleting data from the Comms Database</h3> <p>Call <code class="codeph">DeleteL()</code> to delete a table, a record, a field or a link from the Comms Database. </p> <p>The tool or application must have the platform security capabilities to write to the Comms Database. </p> <p> <code class="codeph">DeleteL()</code> opens a read/write transaction with the Comms Database if the tool or application has not already started a transaction. </p> </div> </div></div></div><div class="footer"><p class="metadata">Last updated October 9th, 2009</p><hr /><div class="copy">© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-E71DEB5F-A13A-5675-B2DE-9BCFDB38A3EC.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 05:59:54 GMT -->
</html>