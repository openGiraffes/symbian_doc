
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-BD9CBBE8-9389-50F9-98B1-0A07F7E2891C.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:00:30 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2011" /><meta name="DC.rights.owner" content="(C) Copyright 2011" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="How to Wait for the Write Buffer to Empty: Tutorial" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04" /><meta name="DC.Relation" scheme="URI" content="GUID-9B83CDD4-FC94-51A0-AC67-CD04BCAFEF08" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-BD9CBBE8-9389-50F9-98B1-0A07F7E2891C" /><meta name="DC.Language" content="en" /><title>How to Wait for the Write Buffer to Empty: Tutorial </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_design.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-BD9CBBE8-9389-50F9-98B1-0A07F7E2891C">How to Wait for the Write Buffer to Empty: Tutorial</h1><div><p>This tutorial shows how to wait for the device driver to transmit data when a write request has previously been terminated early. </p> <p>The tutorial <a href="GUID-294EF1C3-E7EC-5B93-B4F4-ECA50DD6993F.html">How to Terminate Write Requests Early</a> shows how the <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3B4E8ED5-72F7-3E51-B188-3C1045526DDF.html#GUID-8FB1FC0F-EF29-3EE9-BD4B-359CE42F3796"><code class="apiname">RComm::Write</code></a> API can return early. </p> <p>To wait for the buffer to be empty, call <a href="GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-3B4E8ED5-72F7-3E51-B188-3C1045526DDF.html#GUID-27B1F841-8478-33E0-A168-11DC468183C0"><code class="apiname">RComm::Write()</code></a> in one of two ways: </p> <ul><li id="GUID-92DCE453-6E78-57DA-BAC3-CC62645B359F"><a name="GUID-92DCE453-6E78-57DA-BAC3-CC62645B359F"><!-- --></a><p>sending an empty descriptor: </p> <pre class="codeblock">outputBuffer.Zero();
commPort.Write (requeststatus,outputBuffer);</pre> </li> <li id="GUID-982A2F50-B25B-55F2-BEB2-FEB3ABE13080"><a name="GUID-982A2F50-B25B-55F2-BEB2-FEB3ABE13080"><!-- --></a><p>sending a descriptor with an optional length parameter of zero: </p> <pre class="codeblock">commPort.Write (requeststatus,outputBuffer,0);</pre> </li> </ul> <p>The state of the <code class="codeph">KConfigWriteBufferedComplete</code> bit has no effect when the above methods are used. </p> <p>This is a useful feature that enables something like a file transfer of a series of blocks to be sent efficiently making use of early completion, while still being able to guarantee through the method above that all the data has actually cleared the transmitter at end of the transfer. </p> </div></div></div><div class="footer"><p class="metadata">Last updated October 9th, 2009</p><hr /><div class="copy">Â© Nokia 2011.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-BD9CBBE8-9389-50F9-98B1-0A07F7E2891C.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 06:00:30 GMT -->
</html>