
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:07:24 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Using the Domain Name Resolution Tutorial" /><meta name="abstract" content="This topic describes how to use the domain name resolution." /><meta name="description" content="This topic describes how to use the domain name resolution." /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-B144EAB9-53AB-579B-9E12-B16518E4FC01" /><meta name="DC.Relation" scheme="URI" content="GUID-82438A0F-819C-5CDC-81DC-A8BFE3AA4A6A" /><meta name="DC.Relation" scheme="URI" content="GUID-7821C498-70A2-5D3C-989A-58CEBAE9162B" /><meta name="DC.Relation" scheme="URI" content="GUID-3A14EB6E-2F28-51F6-9D80-1AFCFFBDDF9D" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E" /><meta name="DC.Language" content="en" /><title> Using the Domain Name Resolution Tutorial </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E"> Using the Domain Name Resolution Tutorial</h1><div><p>This topic describes how to use the domain name resolution. </p><div id="GUID-7532AA62-7F2E-5366-870F-19679078A49D"><h3 class="section-title">Required background</h3> <p>You must be familiar with <code class="codeph">RHostResolver()</code> to understand this tutorial. The <code class="codeph">RHostResolver()</code> function is defined in <code>es_sock.h</code>. Types and constants specific to TCP/IP are used in <code class="codeph">RHostResolver()</code> arguments are defined in <code>in_sock.h</code>. </p> </div> <div><h3 class="section-title">Introduction</h3> <p>The TCP/IP stack contains a Domain Name Service (DNS). The client programs conducts DNS queries through the generic host name resolution interface <code class="codeph">RHostResolver</code>, specifying protocol-specific behaviour through the argument values. This tutorial describes how the <code class="codeph">RHostResolver()</code> functions are used for DNS. </p> </div> <div><h3 class="section-title">Procedure</h3> <ol id="GUID-9B54766B-150D-5C97-A8CE-DDD3FE6905DD"><li id="GUID-F8AA8622-612A-5E54-A1ED-42148F42CC10"><a name="GUID-F8AA8622-612A-5E54-A1ED-42148F42CC10"><!-- --></a><p>The <code class="codeph">RHostResolver::Open()</code> function starts the DNS access. </p> <p>The parameter values are as follows: </p> <div class="p"><div class="tablenoborder"><a name="GUID-103482B4-11F7-5F14-9408-194BDA258A75"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-103482B4-11F7-5F14-9408-194BDA258A75" frame="border" border="1" rules="all"><tbody><tr class=""><td class="cellrowborder" valign="top"><p> <strong>Parameter</strong> </p> </td> <td class="cellrowborder" valign="top"><p> <strong>Description</strong> </p> </td> </tr> <tr class="bg "><td class="cellrowborder" valign="top"><p> <code class="codeph">addrFamily</code> </p> </td> <td class="cellrowborder" valign="top"><p>Always <code class="codeph">KAfInet</code> </p> </td> </tr> <tr class=""><td class="cellrowborder" valign="top"><p> <code class="codeph">aProtocol</code> </p> </td> <td class="cellrowborder" valign="top"><p>Always <code class="codeph">KProtocolInetUdp</code> </p> </td> </tr> </tbody> </table></div> </div> </li> <li id="GUID-97330842-8FAE-50FA-8CDA-2B51C29E2309"><a name="GUID-97330842-8FAE-50FA-8CDA-2B51C29E2309"><!-- --></a><p>The <code class="codeph">RHostResolver::Close()</code> function closes the DNS access. </p> </li> </ol> </div> <div><h3 class="section-title">DNS Query example</h3> <p>When a query is made, the protocol takes the following sequence of actions: </p> <ul><li id="GUID-E9AF9E05-3F92-535E-B855-C122CEA67F8B"><a name="GUID-E9AF9E05-3F92-535E-B855-C122CEA67F8B"><!-- --></a><p>Searches the local HOSTS file, if it exists. The <code>hosts</code> file is stored in the <code>\private\10000882\</code> directory. </p> </li> <li id="GUID-086E42EC-E68B-56D7-98C0-9DFDF743FD51"><a name="GUID-086E42EC-E68B-56D7-98C0-9DFDF743FD51"><!-- --></a><p>If an answer is not found, it checks the DNS cache. The protocol queries the DNS server using a UDP socket. If there is no current connection, a dial-up connection is called. </p> </li> <li id="GUID-1822F3AD-53ED-5CA2-A2CE-6E8BB9CFBECC"><a name="GUID-1822F3AD-53ED-5CA2-A2CE-6E8BB9CFBECC"><!-- --></a><p>If an answer is found, the answer is added to the cache. </p> </li> </ul> <p> <strong>Note:</strong> The cache entries are held continuously while the client <code class="codeph">RHostResolver</code> object is open, for TTL 0 records. The client queries the <code class="codeph">RHostResolver</code> object to get the latest records. </p> <p> <strong>Note:</strong> The DNS server used is managed by PPP to establish a dial-up connection, or configured by the user in ISP settings. </p> <p>The <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-B16CAD6D-85B1-3482-AAC0-9BADEDB6ABDD.html#GUID-37A2B030-8FDE-372C-938D-FD3D26370BDC"><code class="apiname">RHostResolver::GetByName()</code></a> or <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-B16CAD6D-85B1-3482-AAC0-9BADEDB6ABDD.html#GUID-B210BAF2-1D26-3F5A-8EBE-EF5B460A69E1"><code class="apiname">RHostResolver::GetByAddress()</code></a> can be called asynchronously, so that the application can select the program and the data when it is required. For more information see Next Result. </p> <p><strong>Resolve name</strong> </p> <p>Use <code class="codeph">RHostResolver::GetByName()</code> to resolve a symbolic name to an IP address. The parameters are as follows: </p> <div class="tablenoborder"><a name="GUID-4541EEBA-39CB-58BB-98BF-86B8BD885DA1"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-4541EEBA-39CB-58BB-98BF-86B8BD885DA1" frame="border" border="1" rules="all"><tbody><tr class=""><td class="cellrowborder" valign="top"><p> <strong>Parameter</strong> </p> </td> <td class="cellrowborder" valign="top"><p> <strong>Description</strong> </p> </td> </tr> <tr class="bg "><td class="cellrowborder" valign="top"><p> <code class="codeph">aName</code> </p> </td> <td class="cellrowborder" valign="top"><p>The symbolic name to resolve. </p> <p> <strong>Note:</strong> If you pass the local host name or a null descriptor the result is the address of the network interface. The <code class="codeph">RHostResolver::GetHostName()</code> returns the local host name. </p> </td> </tr> <tr class=""><td class="cellrowborder" valign="top"><p> <code class="codeph">aResult</code> </p> </td> <td class="cellrowborder" valign="top"><p>Returns the result of the name resolution. Unpack the <code class="codeph">TNameEntry</code> to get a <code class="codeph">TNameRecord</code> with the following members: </p> <p> <code class="codeph">iName</code>: the value of the passed <code class="codeph">aName</code> </p> <p> <code class="codeph">iAddr</code>: the address information. Assign the <code class="codeph">iAddr</code> to <code class="codeph">TInetAddr</code> to get the IP address. </p> <p> <code class="codeph">iFlags</code>: a bitmask of <code class="codeph">TNameRecordFlags</code> flags. </p> </td> </tr> </tbody> </table></div> <p><strong>Get name</strong> </p> <p>Use <code class="codeph">RHostResolver::GetByAddress()</code> to get an IP address from a symbolic name. The parameters are as follows: </p> <div class="tablenoborder"><a name="GUID-DED037D9-5BB7-595C-907B-144FF98FC8B9"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-DED037D9-5BB7-595C-907B-144FF98FC8B9" frame="border" border="1" rules="all"><tbody><tr class=""><td class="cellrowborder" valign="top"><p> <strong>Parameter</strong> </p> </td> <td class="cellrowborder" valign="top"><p> <strong>Description</strong> </p> </td> </tr> <tr class="bg "><td class="cellrowborder" valign="top"><p> <code class="codeph">anAddr</code> </p> </td> <td class="cellrowborder" valign="top"><p>A <code class="codeph">TInetAddr</code> specifies the IP address to use. </p> <p> <strong>Note:</strong> If you pass a null address or an address that matches the primary network interface, the local host name is returned. </p> </td> </tr> <tr class=""><td class="cellrowborder" valign="top"><p> <code class="codeph">aResult</code> </p> </td> <td class="cellrowborder" valign="top"><p>Returns the result of the name resolution. Unpack the <code class="codeph">TNameEntry</code> to get a <code class="codeph">TNameRecord</code> with the following members: </p> <p> <code class="codeph">iName</code>: the symbolic name </p> <p> <code class="codeph">iAddr</code>: the value of the passed <code class="codeph">anAddr</code> </p> <p> <code class="codeph">iFlags</code>: a bitmask of <code class="codeph">TNameRecordFlags</code> flags. </p> </td> </tr> </tbody> </table></div> <p><strong>Next result</strong> </p> <p>The <code class="codeph">Next()</code> function finds more answers after an initial <code class="codeph">GetByName()</code> or <code class="codeph">GetByAddress()</code> query. </p> <p>For <code class="codeph">GetByName()</code>, the matching A record (IP address) is returned first. Calls to <code class="codeph">Next()</code> return any further CNAME (alias) or A records. CNAME records have the IP address set to 0 and the <code class="codeph">EDnsAlias</code> flag set. </p> <p>For <code class="codeph">GetByAddress()</code>, the first matching PTR record (domain name) is returned first. Calls to <code class="codeph">Next()</code> return any further PTR records. </p> <p> <strong> Note:</strong> <code class="codeph">The Next()</code> can be called synchronously, because all information is retrieved from a local buffer that was written by the initial query. </p> <p><strong>Local host</strong> </p> <p> <code class="codeph">RHostResolver::GetHostName()</code> and <code class="codeph">RHostResolver::SetHostName()</code> get and set the name of the local host. </p> </div> </div></div></div><div class="footer"><p class="metadata">Last updated October 9th, 2009</p><hr /><div class="copy">© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:07:24 GMT -->
</html>