
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-B661DFBC-9779-597D-A1DA-4FE085DAA61A.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:56:21 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="CRT0 Libraries of STDLIB" /><meta name="DC.Relation" scheme="URI" content="GUID-F51062B0-90BB-5659-9F23-2FF25116D78A" /><meta name="DC.Relation" scheme="URI" content="GUID-61DEE78D-4E78-5367-BC8A-F99D3B4E9D5A" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657" /><meta name="DC.Relation" scheme="URI" content="GUID-E2DE2C6F-E071-5E88-96F1-D71DDED84609" /><meta name="DC.Relation" scheme="URI" content="GUID-440FDF7D-B9A0-5767-9FF8-412803C0D2A9" /><meta name="DC.Relation" scheme="URI" content="GUID-39FA0ECE-D403-5F02-AC5D-7BC8E1669E8E" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-B661DFBC-9779-597D-A1DA-4FE085DAA61A" /><meta name="DC.Language" content="en" /><title>CRT0
Libraries of STDLIB </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-B661DFBC-9779-597D-A1DA-4FE085DAA61A">CRT0
Libraries of STDLIB</h1><div>
<p>This section explains the CRT0 libraries provided by STDLIB. </p>
<p>The following table lists the CRT0 libraries: </p>
<div class="tablenoborder"><a name="GUID-D74087AE-6FCA-5C46-98AE-EAC4AE3B6867"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-D74087AE-6FCA-5C46-98AE-EAC4AE3B6867" frame="border" border="1" rules="all">
<thead align="left">
<tr class="title ">
<th class="cellrowborder" valign="top" id="d0e219366">Simple Mode (thread local mode)</th>
</tr>
</thead>
<tbody>
<tr class="">
<td class="cellrowborder" valign="top" headers="d0e219366 "><p> <code class="codeph">ecrt0.lib</code> </p> </td>
<td class="cellrowborder" valign="top"><p>EABI Emulators Narrow <code class="codeph">char main (int
argc, char *argv[], char                 *envp[])</code> </p> </td>
</tr>
<tr class="bg ">
<td class="cellrowborder" valign="top" headers="d0e219366 "><p> <code class="codeph">wecrt0.lib</code> </p> </td>
<td class="cellrowborder" valign="top"><p>EABI Emulators Wide <code class="codeph">char main (int
argc, wchar_t *argv[],                 wchar_t *envp[])</code> </p> </td>
</tr>
<tr class="">
<td class="cellrowborder" valign="bottom" headers="d0e219366 "><p><strong>Complex Mode (multi threaded mode / POSIX server
mode)</strong></p></td>
<td class="cellrowborder" valign="bottom">&nbsp;</td>
</tr>
<tr class="bg ">
<td class="cellrowborder" valign="top" headers="d0e219366 "><p> <code class="codeph"> mcrt0.lib</code> </p> </td>
<td class="cellrowborder" valign="top"><p>EABI Emulators Narrow <code class="codeph">char main (int
argc, char *argv[], char                 *envp[]</code> </p> </td>
</tr>
<tr class="">
<td class="cellrowborder" valign="top" headers="d0e219366 "><p> <code class="codeph">wcrt0.lib</code> </p> </td>
<td class="cellrowborder" valign="top"><p>Emulators Narrow <code class="codeph">char main (int argc,
char *argv[], char                 *envp[])</code> with stdxxx redirection
to Win32 using RWin32Stream server </p> </td>
</tr>
<tr class="bg ">
<td class="cellrowborder" valign="top" headers="d0e219366 "><p> <code class="codeph">wmcrt0.lib</code> </p> </td>
<td class="cellrowborder" valign="top"><p>EABI Emulators Wide <code class="codeph">char wmain (int
argc, wchar_t *argv[],                 wchar_t *envp[])</code> </p> </td>
</tr>
<tr class="">
<td class="cellrowborder" valign="top" headers="d0e219366 "><p> <code class="codeph">wwcrt0.lib</code> </p> </td>
<td class="cellrowborder" valign="top"><p>Emulator Wide <code class="codeph">char wmain (int argc,
wchar_t *argv[], wchar_t                 *envp[])</code> with stdxxx redirection
to Win32 using RWin32Stream server </p> </td>
</tr>
<tr class="bg ">
<td class="cellrowborder" valign="bottom" headers="d0e219366 "><p><strong>Other</strong></p></td>
<td class="cellrowborder" valign="bottom">&nbsp;</td>
</tr>
<tr class="">
<td class="cellrowborder" valign="top" headers="d0e219366 "><p> <code class="codeph">estw32.dll</code> </p> </td>
<td class="cellrowborder" valign="top"><p>Emulators: Provides the RWin32Stream server </p> </td>
</tr>
<tr class="bg ">
<td class="cellrowborder" valign="top" headers="d0e219366 "><p> <code class="codeph">redircli.dll</code> </p> </td>
<td class="cellrowborder" valign="top"><p>EABI Emulators: Provides application specific redirection
(for example, to Java RT or test applications). </p> </td>
</tr>
</tbody>
</table></div>
<p>These static libraries provide the compiler runtime glue code that runs
from the Symbian <code class="codeph">E32Main()</code> entry point for regular Symbian
executables into the standard C <code class="codeph">main()</code> entry point. </p>
<p>These executables are considered to be C programs hosted in a Symbian executable
image. The glue code has a number of functions to perform, for example: </p>
<ul>
<li id="GUID-2692C4C1-78E3-5F5B-BA1F-53FCE4CC085C"><a name="GUID-2692C4C1-78E3-5F5B-BA1F-53FCE4CC085C"><!-- --></a><p>marshalling the process
command arguments in the types used by <code class="codeph">main()</code> </p> </li>
<li id="GUID-822978FA-C8B4-5E01-A19A-F99306D31582"><a name="GUID-822978FA-C8B4-5E01-A19A-F99306D31582"><!-- --></a><p>initialising the C Standard
library context and mode of operation for example, calling <code class="codeph">SpawnPosixServerThread()</code>. </p> </li>
</ul>
<div><h3 class="section-title">ECRT0.lib and the cleanup stack</h3> <p>A normal Symbian
platform executable provides an <code class="codeph">E32Main()</code> function which
is called by the operating system to start the program. The file <code>ecrt0.lib</code> provides
an <code class="codeph">E32Main()</code> function for programs which use STDLIB. This
function prepares the traditional <code class="codeph">argc</code> and <code class="codeph">argv</code> arguments,
and passes them to <code class="codeph">main()</code>. </p> <p>For a simple example demonstrating
how to link to <code>ecrt0.lib</code>, see the description of the
project specification for "Hello World" in <a href="GUID-F51062B0-90BB-5659-9F23-2FF25116D78A.html">Porting</a>.
The user of STDLIB need not use <code>ecrt0.lib</code>, and may provide
their own <code class="codeph">E32Main()</code>. In this case, a <code class="codeph">CTrapCleanup</code> pointer
should normally be provided. This pointer is required because although STDLIB
does not call Symbian platform functions which can leave, it uses few functions
which require a cleanup stack. Code in <code>ecrt0.lib</code> provides
such a cleanup stack ("<code class="codeph">TheTrapCleanup</code> "), but programs which
do not link with <code>ecrt0.lib</code> must supply one directly. </p> <p>For
more details on the motivation behind Symbian's use of the cleanup stack,
see <a href="GUID-61DEE78D-4E78-5367-BC8A-F99D3B4E9D5A.html">Cleanup support</a>. </p> <p> <strong> NOTE</strong>:
If the program is a UI application, that is, one that includes the following
code in one of the source files: </p> <pre class="codeblock">GLDEF_C TInt E32Main()
    {
    return EikStart::RunApplication(NewApplication);
    }</pre> <p>then, the <code class="codeph">CTrapCleanup</code> pointer is provided
by the application framework. </p> </div>
</div><h3>Related concepts</h3><ul><li><a href="GUID-F51062B0-90BB-5659-9F23-2FF25116D78A.html">Porting Tutorials</a></li><li><a href="GUID-61DEE78D-4E78-5367-BC8A-F99D3B4E9D5A.html">Cleanup support
guide</a></li></ul></div></div><div class="footer"><p class="metadata">Last updated November 20th, 2009</p><hr /><div class="copy">Â© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-B661DFBC-9779-597D-A1DA-4FE085DAA61A.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:56:21 GMT -->
</html>