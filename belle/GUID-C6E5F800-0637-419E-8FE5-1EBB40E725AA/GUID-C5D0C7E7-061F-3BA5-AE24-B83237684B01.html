<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">

<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-C5D0C7E7-061F-3BA5-AE24-B83237684B01.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:22:46 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta name="DC.Type" content="cxxClass" />
<meta name="DC.Title" content="UserHeap" />
<meta name="abstract" content="" />
<meta name="description" content="" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="GUID-C5D0C7E7-061F-3BA5-AE24-B83237684B01" />
<title>UserHeap</title>
<meta name="keywords" content="api" /><link rel="stylesheet" type="text/css" href="css/nokiacxxref.css" />
<link href="css/s60/style.css" rel="stylesheet" type="text/css" />
<link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp3.html" rel="stylesheet" type="text/css" />
<link href="PLUGINS_ROOT/com.nokia.forum.library/css/category-cover_cpp3.html" rel="stylesheet" type="text/css" /></head>
<body id="GUID-C5D0C7E7-061F-3BA5-AE24-B83237684B01"><a name="GUID-C5D0C7E7-061F-3BA5-AE24-B83237684B01"><!-- --></a><div class="body"><div class="contentLeft prTxt">
<h1 class="sectiontitle">UserHeap Class Reference</h1>
<div class="state state apiQualifier apiQualifier cxxClassDeclarationFile section include"><p>#include 
            
                    &lt;e32std.h&gt;
                </p></div>
<div class="section signature"><table class="signature"><tr><td>class UserHeap</td></tr></table></div><div class="section member-index"><table class="member-index"><thead><tr><th colspan="2">Public Member Enumerations</th></tr></thead><tbody><tr><td align="right" valign="top" class="code">enum</td><td><a href="#GUID-287C3AF5-8AA4-3899-BB37-9F4EBB144B8D">TChunkHeapCreateMode</a> { <a href="#GUID-CBDDE0DC-93FF-3FBD-B3DE-F9C90EA0AC43">EChunkHeapSwitchTo</a>, <a href="#GUID-7EEC8D83-6087-3827-87E9-F09ECEAF5E9C">EChunkHeapDuplicate</a>, <a href="#GUID-EFA93480-7A33-3327-B7B8-30B89AF8ABFA">EChunkHeapMask</a> }</td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">IMPORT_C <a class="xref xref apiRelation" href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html">RHeap</a> *</td><td><a href="#GUID-FD00E159-3E9C-3D66-B1CF-F99447A61397">ChunkHeap</a>(const <a class="xref xref apiRelation" href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> *, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a class="xref xref apiRelation" href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html">RHeap</a> *</td><td><a href="#GUID-181380DA-ED44-3F0C-B182-C674EAD73FCC">ChunkHeap</a>(<a class="xref xref apiRelation" href="GUID-326A2F4D-0E99-31C0-A35D-E8BF45913F07.html">RChunk</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a>)</td></tr><tr><td align="right" class="code">IMPORT_C <a class="xref xref apiRelation" href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html">RHeap</a> *</td><td><a href="#GUID-69E29E36-3E70-3A9D-82EA-1F36BB12532C">ChunkHeap</a>(const <a class="xref xref apiRelation" href="GUID-3DCB92FB-9C74-3B73-B229-BF7944087EE9.html">TChunkHeapCreateInfo</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a class="xref xref apiRelation" href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html">RHeap</a> *</td><td><a href="#GUID-D045C135-4EA9-3007-9D56-98168D1C048C">ChunkHeap</a>(const <a class="xref xref apiRelation" href="GUID-3DCB92FB-9C74-3B73-B229-BF7944087EE9.html">TChunkHeapCreateInfo</a> &amp;, const <a class="xref xref apiRelation" href="GUID-2E51626C-F43C-3222-AEE7-C5D80367700C.html">THeapConfigParms</a> &amp;)</td></tr><tr><td align="right" class="code">IMPORT_C <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><a href="#GUID-0A23475A-EB9B-3F66-86E6-B9B5AB4D48CA">CreateThreadHeap</a>(SStdEpocThreadCreateInfo &amp;, <a class="xref xref apiRelation" href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html">RHeap</a> *&amp;, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a class="xref xref apiRelation" href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html">RHeap</a> *</td><td><a href="#GUID-C021F683-B233-3515-976A-FAFC0FA1089E">FixedHeap</a>(<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>)</td></tr><tr><td align="right" class="code">IMPORT_C <a class="xref xref apiRelation" href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html">RHeap</a> *</td><td><a href="#GUID-ECF5026A-11D4-3FED-85C0-8AE87D4AAF77">OffsetChunkHeap</a>(<a class="xref xref apiRelation" href="GUID-326A2F4D-0E99-31C0-A35D-E8BF45913F07.html">RChunk</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a>)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><a href="#GUID-9C7B94F3-2F86-3426-8C8B-D259826E5683">SetupThreadHeap</a>(<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>, SStdEpocThreadCreateInfo &amp;)</td></tr></tbody></table></div><div class="section section apiDesc section apidesc">
<h2 class="sectiontitle">Member Enumeration Documentation</h2><div class="topic reference apiRef apiValue cxxEnumeration nested1" id="GUID-287C3AF5-8AA4-3899-BB37-9F4EBB144B8D"><a name="GUID-287C3AF5-8AA4-3899-BB37-9F4EBB144B8D"><!-- --></a>
<h3 class="sectiontitle">Enum TChunkHeapCreateMode</h3>
<div class="body refbody apiDetail apiValueDetail cxxEnumerationDetail section enumerationdetail"><div class="section section apiDesc section apidesc">
<p class="p">Flags to control the heap creation. </p>
</div>
<div class="ph ph apiDefItem apiDefItem cxxEnumerators section enumerators"><table class="enumerators"><thead><tr><th>Enumerator</th><th>Value</th><th>Description</th></tr></thead><tr><td class="ph ph apiDefItem apiDefItem cxxEnumerator"><a name="GUID-CBDDE0DC-93FF-3FBD-B3DE-F9C90EA0AC43"><span class="enumerator">EChunkHeapSwitchTo</span></a></td><td>0x1</td><td>
<p class="p">On successful creation of the heap this switches the calling thread to use the new heap. </p>
</td></tr><tr class="bg"><td class="ph ph apiDefItem apiDefItem cxxEnumerator"><a name="GUID-7EEC8D83-6087-3827-87E9-F09ECEAF5E9C"><span class="enumerator">EChunkHeapDuplicate</span></a></td><td>0x2</td><td>
<p class="p">On successful creation of the heap this causes the handle to the heap to be duplicated. </p>
</td></tr><tr><td class="ph ph apiDefItem apiDefItem cxxEnumerator"><a name="GUID-EFA93480-7A33-3327-B7B8-30B89AF8ABFA"><span class="enumerator">EChunkHeapMask</span></a></td><td>EChunkHeapSwitchTo | EChunkHeapDuplicate</td><td> </td></tr></table></div>
</div>
</div>
<h2 class="sectiontitle">Member Function Documentation</h2><div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-FD00E159-3E9C-3D66-B1CF-F99447A61397"><a name="GUID-FD00E159-3E9C-3D66-B1CF-F99447A61397"><!-- --></a>
<a name="GUID-18A6B89B-4844-37E5-B46E-32188760A8C0"><!-- --></a><h3 class="sectiontitle">ChunkHeap ( const TDesC *, TInt, TInt, TInt, TInt, TBool )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a class="xref xref apiRelation" href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html">RHeap</a> *</td><td>ChunkHeap</td><td>(</td><td>const <a class="xref xref apiRelation" href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> *</td><td><span class="parameter">aName</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aMinLength</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aMaxLength</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aGrowBy</span> = 1,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aAlign</span> = 0,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td><span class="parameter">aSingleThread</span> = EFalse</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[static]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Creates a heap in a local or global chunk.</p>
<p class="p">The chunk hosting the heap can be local or global.</p>
<p class="p">A local chunk is one which is private to the process creating it and is not intended for access by other user processes. A global chunk is one which is visible to all processes.</p>
<p class="p">The hosting chunk is local, if the pointer aName is NULL, otherwise the hosting chunk is global and the descriptor *aName is assumed to contain the name to be assigned to it.</p>
<p class="p">Ownership of the host chunk is vested in the current process.</p>
<p class="p">A minimum and a maximum size for the heap can be specified. On successful return from this function, the size of the heap is at least aMinLength. If subsequent requests for allocation of memory from the heap cannot be satisfied by compressing the heap, the size of the heap is extended in increments of aGrowBy until the request can be satisfied. Attempts to extend the heap causes the size of the host chunk to be adjusted.</p>
<p class="p">Note that the size of the heap cannot be adjusted by more than aMaxLength.</p>
<div class="p">
</div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aName</td><td>If NULL, the function constructs a local chunk to host the heap. If not NULL, a pointer to a descriptor containing the name to be assigned to the global chunk hosting the heap.  </td></tr><tr class="bg"><td class="parameter">aMinLength</td><td>The minimum length of the heap in bytes. This will be rounded up to the nearest page size by the allocator.  </td></tr><tr><td class="parameter">aMaxLength</td><td>The maximum length in bytes to which the heap can grow. This will be rounded up to the nearest page size by the allocator.  </td></tr><tr class="bg"><td class="parameter">aGrowBy</td><td>The number of bytes by which the heap will grow when more memory is required. This will be rounded up to the nearest page size by the allocator. If a value is not explicitly specified, the page size is taken by default.  </td></tr><tr><td class="parameter">aAlign</td><td>From Symbian^4 onwards, this value is ignored but EABI 8 byte alignment is guaranteed for all allocations 8 bytes or more in size. 4 byte allocations will be aligned to a 4 byte boundary. Best to pass in zero.  </td></tr><tr class="bg"><td class="parameter">aSingleThread</td><td>EFalse if the heap is to be accessed from multiple threads. This will cause internal locks to be created, guaranteeing thread safety. </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>A pointer to the new heap or NULL if the heap could not be created.</dd></dl></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">41 if aMaxLength is &lt; aMinLength.</td></tr><tr><td class="paniccode">USER</td><td class="panicvalue">55 if aMinLength is negative.</td></tr><tr><td class="paniccode">USER</td><td class="panicvalue">56 if aMaxLength is negative.</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-181380DA-ED44-3F0C-B182-C674EAD73FCC"><a name="GUID-181380DA-ED44-3F0C-B182-C674EAD73FCC"><!-- --></a>
<h3 class="sectiontitle">ChunkHeap ( RChunk, TInt, TInt, TInt, TInt, TBool, TUint32 )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a class="xref xref apiRelation" href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html">RHeap</a> *</td><td>ChunkHeap</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-326A2F4D-0E99-31C0-A35D-E8BF45913F07.html">RChunk</a></td><td><span class="parameter">aChunk</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aMinLength</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aGrowBy</span> = 1,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aMaxLength</span> = 0,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aAlign</span> = 0,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td><span class="parameter">aSingleThread</span> = EFalse,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a></td><td><span class="parameter">aMode</span> = 0</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[static]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Creates a heap in an existing chunk.</p>
<p class="p">This function is intended to be used to create a heap in a user writable code chunk as created by a call to <a class="xref" href="GUID-326A2F4D-0E99-31C0-A35D-E8BF45913F07.html#GUID-0A06E183-557E-3FD8-BEA9-89DCD3C3B7C2">RChunk::CreateLocalCode()</a>. This type of heap can be used to hold code fragments from a JIT compiler.</p>
<p class="p">
</p><p class="p">See also: <a class="xref" href="GUID-C5D0C7E7-061F-3BA5-AE24-B83237684B01.html#GUID-ECF5026A-11D4-3FED-85C0-8AE87D4AAF77">UserHeap::OffsetChunkHeap()</a> </p>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aChunk</td><td>The chunk that will host the heap.  </td></tr><tr class="bg"><td class="parameter">aMinLength</td><td>The minimum length of the heap in bytes. This will be rounded up to the nearest page size by the allocator.  </td></tr><tr><td class="parameter">aGrowBy</td><td>The number of bytes by which the heap will grow when more memory is required. This will be rounded up to the nearest page size by the allocator. If a value is not explicitly specified, the page size is taken by default.  </td></tr><tr class="bg"><td class="parameter">aMaxLength</td><td>The maximum length in bytes to which the heap can grow. This will be rounded up to the nearest page size by the allocator. If 0 is passed in, the maximum lengt of the chunk is used.  </td></tr><tr><td class="parameter">aAlign</td><td>From Symbian^4 onwards, this value is ignored but EABI 8 byte alignment is guaranteed for all allocations 8 bytes or more in size. 4 byte allocations will be aligned to a 4 byte boundary. Best to pass in zero.  </td></tr><tr class="bg"><td class="parameter">aSingleThread</td><td>EFalse if the heap is to be accessed from multiple threads. This will cause internal locks to be created, guaranteeing thread safety.  </td></tr><tr><td class="parameter">aMode</td><td>Flags controlling the heap creation. See RAllocator::TFlags. </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>A pointer to the new heap or NULL if the heap could not be created.</dd></dl></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-69E29E36-3E70-3A9D-82EA-1F36BB12532C"><a name="GUID-69E29E36-3E70-3A9D-82EA-1F36BB12532C"><!-- --></a>
<h3 class="sectiontitle">ChunkHeap ( const TChunkHeapCreateInfo &amp; )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a class="xref xref apiRelation" href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html">RHeap</a> *</td><td>ChunkHeap</td><td>(</td><td>const <a class="xref xref apiRelation" href="GUID-3DCB92FB-9C74-3B73-B229-BF7944087EE9.html">TChunkHeapCreateInfo</a> &amp;</td><td><span class="parameter">aCreateInfo</span></td><td>)</td><td>[static]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Creates a chunk heap of the type specified by the parameter aCreateInfo.</p>
<div class="p">
</div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aCreateInfo</td><td>A reference to a TChunkHeapCreateInfo object specifying the type of chunk heap to create. </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>A pointer to the new heap or NULL if the heap could not be created.</dd></dl></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">41 if the heap's specified minimum length is greater than the specified maximum length.</td></tr><tr><td class="paniccode">USER</td><td class="panicvalue">55 if the heap's specified minimum length is negative.</td></tr><tr><td class="paniccode">USER</td><td class="panicvalue">172 if the heap's specified alignment is not a power of 2 or is less than the size of a TAny*.</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-D045C135-4EA9-3007-9D56-98168D1C048C"><a name="GUID-D045C135-4EA9-3007-9D56-98168D1C048C"><!-- --></a>
<h3 class="sectiontitle">ChunkHeap ( const TChunkHeapCreateInfo &amp;, const THeapConfigParms &amp; )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a class="xref xref apiRelation" href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html">RHeap</a> *</td><td>ChunkHeap</td><td>(</td><td>const <a class="xref xref apiRelation" href="GUID-3DCB92FB-9C74-3B73-B229-BF7944087EE9.html">TChunkHeapCreateInfo</a> &amp;</td><td><span class="parameter">aCreateInfo</span>,</td></tr><tr><td colspan="3"> </td><td>const <a class="xref xref apiRelation" href="GUID-2E51626C-F43C-3222-AEE7-C5D80367700C.html">THeapConfigParms</a> &amp;</td><td><span class="parameter">aConfigParms</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[static]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Creates a chunk heap of the type specified by the parameters aCreateInfo and aConfigParms.</p>
<div class="p">
</div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aCreateInfo</td><td>A reference to a TChunkHeapCreateInfo object specifying the type of chunk heap to create. </td></tr><tr class="bg"><td class="parameter">aConfigParms</td><td>A reference to a THeapConfigParms object specifying the parameters depending on the heap type. </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>A pointer to the new heap or NULL if the heap could not be created.</dd></dl></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">41 if the heap's specified minimum length is greater than the specified maximum length.</td></tr><tr><td class="paniccode">USER</td><td class="panicvalue">55 if the heap's specified minimum length is negative.</td></tr><tr><td class="paniccode">USER</td><td class="panicvalue">172 if the heap's specified alignment is not a power of 2 or is less than the size of a TAny*.</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-0A23475A-EB9B-3F66-86E6-B9B5AB4D48CA"><a name="GUID-0A23475A-EB9B-3F66-86E6-B9B5AB4D48CA"><!-- --></a>
<a name="GUID-670C7148-D5E0-3AB1-AFD9-4AB89188F706"><!-- --></a><h3 class="sectiontitle">CreateThreadHeap ( SStdEpocThreadCreateInfo &amp;, RHeap *&amp;, TInt, TBool )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>CreateThreadHeap</td><td>(</td><td>SStdEpocThreadCreateInfo &amp;</td><td><span class="parameter">aInfo</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html">RHeap</a> *&amp;</td><td><span class="parameter">aHeap</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aAlign</span> = 0,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td><span class="parameter">aSingleThread</span> = EFalse</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[static]</td></tr></table></div><div class="section section apiDesc section apidesc">
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters">
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-C021F683-B233-3515-976A-FAFC0FA1089E"><a name="GUID-C021F683-B233-3515-976A-FAFC0FA1089E"><!-- --></a>
<a name="GUID-89D5F87C-04D8-38D0-B558-7DDC5BD1DA92"><!-- --></a><h3 class="sectiontitle">FixedHeap ( TAny *, TInt, TInt, TBool )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a class="xref xref apiRelation" href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html">RHeap</a> *</td><td>FixedHeap</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *</td><td><span class="parameter">aBase</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aMaxLength</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aAlign</span> = 0,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td><span class="parameter">aSingleThread</span> = ETrue</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[static]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Creates a fixed length heap at a specified location.</p>
<p class="p">On successful return from this function, the heap is ready to use. This assumes that the memory pointed to by aBase is mapped and able to be used. You must ensure that you pass in a large enough value for aMaxLength. Passing in a value that is too small to hold the metadata for the heap (~1 KB) will result in the size being rounded up and the heap thereby running over the end of the memory assigned to it. But then if you were to pass in such as small value then you would not be able to do any allocations from the heap anyway. Moral of the story: Use a sensible value for aMaxLength!</p>
<div class="p">
</div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aBase</td><td>A pointer to the location where the heap is to be constructed.  </td></tr><tr class="bg"><td class="parameter">aMaxLength</td><td>The maximum length in bytes to which the heap can grow. If the supplied value is too small to hold the heap's metadata, it will be increased.  </td></tr><tr><td class="parameter">aAlign</td><td>From Symbian^4 onwards, this value is ignored but EABI 8 byte alignment is guaranteed for all allocations 8 bytes or more in size. 4 byte allocations will be aligned to a 4 byte boundary. Best to pass in zero.  </td></tr><tr class="bg"><td class="parameter">aSingleThread</td><td>EFalse if the heap is to be accessed from multiple threads. This will cause internal locks to be created, guaranteeing thread safety. </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>A pointer to the new heap, or NULL if the heap could not be created.</dd></dl></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">56 if aMaxLength is negative.</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-ECF5026A-11D4-3FED-85C0-8AE87D4AAF77"><a name="GUID-ECF5026A-11D4-3FED-85C0-8AE87D4AAF77"><!-- --></a>
<a name="GUID-0D6F9142-F42D-3CCD-91E3-FDBE3CF403F5"><!-- --></a><h3 class="sectiontitle">OffsetChunkHeap ( RChunk, TInt, TInt, TInt, TInt, TInt, TBool, TUint32 )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a class="xref xref apiRelation" href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html">RHeap</a> *</td><td>OffsetChunkHeap</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-326A2F4D-0E99-31C0-A35D-E8BF45913F07.html">RChunk</a></td><td><span class="parameter">aChunk</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aMinLength</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aOffset</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aGrowBy</span> = 1,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aMaxLength</span> = 0,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aAlign</span> = 0,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td><span class="parameter">aSingleThread</span> = EFalse,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a></td><td><span class="parameter">aMode</span> = 0</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[static]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Creates a heap in an existing chunk, offset from the beginning of the chunk.</p>
<p class="p">This function is intended to be used to create a heap using a chunk which has some of its memory already used, at the start of that that chunk. The maximum length to which the heap can grow is the maximum size of the chunk, minus the data at the start of the chunk.</p>
<p class="p">The offset at which to create the heap is passed in as the aOffset parameter. Legacy heap implementations always respected the aOffset value, however more modern heap implementations are more sophisticated and cannot necessarily respect this value. Therefore, if possible, you should always use an aOffset of 0 unless you have a very explicit requirement for using a non zero value. Using a non zero value will result in a less efficient heap algorithm being used in order to respect the offset.</p>
<p class="p">Another issue to consider when using this function is the type of the chunk passed in. In order for the most efficient heap algorithms to be used, the chunk passed in should always be a disconnected chunk. Passing in a non disconnected chunk will again result in a less efficient heap algorithm being used.</p>
<p class="p">Finally, another requirement for the most efficient heap algorithms to be used is for the heap to be able to expand. Therefore, unless you have a specific reason to do so, always specify aMaxLength &gt; aMinLength.</p>
<p class="p">So, if possible, use aOffset == zero, aMaxLength &gt; aMinLength and a disconnected chunk for best results!</p>
<div class="p">
</div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aChunk</td><td>The chunk that will host the heap.  </td></tr><tr class="bg"><td class="parameter">aMinLength</td><td>The minimum length of the heap in bytes. This will be rounded up to the nearest page size by the allocator.  </td></tr><tr><td class="parameter">aOffset</td><td>The offset in bytes from the start of the chunk at which to create the heap. If used (and it shouldn't really be!) then it will be rounded up to a multiple of 8, to respect EABI 8 byte alignment requirements.  </td></tr><tr class="bg"><td class="parameter">aGrowBy</td><td>The number of bytes by which the heap will grow when more memory is required. This will be rounded up to the nearest page size by the allocator. If a value is not explicitly specified, the page size is taken by default.  </td></tr><tr><td class="parameter">aMaxLength</td><td>The maximum length in bytes to which the heap can grow. This will be rounded up to the nearest page size by the allocator. If 0 is passed in, the maximum length of the chunk is used.  </td></tr><tr class="bg"><td class="parameter">aAlign</td><td>From Symbian^4 onwards, this value is ignored but EABI 8 byte alignment is guaranteed for all allocations 8 bytes or more in size. 4 byte allocations will be aligned to a 4 byte boundary. Best to pass in zero.  </td></tr><tr><td class="parameter">aSingleThread</td><td>EFalse if the heap is to be accessed from multiple threads. This will cause internal locks to be created, guaranteeing thread safety.  </td></tr><tr class="bg"><td class="parameter">aMode</td><td>Flags controlling the heap creation. See RAllocator::TFlags. </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>A pointer to the new heap or NULL if the heap could not be created.</dd></dl></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">41 if aMaxLength is &lt; aMinLength.</td></tr><tr><td class="paniccode">USER</td><td class="panicvalue">55 if aMinLength is negative.</td></tr><tr><td class="paniccode">USER</td><td class="panicvalue">56 if aMaxLength is negative.</td></tr><tr><td class="paniccode">USER</td><td class="panicvalue">168 if aOffset is negative.</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-9C7B94F3-2F86-3426-8C8B-D259826E5683"><a name="GUID-9C7B94F3-2F86-3426-8C8B-D259826E5683"><!-- --></a>
<a name="GUID-B4FFAE87-888C-3C4A-93FB-792643CFD624"><!-- --></a><h3 class="sectiontitle">SetupThreadHeap ( TBool, SStdEpocThreadCreateInfo &amp; )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>SetupThreadHeap</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td><span class="parameter">aNotFirst</span>,</td></tr><tr><td colspan="3"> </td><td>SStdEpocThreadCreateInfo &amp;</td><td><span class="parameter">aInfo</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[static]</td></tr></table></div><div class="section section apiDesc section apidesc">
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters">
</div>
</div>
</div></div><div class="footer"><hr /><div class="copy">© Nokia 2005.</div></div>
</div></div></div></div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-C5D0C7E7-061F-3BA5-AE24-B83237684B01.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:22:46 GMT -->
</html>