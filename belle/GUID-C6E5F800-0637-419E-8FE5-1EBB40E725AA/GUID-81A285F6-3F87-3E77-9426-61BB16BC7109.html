<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">

<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:22:45 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta name="DC.Type" content="cxxClass" />
<meta name="DC.Title" content="TSecurityPolicy" />
<meta name="abstract" content="" />
<meta name="description" content="" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109" />
<title>TSecurityPolicy</title>
<meta name="keywords" content="api" /><link rel="stylesheet" type="text/css" href="css/nokiacxxref.css" />
<link href="css/s60/style.css" rel="stylesheet" type="text/css" />
<link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp3.html" rel="stylesheet" type="text/css" />
<link href="PLUGINS_ROOT/com.nokia.forum.library/css/category-cover_cpp3.html" rel="stylesheet" type="text/css" /></head>
<body id="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109"><a name="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109"><!-- --></a><div class="body"><div class="contentLeft prTxt">
<h1 class="sectiontitle">TSecurityPolicy Class Reference</h1>
<div class="state state apiQualifier apiQualifier cxxClassDeclarationFile section include"><p>#include 
            
                    &lt;e32cmn.h&gt;
                </p></div>
<div class="section signature"><table class="signature"><tr><td>class TSecurityPolicy</td></tr></table></div><div class="section member-index"><table class="member-index"><thead><tr><th colspan="2">Public Attributes</th></tr></thead><tbody><tr><td align="right" valign="top" class="code">
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint8</a>
</td><td><a href="#GUID-AEAA0F58-EDD3-36F0-A9BC-028D1143146D">iExtraCaps</a></td></tr><tr class="bg"><td align="right" valign="top" class="code">
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a>
</td><td><a href="#GUID-A7C6B669-2F1A-3012-89BD-5755B729E869">iSecureId</a></td></tr><tr><td align="right" valign="top" class="code">
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a>
</td><td><a href="#GUID-F3A79D2E-F9B9-3FDD-86C3-77D4A8E6E9FE">iVendorId</a></td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Public Member Enumerations</th></tr></thead><tbody><tr><td align="right" valign="top" class="code">enum</td><td><a href="#GUID-61882C18-C906-30AE-BCD1-8A51039DB72B">TSecPolicyType</a> { <a href="#GUID-C767DFC5-C5E7-3981-8472-97AE7F80FE62">EAlwaysFail</a>, <a href="#GUID-EF457A6F-4D60-38D8-83A4-E8D054C44EDD">EAlwaysPass</a> }</td></tr><tr class="bg"><td align="right" valign="top" class="code">enum</td><td><a href="#GUID-8D763DE8-95D1-3057-9FEF-D39BD0373135">TType</a> { <a href="#GUID-9B7E3D86-31E0-3404-BBF9-1EE8D0EFB971">ETypeFail</a>, <a href="#GUID-58B6E616-DA5B-37A1-BB0C-7673CE23C974">ETypePass</a>, <a href="#GUID-F5B03FFE-BCBF-3DA9-B982-EB37AF9A6879">ETypeC3</a>, <a href="#GUID-89753984-EB89-36B3-9EA4-E60E9FA5B0E2">ETypeC7</a>, ..., <a href="#GUID-406B4329-C775-343D-A96A-53E248AC5D18">ETypeLimit</a> }</td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"></td><td><a href="#GUID-D2CF313B-150C-3838-85DB-84E80838BE5A">TSecurityPolicy</a>()</td></tr><tr class="bg"><td align="right" class="code"></td><td><a href="#GUID-8EE88535-4AF8-3674-A6CD-76EB4C584BD2">TSecurityPolicy</a>(<a class="xref xref apiRelation" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html">TSecPolicyType</a>)</td></tr><tr><td align="right" class="code"></td><td><a href="#GUID-249DC2A7-996C-3C07-87F8-8DDA38A122B0">TSecurityPolicy</a>(<a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>, <a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>, <a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>)</td></tr><tr class="bg"><td align="right" class="code"></td><td><a href="#GUID-3FBE127C-FF27-398C-940B-091591ECD67A">TSecurityPolicy</a>(<a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>, <a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>, <a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>, <a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>, <a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>, <a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>, <a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>)</td></tr><tr><td align="right" class="code"></td><td><a href="#GUID-380F6535-82D4-35FB-813D-91E1D5EDCDD2">TSecurityPolicy</a>(<a class="xref xref apiRelation" href="GUID-E924490C-D174-3CE8-98BB-85A1D10BC90B.html">TSecureId</a>, <a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>, <a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>, <a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>)</td></tr><tr class="bg"><td align="right" class="code"></td><td><a href="#GUID-7E7F4C29-B20C-3B82-88E1-7DC97FE664AA">TSecurityPolicy</a>(<a class="xref xref apiRelation" href="GUID-EABC49AD-2492-3856-AC56-046593CA7841.html">TVendorId</a>, <a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>, <a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>, <a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a>)</td></tr><tr><td align="right" class="code">
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
</td><td><a href="#GUID-F2EBD17C-5EF7-3223-822B-43721367742F">CheckPolicy</a>(<a class="xref xref apiRelation" href="GUID-9DD1EA2B-DC59-315C-8E9C-CE6D9461B695.html">RProcess</a>, const char *)</td></tr><tr class="bg"><td align="right" class="code">
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
</td><td><a href="#GUID-4E2F7993-803E-3E58-8D94-F11CF5161452">CheckPolicy</a>(<a class="xref xref apiRelation" href="GUID-B0E661BC-4058-3256-B9C3-5A4FD52F6DE5.html">RThread</a>, const char *)</td></tr><tr><td align="right" class="code">
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
</td><td><a href="#GUID-698882E1-2169-38E3-8A29-9881F5F7EEEC">CheckPolicy</a>(<a class="xref xref apiRelation" href="GUID-78E0DEDD-C020-3174-AD0A-E4C18C4C9213.html">RMessagePtr2</a>, const char *)</td></tr><tr class="bg"><td align="right" class="code">
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
</td><td><a href="#GUID-B4B73951-6BC1-33C2-A935-B39E48BF48DC">CheckPolicy</a>(<a class="xref xref apiRelation" href="GUID-78E0DEDD-C020-3174-AD0A-E4C18C4C9213.html">RMessagePtr2</a>, <a class="xref xref apiRelation" href="GUID-8DC4DBEF-5B7C-3662-B60F-2D95C378E876.html">TSecurityInfo</a> &amp;, const char *)</td></tr><tr><td align="right" class="code">
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
</td><td><a href="#GUID-B73BCCAC-6361-35A9-9D4A-D8A245FE36F3">CheckPolicy</a>(<a class="xref xref apiRelation" href="GUID-6D8A458C-9A39-3000-A3BC-060A2A3663E6.html">RSessionBase</a>)</td></tr><tr class="bg"><td align="right" class="code">
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
</td><td><a href="#GUID-D0579202-5313-39E4-BB59-49AB5E1329C9">CheckPolicyCreator</a>(const char *)</td></tr><tr><td align="right" class="code">IMPORT_C <a class="xref xref apiRelation" href="GUID-6DF731E4-5691-31C4-BEE0-03A3873F15EC.html">TPtrC8</a></td><td><a href="#GUID-2C264708-A8C6-3E92-8F0E-BDEE8DF7472C">Package</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><a href="#GUID-B094D8C1-9441-3569-8FE4-D2B51A795259">Set</a>(const <a class="xref xref apiRelation" href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;)</td></tr><tr><td align="right" class="code">
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
</td><td><a href="#GUID-96389110-299D-3A5A-AE00-3E3CA0ABAD2E">Validate</a>()</td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Protected Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
</td><td><a href="#GUID-CF61AFA6-98A7-37C5-A10B-8F2DEFF21BE9">CheckPolicy</a>(const <a class="xref xref apiRelation" href="GUID-D7750B9E-1B81-3E68-B397-1E85B86EABC3.html">SSecurityInfo</a> &amp;, <a class="xref xref apiRelation" href="GUID-D7750B9E-1B81-3E68-B397-1E85B86EABC3.html">SSecurityInfo</a> &amp;)</td></tr></tbody></table></div><div class="section section apiDesc section apidesc"><h2 class="sectiontitle">Detailed Description</h2>
<p class="p">Class representing a generic security policy</p>
<p class="p">This class can specify a security policy consisting of either:</p>
<div class="p">
<ol class="ol">
<li class="li">
<p class="p">A check for between 0 and 7 capabilities</p>
</li>
<li class="li">
<p class="p">A check for a given Secure ID along with 0-3 capabilities</p>
</li>
<li class="li">
<p class="p">A check for a given Vendor ID along with 0-3 capabilities</p>
</li>
</ol>
</div>
<p class="p">If multiple capabilities are specified, all of them must be present for the security check to succeed ('AND' relation).</p>
<div class="p">The envisaged use case for this class is to specify access rights to an object managed either by the kernel or by a server but in principle owned by a client and usable in a limited way by other clients. For example<ul class="ul"><li class="li"><p class="p">Publish and Subscribe properties</p>
</li>
<li class="li"><p class="p">DBMS databases</p>
</li>
</ul>
</div>
<p class="p">In these cases the owning client would pass one (or more) of these objects to the server to specify which security checks should be done on other clients before allowing access to the object.</p>
<p class="p">To pass a <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> object via IPC, a client should obtain a descriptor for the object using <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-2C264708-A8C6-3E92-8F0E-BDEE8DF7472C">Package()</a> and send this. When a server receives this descriptor it should read the descriptor contents into a TSecurityPolicyBuf and then <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-B094D8C1-9441-3569-8FE4-D2B51A795259">Set()</a> should be used to create a policy object from this.</p>
<p class="p">Because this class has non-default constructors, compilers will not initialise this object at compile time, instead code will be generated to construct the object at run-time. This is wasteful - and Symbian OS DLLs are not permitted to have such uninitialised data. To overcome these problems a set of macros are provided to construct a const object which behaves like a <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a>. These are:</p>
<p class="p">_LIT_SECURITY_POLICY_C1 through _LIT_SECURITY_POLICY_C7, _LIT_SECURITY_POLICY_S0 through _LIT_SECURITY_POLICY_S3 and _LIT_SECURITY_POLICY_V0 through _LIT_SECURITY_POLICY_V3.</p>
<p class="p">Also, the macros _LIT_SECURITY_POLICY_PASS and _LIT_SECURITY_POLICY_FAIL are provided in order to allow easy construction of a const object which can be used as a TSecuityPolicy which always passes or always fails, respectively.</p>
<p class="p">If a security policy object is needed to be embedded in another class then the <a class="xref" href="GUID-35C8F86B-5E63-3E73-9B53-6B7E6D98413F.html#GUID-35C8F86B-5E63-3E73-9B53-6B7E6D98413F">TStaticSecurityPolicy</a> structure can be used. This behaves in the same way as a <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> object but may be initialised at compile time.</p>
<p class="p">
</p><p class="p">See also: <a class="xref" href="GUID-35C8F86B-5E63-3E73-9B53-6B7E6D98413F.html#GUID-35C8F86B-5E63-3E73-9B53-6B7E6D98413F">TStaticSecurityPolicy</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-2157230C-B426-334E-ADD4-647F185F6AA9">TSecurityPolicyBuf</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-32A008F7-7531-3E54-B413-7351C06F7603">_LIT_SECURITY_POLICY_PASS</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-43F4F1E9-40DD-3822-84BB-531D0FCC9AAA">_LIT_SECURITY_POLICY_FAIL</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-E08528FA-9736-314F-AF9D-48843579E9EA">_LIT_SECURITY_POLICY_C1</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-468F440E-AB49-3406-87F4-7C02734A15C2">_LIT_SECURITY_POLICY_C2</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-64ABCC4E-5563-3505-8B2C-550508C0862F">_LIT_SECURITY_POLICY_C3</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-91491DE4-C42F-3115-AC25-18ADD12F24A4">_LIT_SECURITY_POLICY_C4</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-07AB5E41-54FD-3473-8D23-3B86E01B9A49">_LIT_SECURITY_POLICY_C5</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-85998308-9690-3E3F-A2A4-05E7AD1BCAE5">_LIT_SECURITY_POLICY_C6</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-6B771C3A-5230-32C3-BC3C-29BAD09CFAF7">_LIT_SECURITY_POLICY_C7</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-2A0C70F7-C0B9-30CD-B271-BECA0A8AD851">_LIT_SECURITY_POLICY_S0</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-3CDC3CC2-3608-3335-9D4D-720F9D580403">_LIT_SECURITY_POLICY_S1</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-3ED8420C-0A77-32C9-B827-14447704F981">_LIT_SECURITY_POLICY_S2</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-A6D8FEFF-0BA2-37A3-A231-5910D15C40B8">_LIT_SECURITY_POLICY_S3</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-80EC64F5-A18D-3CB7-A27C-775E2ED20A49">_LIT_SECURITY_POLICY_V0</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-339B7E79-F8AF-358C-8748-A90BCC1C9C3B">_LIT_SECURITY_POLICY_V1</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-21DE1467-8A2B-3AB9-B552-5B8533CB7019">_LIT_SECURITY_POLICY_V2</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-189EFD53-4EAC-3D09-97EA-9268BCD57400">_LIT_SECURITY_POLICY_V3</a></p>
</div>
<h2 class="sectiontitle">Member Attribute Documentation</h2><div class="topic reference apiRef apiValue cxxVariable nested1" id="GUID-AEAA0F58-EDD3-36F0-A9BC-028D1143146D"><a name="GUID-AEAA0F58-EDD3-36F0-A9BC-028D1143146D"><!-- --></a>
<h3 class="sectiontitle">iExtraCaps</h3>
<div class="section signature"><table class="signature"><tr><td>
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint8</a>
</td><td>iExtraCaps</td></tr></table></div><div class="section section apiDesc section apidesc">
</div>
<div class="topic reference apiRef apiValue cxxVariable nested1" id="GUID-A7C6B669-2F1A-3012-89BD-5755B729E869"><a name="GUID-A7C6B669-2F1A-3012-89BD-5755B729E869"><!-- --></a>
<h3 class="sectiontitle">iSecureId</h3>
<div class="section signature"><table class="signature"><tr><td>
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a>
</td><td>iSecureId</td></tr></table></div><div class="section section apiDesc section apidesc">
</div>
<div class="topic reference apiRef apiValue cxxVariable nested1" id="GUID-F3A79D2E-F9B9-3FDD-86C3-77D4A8E6E9FE"><a name="GUID-F3A79D2E-F9B9-3FDD-86C3-77D4A8E6E9FE"><!-- --></a>
<h3 class="sectiontitle">iVendorId</h3>
<div class="section signature"><table class="signature"><tr><td>
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a>
</td><td>iVendorId</td></tr></table></div><div class="section section apiDesc section apidesc">
</div>
<h2 class="sectiontitle">Member Enumeration Documentation</h2><div class="topic reference apiRef apiValue cxxEnumeration nested1" id="GUID-61882C18-C906-30AE-BCD1-8A51039DB72B"><a name="GUID-61882C18-C906-30AE-BCD1-8A51039DB72B"><!-- --></a>
<h3 class="sectiontitle">Enum TSecPolicyType</h3>
<div class="body refbody apiDetail apiValueDetail cxxEnumerationDetail section enumerationdetail"><div class="section section apiDesc section apidesc">
<div class="ph ph apiDefItem apiDefItem cxxEnumerators section enumerators"><table class="enumerators"><thead><tr><th>Enumerator</th><th>Value</th><th>Description</th></tr></thead><tr><td class="ph ph apiDefItem apiDefItem cxxEnumerator"><a name="GUID-C767DFC5-C5E7-3981-8472-97AE7F80FE62"><span class="enumerator">EAlwaysFail</span></a></td><td>0</td><td> </td></tr><tr class="bg"><td class="ph ph apiDefItem apiDefItem cxxEnumerator"><a name="GUID-EF457A6F-4D60-38D8-83A4-E8D054C44EDD"><span class="enumerator">EAlwaysPass</span></a></td><td>1</td><td> </td></tr></table></div>
</div>
</div>
<div class="topic reference apiRef apiValue cxxEnumeration nested1" id="GUID-8D763DE8-95D1-3057-9FEF-D39BD0373135"><a name="GUID-8D763DE8-95D1-3057-9FEF-D39BD0373135"><!-- --></a>
<h3 class="sectiontitle">Enum TType</h3>
<div class="body refbody apiDetail apiValueDetail cxxEnumerationDetail section enumerationdetail"><div class="section section apiDesc section apidesc">
<p class="p">Constants to specify the type of <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> objects. </p>
</div>
<div class="ph ph apiDefItem apiDefItem cxxEnumerators section enumerators"><table class="enumerators"><thead><tr><th>Enumerator</th><th>Value</th><th>Description</th></tr></thead><tr><td class="ph ph apiDefItem apiDefItem cxxEnumerator"><a name="GUID-9B7E3D86-31E0-3404-BBF9-1EE8D0EFB971"><span class="enumerator">ETypeFail</span></a></td><td>0</td><td>
<p class="p">Always fail </p>
</td></tr><tr class="bg"><td class="ph ph apiDefItem apiDefItem cxxEnumerator"><a name="GUID-58B6E616-DA5B-37A1-BB0C-7673CE23C974"><span class="enumerator">ETypePass</span></a></td><td>1</td><td>
<p class="p">Always pass </p>
</td></tr><tr><td class="ph ph apiDefItem apiDefItem cxxEnumerator"><a name="GUID-F5B03FFE-BCBF-3DA9-B982-EB37AF9A6879"><span class="enumerator">ETypeC3</span></a></td><td>2</td><td>
<p class="p">Up to 3 capabilities </p>
</td></tr><tr class="bg"><td class="ph ph apiDefItem apiDefItem cxxEnumerator"><a name="GUID-89753984-EB89-36B3-9EA4-E60E9FA5B0E2"><span class="enumerator">ETypeC7</span></a></td><td>3</td><td>
<p class="p">Up to 7 capabilities </p>
</td></tr><tr><td class="ph ph apiDefItem apiDefItem cxxEnumerator"><a name="GUID-87B60908-6BF9-36F4-A4E1-EC8A5AA70ECC"><span class="enumerator">ETypeS3</span></a></td><td>4</td><td>
<p class="p">Secure ID and up to 3 capabilities </p>
</td></tr><tr class="bg"><td class="ph ph apiDefItem apiDefItem cxxEnumerator"><a name="GUID-7AF54385-F66D-3185-81A6-61D743D32598"><span class="enumerator">ETypeV3</span></a></td><td>5</td><td>
<p class="p">Vendor ID and up to 3 capabilities </p>
</td></tr><tr><td class="ph ph apiDefItem apiDefItem cxxEnumerator"><a name="GUID-406B4329-C775-343D-A96A-53E248AC5D18"><span class="enumerator">ETypeLimit</span></a></td><td></td><td>
<p class="p">The number of possible <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> types This is intended for internal Symbian use only.  </p>
</td></tr></table></div>
</div>
</div>
<h2 class="sectiontitle">Constructor &amp; Destructor Documentation</h2><div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-D2CF313B-150C-3838-85DB-84E80838BE5A"><a name="GUID-D2CF313B-150C-3838-85DB-84E80838BE5A"><!-- --></a>
<h3 class="sectiontitle">TSecurityPolicy (  )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>TSecurityPolicy</td><td>(</td><td>)</td><td>[inline]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Constructs a <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> that will always fail, irrespective of the checked object's attributes. </p>
</div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-8EE88535-4AF8-3674-A6CD-76EB4C584BD2"><a name="GUID-8EE88535-4AF8-3674-A6CD-76EB4C584BD2"><!-- --></a>
<h3 class="sectiontitle">TSecurityPolicy ( TSecPolicyType )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C</td><td>TSecurityPolicy</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html">TSecPolicyType</a></td><td><span class="parameter">aType</span></td><td>)</td><td></td></tr></table></div><div class="section section apiDesc section apidesc">
<div class="p">Constructs a <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> to either always pass or always fail checks made against it, depending on the value of aType. </div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aType</td><td>Must be one of EAlwaysPass or EAlwaysFail  </td></tr></table></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">191 if aType is not a valid value</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-249DC2A7-996C-3C07-87F8-8DDA38A122B0"><a name="GUID-249DC2A7-996C-3C07-87F8-8DDA38A122B0"><!-- --></a>
<h3 class="sectiontitle">TSecurityPolicy ( TCapability, TCapability, TCapability )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C</td><td>TSecurityPolicy</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap1</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap2</span> = ECapability_None,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap3</span> = ECapability_None</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"></td></tr></table></div><div class="section section apiDesc section apidesc">
<div class="p">Construct a <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> object to check up to 3 capabilties. </div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aCap1</td><td>The first capability to add to this policy  </td></tr><tr class="bg"><td class="parameter">aCap2</td><td>An optional second capability to add to this policy  </td></tr><tr><td class="parameter">aCap3</td><td>An optional third capability to add to this policy  </td></tr></table></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">189 If any of the supplied capabilities are not valid.</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-3FBE127C-FF27-398C-940B-091591ECD67A"><a name="GUID-3FBE127C-FF27-398C-940B-091591ECD67A"><!-- --></a>
<h3 class="sectiontitle">TSecurityPolicy ( TCapability, TCapability, TCapability, TCapability, TCapability, TCapability, TCapability )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C</td><td>TSecurityPolicy</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap1</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap2</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap3</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap4</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap5</span> = ECapability_None,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap6</span> = ECapability_None,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap7</span> = ECapability_None</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"></td></tr></table></div><div class="section section apiDesc section apidesc">
<div class="p">Construct a <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> object to check up to 7 capabilties. </div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aCap1</td><td>The first capability to add to this policy  </td></tr><tr class="bg"><td class="parameter">aCap2</td><td>The second capability to add to this policy  </td></tr><tr><td class="parameter">aCap3</td><td>The third capability to add to this policy  </td></tr><tr class="bg"><td class="parameter">aCap4</td><td>The fourth capability to add to this policy  </td></tr><tr><td class="parameter">aCap5</td><td>An optional fifth capability to add to this policy  </td></tr><tr class="bg"><td class="parameter">aCap6</td><td>An optional sixth capability to add to this policy  </td></tr><tr><td class="parameter">aCap7</td><td>An optional seventh capability to add to this policy  </td></tr></table></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">189 If any of the supplied capabilities are not valid.</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-380F6535-82D4-35FB-813D-91E1D5EDCDD2"><a name="GUID-380F6535-82D4-35FB-813D-91E1D5EDCDD2"><!-- --></a>
<h3 class="sectiontitle">TSecurityPolicy ( TSecureId, TCapability, TCapability, TCapability )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C</td><td>TSecurityPolicy</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-E924490C-D174-3CE8-98BB-85A1D10BC90B.html">TSecureId</a></td><td><span class="parameter">aSecureId</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap1</span> = ECapability_None,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap2</span> = ECapability_None,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap3</span> = ECapability_None</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"></td></tr></table></div><div class="section section apiDesc section apidesc">
<div class="p">Construct a <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> object to check a secure id and up to 3 capabilties. </div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aSecureId</td><td>The secure id to add to this policy  </td></tr><tr class="bg"><td class="parameter">aCap1</td><td>The first capability to add to this policy  </td></tr><tr><td class="parameter">aCap2</td><td>The second capability to add to this policy  </td></tr><tr class="bg"><td class="parameter">aCap3</td><td>The third capability to add to this policy  </td></tr></table></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">189 If any of the supplied capabilities are not valid.</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-7E7F4C29-B20C-3B82-88E1-7DC97FE664AA"><a name="GUID-7E7F4C29-B20C-3B82-88E1-7DC97FE664AA"><!-- --></a>
<h3 class="sectiontitle">TSecurityPolicy ( TVendorId, TCapability, TCapability, TCapability )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C</td><td>TSecurityPolicy</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-EABC49AD-2492-3856-AC56-046593CA7841.html">TVendorId</a></td><td><span class="parameter">aVendorId</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap1</span> = ECapability_None,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap2</span> = ECapability_None,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-E3478C45-762D-3A14-AB9F-02D2F639D985.html">TCapability</a></td><td><span class="parameter">aCap3</span> = ECapability_None</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"></td></tr></table></div><div class="section section apiDesc section apidesc">
<div class="p">Construct a <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> object to check a vendor id and up to 3 capabilties. </div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aVendorId</td><td>The vendor id to add to this policy  </td></tr><tr class="bg"><td class="parameter">aCap1</td><td>The first capability to add to this policy  </td></tr><tr><td class="parameter">aCap2</td><td>The second capability to add to this policy  </td></tr><tr class="bg"><td class="parameter">aCap3</td><td>The third capability to add to this policy  </td></tr></table></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">189 If any of the supplied capabilities are not valid.</td></tr></table></div></div>
</div>
<h2 class="sectiontitle">Member Function Documentation</h2><div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-F2EBD17C-5EF7-3223-822B-43721367742F"><a name="GUID-F2EBD17C-5EF7-3223-822B-43721367742F"><!-- --></a>
<a name="GUID-E155171A-D096-3C75-9DB9-974F23D753AA"><!-- --></a><h3 class="sectiontitle">CheckPolicy ( RProcess, const char * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
</td><td>CheckPolicy</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-9DD1EA2B-DC59-315C-8E9C-CE6D9461B695.html">RProcess</a></td><td><span class="parameter">aProcess</span>,</td></tr><tr><td colspan="3"> </td><td>const char *</td><td><span class="parameter">aDiagnostic</span> = 0</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">const [inline]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Checks this policy against the platform security attributes of aProcess.</p>
<p class="p">When a check fails the action taken is determined by the system wide Platform Security configuration. If PlatSecDiagnostics is ON, then a diagnostic message is emitted. If PlatSecEnforcement is OFF, then this function will return ETrue even though the check failed.</p>
<div class="p">
</div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aProcess</td><td>The RProcess object to check against this TSecurityPolicy.  </td></tr><tr class="bg"><td class="parameter">aDiagnostic</td><td>A string that will be emitted along with any diagnostic message that may be issued if the policy check fails. This string must be enclosed in the __PLATSEC_DIAGNOSTIC_STRING macro which enables it to be easily removed from the system.  </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>ETrue if all the requirements of this TSecurityPolicy are met by the platform security attributes of aProcess, EFalse otherwise. </dd></dl></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">190 if 'this' is an invalid</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-4E2F7993-803E-3E58-8D94-F11CF5161452"><a name="GUID-4E2F7993-803E-3E58-8D94-F11CF5161452"><!-- --></a>
<h3 class="sectiontitle">CheckPolicy ( RThread, const char * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
</td><td>CheckPolicy</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-B0E661BC-4058-3256-B9C3-5A4FD52F6DE5.html">RThread</a></td><td><span class="parameter">aThread</span>,</td></tr><tr><td colspan="3"> </td><td>const char *</td><td><span class="parameter">aDiagnostic</span> = 0</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">const [inline]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Checks this policy against the platform security attributes of the process owning aThread.</p>
<p class="p">When a check fails the action taken is determined by the system wide Platform Security configuration. If PlatSecDiagnostics is ON, then a diagnostic message is emitted. If PlatSecEnforcement is OFF, then this function will return ETrue even though the check failed.</p>
<div class="p">
</div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aThread</td><td>The thread whose owning process' platform security attributes are to be checked against this TSecurityPolicy.  </td></tr><tr class="bg"><td class="parameter">aDiagnostic</td><td>A string that will be emitted along with any diagnostic message that may be issued if the policy check fails. This string must be enclosed in the __PLATSEC_DIAGNOSTIC_STRING macro which enables it to be easily removed from the system.  </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>ETrue if all the requirements of this TSecurityPolicy are met by the platform security parameters of the owning process of aThread, EFalse otherwise. </dd></dl></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">190 if 'this' is an invalid</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-698882E1-2169-38E3-8A29-9881F5F7EEEC"><a name="GUID-698882E1-2169-38E3-8A29-9881F5F7EEEC"><!-- --></a>
<h3 class="sectiontitle">CheckPolicy ( RMessagePtr2, const char * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
</td><td>CheckPolicy</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-78E0DEDD-C020-3174-AD0A-E4C18C4C9213.html">RMessagePtr2</a></td><td><span class="parameter">aMsgPtr</span>,</td></tr><tr><td colspan="3"> </td><td>const char *</td><td><span class="parameter">aDiagnostic</span> = 0</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">const [inline]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Checks this policy against the platform security attributes of the process which sent the given message.</p>
<p class="p">When a check fails the action taken is determined by the system wide Platform Security configuration. If PlatSecDiagnostics is ON, then a diagnostic message is emitted. If PlatSecEnforcement is OFF, then this function will return ETrue even though the check failed.</p>
<div class="p">
</div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aMsgPtr</td><td>The RMessagePtr2 object to check against this TSecurityPolicy.  </td></tr><tr class="bg"><td class="parameter">aDiagnostic</td><td>A string that will be emitted along with any diagnostic message that may be issued if the policy check fails. This string must be enclosed in the __PLATSEC_DIAGNOSTIC_STRING macro which enables it to be easily removed from the system.  </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>ETrue if all the requirements of this TSecurityPolicy are met by the platform security attributes of aMsg, EFalse otherwise. </dd></dl></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">190 if 'this' is an invalid</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-B4B73951-6BC1-33C2-A935-B39E48BF48DC"><a name="GUID-B4B73951-6BC1-33C2-A935-B39E48BF48DC"><!-- --></a>
<h3 class="sectiontitle">CheckPolicy ( RMessagePtr2, TSecurityInfo &amp;, const char * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
</td><td>CheckPolicy</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-78E0DEDD-C020-3174-AD0A-E4C18C4C9213.html">RMessagePtr2</a></td><td><span class="parameter">aMsgPtr</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-8DC4DBEF-5B7C-3662-B60F-2D95C378E876.html">TSecurityInfo</a> &amp;</td><td><span class="parameter">aMissing</span>,</td></tr><tr><td colspan="3"> </td><td>const char *</td><td><span class="parameter">aDiagnostic</span> = 0</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">const [inline]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Checks this policy against the platform security attributes of the process which sent the given message.</p>
<p class="p">When a check fails the action taken is determined by the system wide Platform Security configuration. If PlatSecDiagnostics is ON, then a diagnostic message is emitted. If PlatSecEnforcement is OFF, then this function will return ETrue even though the check failed.</p>
<div class="p">
</div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aMsgPtr</td><td>The RMessagePtr2 object to check against this TSecurityPolicy.  </td></tr><tr class="bg"><td class="parameter">aMissing</td><td>A TSecurityInfo object which this method fills with any capabilities or IDs it finds to be missing.  </td></tr><tr><td class="parameter">aDiagnostic</td><td>A string that will be emitted along with any diagnostic message that may be issued if the policy check fails. This string must be enclosed in the __PLATSEC_DIAGNOSTIC_STRING macro which enables it to be easily removed from the system.  </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>ETrue if all the requirements of this TSecurityPolicy are met by the platform security attributes of aMsg, EFalse otherwise. </dd></dl></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">190 if 'this' is an invalid</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-B73BCCAC-6361-35A9-9D4A-D8A245FE36F3"><a name="GUID-B73BCCAC-6361-35A9-9D4A-D8A245FE36F3"><!-- --></a>
<h3 class="sectiontitle">CheckPolicy ( RSessionBase )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
</td><td>CheckPolicy</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-6D8A458C-9A39-3000-A3BC-060A2A3663E6.html">RSessionBase</a></td><td><span class="parameter">aSession</span></td><td>)</td><td>const </td></tr></table></div><div class="section section apiDesc section apidesc">
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters">
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-CF61AFA6-98A7-37C5-A10B-8F2DEFF21BE9"><a name="GUID-CF61AFA6-98A7-37C5-A10B-8F2DEFF21BE9"><!-- --></a>
<h3 class="sectiontitle">CheckPolicy ( const SSecurityInfo &amp;, SSecurityInfo &amp; )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
</td><td>CheckPolicy</td><td>(</td><td>const <a class="xref xref apiRelation" href="GUID-D7750B9E-1B81-3E68-B397-1E85B86EABC3.html">SSecurityInfo</a> &amp;</td><td><span class="parameter">aSecInfo</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-D7750B9E-1B81-3E68-B397-1E85B86EABC3.html">SSecurityInfo</a> &amp;</td><td><span class="parameter">aMissing</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">const [protected]</td></tr></table></div><div class="section section apiDesc section apidesc">
<div class="p">Checks this policy against the supplied <a class="xref" href="GUID-D7750B9E-1B81-3E68-B397-1E85B86EABC3.html#GUID-D7750B9E-1B81-3E68-B397-1E85B86EABC3">SSecurityInfo</a>. </div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aSecInfo</td><td>The SSecurityInfo object to check against this TSecurityPolicy.  </td></tr><tr class="bg"><td class="parameter">aMissing</td><td>A SSecurityInfo object which this method fills with any capabilities or IDs it finds to be missing. This is designed to help generating diagnostic messages.  </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>ETrue if all the requirements of this TSecurityPolicy are met, EFalse </dd></dl></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">190 if aSecInfo is an invalid</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-D0579202-5313-39E4-BB59-49AB5E1329C9"><a name="GUID-D0579202-5313-39E4-BB59-49AB5E1329C9"><!-- --></a>
<a name="GUID-D0F9FE41-90B5-3869-9A4A-64BE771385D9"><!-- --></a><h3 class="sectiontitle">CheckPolicyCreator ( const char * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
</td><td>CheckPolicyCreator</td><td>(</td><td>const char *</td><td><span class="parameter">aDiagnostic</span> = 0</td><td>)</td><td>const [inline]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Checks this policy against the platform security attributes of this process' creator.</p>
<p class="p">When a check fails the action taken is determined by the system wide Platform Security configuration. If PlatSecDiagnostics is ON, then a diagnostic message is emitted. If PlatSecEnforcement is OFF, then this function will return ETrue even though the check failed.</p>
<div class="p">
</div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aDiagnostic</td><td>A string that will be emitted along with any diagnostic message that may be issued if the policy check fails. This string must be enclosed in the __PLATSEC_DIAGNOSTIC_STRING macro which enables it to be easily removed from the system.  </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>ETrue if all the requirements of this TSecurityPolicy are met by the platform security attributes of this process' creator, EFalse otherwise. </dd></dl></div>
<div class="section panic"><table class="panic"><tr><th class="panic">Panic Codes</th></tr><tr><td class="paniccode">USER</td><td class="panicvalue">190 if 'this' is an invalid</td></tr></table></div></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-2C264708-A8C6-3E92-8F0E-BDEE8DF7472C"><a name="GUID-2C264708-A8C6-3E92-8F0E-BDEE8DF7472C"><!-- --></a>
<h3 class="sectiontitle">Package (  )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a class="xref xref apiRelation" href="GUID-6DF731E4-5691-31C4-BEE0-03A3873F15EC.html">TPtrC8</a></td><td>Package</td><td>(</td><td>)</td><td>const </td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Constructs a <a class="xref" href="GUID-6DF731E4-5691-31C4-BEE0-03A3873F15EC.html#GUID-6DF731E4-5691-31C4-BEE0-03A3873F15EC">TPtrC8</a> wrapping the platform security attributes of this <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a>. Such a descriptor is suitable for passing across the client server boundary.</p>
<p class="p">The format of the descriptor is determined by the first byte which specifies the type of this <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a>. The first byte is one of the constants specified in the enum <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-8D763DE8-95D1-3057-9FEF-D39BD0373135">TSecurityPolicy::TType</a>.</p>
<div class="p">For <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> objects of types ETypeC3, ETypeS3, ETypePass or ETypeFail the descriptor will contain the following data in the order listed: <pre class="pre codeblock">	TUint8 iType; 		// set to ETypeC3, ETypeS3, ETypePass or ETypeFail
	TUint8 iCaps[3];
	TUint32 iSecureId;</pre>
 ETypeC3 descriptors will contain capabilities in iCaps but have iSecureId set to ECapability_None. ETypeS3 are similar to ETypeC3 descriptors but will have iSecureId set to the secure ID value of the <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> object. ETypePass and ETypeFail objects will have values of all of the elements of iCaps and iSecureId set to ECapability_None.</div>
<div class="p">For <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> objects of type ETypeV3 the descriptor will contain the following data in the order listed: <pre class="pre codeblock">	TUint8 iType;		// set to ETypeV3
	TUint8 iCaps[3];	// set to the values of 3 capabilities
	TUint32 iVendorId;	// set to the value of the vendor ID of the TSecurityPolicy</pre>
</div>
<div class="p">For <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> objects of type ETypeC7 the descriptor will contain the following data in the order listed: <pre class="pre codeblock">	TUint8 iType;			// set to ETypeC7
	TUint8 iCaps[3];		// set to the values of 3 of the objects capabilities
	TUint8 iExtraCaps[4];	// set to the values of 4 of the objects capabilities</pre>
</div>
<p class="p">See also: <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-8D763DE8-95D1-3057-9FEF-D39BD0373135">TSecurityPolicy::TType</a> <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-B094D8C1-9441-3569-8FE4-D2B51A795259">TSecurityPolicy::Set()</a> </p>
</div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>A TPtrC8 wrapping the platform security attributes of this TSecurityPolicy. </dd></dl></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-B094D8C1-9441-3569-8FE4-D2B51A795259"><a name="GUID-B094D8C1-9441-3569-8FE4-D2B51A795259"><!-- --></a>
<a name="GUID-3D1158AB-0441-3F7C-8136-9B9B45E083B9"><!-- --></a><h3 class="sectiontitle">Set ( const TDesC8 &amp; )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>Set</td><td>(</td><td>const <a class="xref xref apiRelation" href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td><span class="parameter">aDes</span></td><td>)</td><td></td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Sets this <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-81A285F6-3F87-3E77-9426-61BB16BC7109">TSecurityPolicy</a> to a copy of the policy described by the supplied descriptor. Such a descriptor can be obtained from <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-2C264708-A8C6-3E92-8F0E-BDEE8DF7472C">TSecurityPolicy::Package()</a>. </p>
<p class="p">See also: <a class="xref" href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html#GUID-2C264708-A8C6-3E92-8F0E-BDEE8DF7472C">TSecurityPolicy::Package()</a> </p>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aDes</td><td>A descriptor representing the state of another TSecurityPolicy.  </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>KErrNone, if successful, otherwise one of the other system-wide error codes. </dd></dl></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-96389110-299D-3A5A-AE00-3E3CA0ABAD2E"><a name="GUID-96389110-299D-3A5A-AE00-3E3CA0ABAD2E"><!-- --></a>
<h3 class="sectiontitle">Validate (  )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
</td><td>Validate</td><td>(</td><td>)</td><td>const </td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Checks that this object is in a valid state </p>
</div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>A non-zero value if this object is valid, zero otherwise.  </dd></dl></div>
</div>
</div>
</div></div><div class="footer"><hr /><div class="copy">© Nokia 2005.</div></div>
</div></div></div></div></div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:22:45 GMT -->
</html>