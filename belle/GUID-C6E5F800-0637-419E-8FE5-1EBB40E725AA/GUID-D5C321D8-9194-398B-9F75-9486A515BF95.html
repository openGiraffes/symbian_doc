<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">

<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D5C321D8-9194-398B-9F75-9486A515BF95.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:21:42 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta name="DC.Type" content="cxxFile" />
<meta name="DC.Title" content="mman.html" />
<meta name="abstract" content="" />
<meta name="description" content="" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="GUID-D5C321D8-9194-398B-9F75-9486A515BF95" />
<title>mman.h</title>
<meta name="keywords" content="api" /><link rel="stylesheet" type="text/css" href="css/nokiacxxref.css" />
<link href="css/s60/style.css" rel="stylesheet" type="text/css" />
<link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp3.html" rel="stylesheet" type="text/css" />
<link href="PLUGINS_ROOT/com.nokia.forum.library/css/category-cover_cpp3.html" rel="stylesheet" type="text/css" /></head>
<body id="GUID-D5C321D8-9194-398B-9F75-9486A515BF95"><a name="GUID-D5C321D8-9194-398B-9F75-9486A515BF95"><!-- --></a><div class="body"><div class="contentLeft prTxt">
<h1 class="sectiontitle">mman.h File Reference</h1>
<div class="body refbody apiDetail apiClassifierDetail cxxFileDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-AF0475FE-E830-3C14-ABF2-6C265D44489C"><a name="GUID-AF0475FE-E830-3C14-ABF2-6C265D44489C"><!-- --></a>
<h3 class="sectiontitle">PROT_NONE</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
<p class="p">Protections are chosen from these bits, or-ed together. no permissions.</p>
</div>
</p></div>
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-B585641F-8FDF-36AA-A44D-18ABE6EDA112"><a name="GUID-B585641F-8FDF-36AA-A44D-18ABE6EDA112"><!-- --></a>
<h3 class="sectiontitle">PROT_READ</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
<p class="p">Protections are chosen from these bits, or-ed together. pages can be read.</p>
</div>
</p></div>
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-FA2597D1-592E-3730-AA32-07618CD3D9D3"><a name="GUID-FA2597D1-592E-3730-AA32-07618CD3D9D3"><!-- --></a>
<h3 class="sectiontitle">PROT_WRITE</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
<p class="p">Protections are chosen from these bits, or-ed together. pages can be written.</p>
</div>
</p></div>
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-91191DD3-50CA-3A48-9B48-CD3E5C82F3A2"><a name="GUID-91191DD3-50CA-3A48-9B48-CD3E5C82F3A2"><!-- --></a>
<h3 class="sectiontitle">PROT_EXEC</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
<p class="p">Protections are chosen from these bits, or-ed together. pages can be executed.</p>
</div>
</p></div>
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-3B53D673-16D9-3E3B-B498-C656F09A602C"><a name="GUID-3B53D673-16D9-3E3B-B498-C656F09A602C"><!-- --></a>
<h3 class="sectiontitle">MAP_SHARED</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
<p class="p">share changes</p>
</div>
</p></div>
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-56EEA256-7A91-3248-A849-CEBFF473425C"><a name="GUID-56EEA256-7A91-3248-A849-CEBFF473425C"><!-- --></a>
<h3 class="sectiontitle">MAP_PRIVATE</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
<p class="p">changes are private</p>
</div>
</p></div>
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-0EC8AE35-62E8-30E2-BE77-941CCAB5C94B"><a name="GUID-0EC8AE35-62E8-30E2-BE77-941CCAB5C94B"><!-- --></a>
<h3 class="sectiontitle">MAP_FIXED</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
<p class="p">map addr must be exactly as requested.</p>
</div>
</p></div>
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-E399537D-9F60-3E32-8C2C-3008D4DEFFBE"><a name="GUID-E399537D-9F60-3E32-8C2C-3008D4DEFFBE"><!-- --></a>
<h3 class="sectiontitle">MAP_FAILED</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
</div>
</p></div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-7A8EBA5C-083F-38FF-B1A0-05C83DFC96F4"><a name="GUID-7A8EBA5C-083F-38FF-B1A0-05C83DFC96F4"><!-- --></a>
<h3 class="sectiontitle">MS_SYNC</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
<p class="p">
<a class="xref" href="GUID-D5C321D8-9194-398B-9F75-9486A515BF95.html#GUID-8EF47BC9-CA1E-3BB4-80ED-C1E91B26CD71">msync()</a> flags. msync synchronously.</p>
</div>
</p></div>
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-429F8856-5C22-329B-A999-FE375FF98054"><a name="GUID-429F8856-5C22-329B-A999-FE375FF98054"><!-- --></a>
<h3 class="sectiontitle">MS_ASYNC</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
<p class="p">
<a class="xref" href="GUID-D5C321D8-9194-398B-9F75-9486A515BF95.html#GUID-8EF47BC9-CA1E-3BB4-80ED-C1E91B26CD71">msync()</a> flags. return immediately.</p>
</div>
</p></div>
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-9F43C517-F603-33E5-87AB-080D824D55A0"><a name="GUID-9F43C517-F603-33E5-87AB-080D824D55A0"><!-- --></a>
<h3 class="sectiontitle">MS_INVALIDATE</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
<p class="p">
<a class="xref" href="GUID-D5C321D8-9194-398B-9F75-9486A515BF95.html#GUID-8EF47BC9-CA1E-3BB4-80ED-C1E91B26CD71">msync()</a> flags. invalidate all cached data.</p>
</div>
</p></div>
</div>
<div class="topic reference apiRef apiValue cxxTypedef nested1" id="GUID-2E4A4A3B-FF79-324F-8A11-F1566DD721BF"><a name="GUID-2E4A4A3B-FF79-324F-8A11-F1566DD721BF"><!-- --></a>
<h3 class="sectiontitle">Typedef mode_t</h3>
<div class="section signature"><table class="signature"><tr><td>typedef 
					<a class="xref xref apiRelation" href="GUID-6B9FA9E3-BBBA-3B9F-8538-94583F2D3BA4.html">__mode_t</a>
</td><td>mode_t</td></tr></table></div><div class="section section apiDesc section apidesc">
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-38A7E245-0CE9-3390-ACB6-FAAFCE37549E"><a name="GUID-38A7E245-0CE9-3390-ACB6-FAAFCE37549E"><!-- --></a>
<h3 class="sectiontitle">_MODE_T_DECLARED</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
</div>
</p></div>
<div class="topic reference apiRef apiValue cxxTypedef nested1" id="GUID-54ED801F-7697-3B5C-ABA2-538CA9890498"><a name="GUID-54ED801F-7697-3B5C-ABA2-538CA9890498"><!-- --></a>
<h3 class="sectiontitle">Typedef off_t</h3>
<div class="section signature"><table class="signature"><tr><td>typedef 
					<a class="xref xref apiRelation" href="GUID-6B9FA9E3-BBBA-3B9F-8538-94583F2D3BA4.html">__off_t</a>
</td><td>off_t</td></tr></table></div><div class="section section apiDesc section apidesc">
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-98753359-AE4C-30ED-B71C-91C0435F4110"><a name="GUID-98753359-AE4C-30ED-B71C-91C0435F4110"><!-- --></a>
<h3 class="sectiontitle">_OFF_T_DECLARED</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
</div>
</p></div>
<div class="topic reference apiRef apiValue cxxTypedef nested1" id="GUID-BE25FFE1-646E-34EF-B1E7-CCAAB66666AF"><a name="GUID-BE25FFE1-646E-34EF-B1E7-CCAAB66666AF"><!-- --></a>
<h3 class="sectiontitle">Typedef size_t</h3>
<div class="section signature"><table class="signature"><tr><td>typedef 
					<a class="xref xref apiRelation" href="GUID-6B9FA9E3-BBBA-3B9F-8538-94583F2D3BA4.html">__size_t</a>
</td><td>size_t</td></tr></table></div><div class="section section apiDesc section apidesc">
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-70E6211E-7ADA-33FD-B9D0-4E6335A159A2"><a name="GUID-70E6211E-7ADA-33FD-B9D0-4E6335A159A2"><!-- --></a>
<h3 class="sectiontitle">_SIZE_T_DECLARED</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
</div>
</p></div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-537E5ABA-E961-3007-B96E-E62B145639E3"><a name="GUID-537E5ABA-E961-3007-B96E-E62B145639E3"><!-- --></a>
<h3 class="sectiontitle">_MMAP_DECLARED</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
</div>
</p></div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-A9CB7422-6D8E-3FF9-99AB-39B1A1B11163"><a name="GUID-A9CB7422-6D8E-3FF9-99AB-39B1A1B11163"><!-- --></a>
<a name="GUID-66B9612F-1374-3494-817B-CDCE156A5A00"><!-- --></a><h3 class="sectiontitle">mmap ( void *, size_t, int, int, int, off_t )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void *</td><td>mmap</td><td>(</td><td>void *</td><td><span class="parameter">,</span></td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-381654FC-8996-3621-93A3-636F88EE7207.html">size_t</a></td><td><span class="parameter">,</span></td></tr><tr><td colspan="3"> </td><td>int</td><td><span class="parameter">,</span></td></tr><tr><td colspan="3"> </td><td>int</td><td><span class="parameter">,</span></td></tr><tr><td colspan="3"> </td><td>int</td><td><span class="parameter">,</span></td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-CB2B498B-2972-37ED-A024-1A0F15E4333C.html">off_t</a></td><td><span class="parameter"></span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"></td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">The mmap system call causes the pages starting at addr and continuing for at most len bytes to be mapped from the object described by fildes, starting at byte offset offset. If len is not a multiple of the pagesize, the mapped region may extend past the specified range. Any such extension beyond the end of the mapped object will be zero-filled.</p>
<p class="p">If addr is non-zero, it is used as a hint to the system. (As a convenience to the system, the actual address of the region may differ from the address supplied). If addr is zero, an address will be selected by the system. The actual starting address of the region is returned. A successful mmap deletes any previous mapping in the allocated address range.</p>
<p class="p">The protections (region accessibility) are specified in the prot argument by or'ing the following values:</p>
<div class="p">
<pre class="pre codeblock">PROT_READ 	Pages may be read.
PROT_WRITE 	Pages may be written.
PROT_EXEC 	Pages may be executed.
PROT_NONE 	This protection mode is currently not supported.</pre>
 The flags argument specifies the type of the mapped object, mapping options and whether modifications made to the mapped copy of the page are private to the process or are to be shared with other references. Sharing, mapping type and options are specified in the flags argument by or'ing the following values:</div>
<div class="p">
<pre class="pre codeblock">MAP_PRIVATE 	Modifications are private.
MAP_SHARED 	Modifications are shared.
MAP_FIXED, MAP_FILE, MAP_ANON, MAP_HASSEMAPHORE, MAP_STACK, MAP_NOSYNC -- These flags are currently not supported.</pre>
 The close system call does not unmap pages, see munmap for further information.</div>
<p class="p">The current design does not allow a process to specify the location of swap space. In the future we may define an additional mapping type, MAP_SWAP, in which the file descriptor argument specifies a file or device to which swapping should be done.</p>
<div class="p">Examples: <pre class="pre codeblock">/* Detailed description  : Example to create a mapped memory to a file region.
 Precondition : None              
 /
#include &lt;unistd.h&gt;
#include &lt;stdio.h&gt;
#include &lt;sys/mman.h&gt;
#include &lt;fcntl.h&gt;
int main(void)
{
    int fd = -1;
    char* mapaddr;
    int len = getpagesize();
    int prot = PROT_WRITE | PROT_READ;
    if((fd = open("C:\Test.txt", O_RDWR | O_CREAT, 0666) ) &lt; 0){
        printf("File open failed");
    }
    mapaddr = (char*)mmap((void*)0, len, prot, MAP_SHARED, fd, 0);
    if(mapaddr == MAP_FAILED){
        printf("mmap on file failed");
    }
    printf("mmap on file succeeded");
}</pre>
</div>
<p class="p">See also: <a class="xref" href="GUID-D5C321D8-9194-398B-9F75-9486A515BF95.html#GUID-2EE34993-D6E4-3664-97B7-C743C8108465">mprotect()</a> <a class="xref" href="GUID-D5C321D8-9194-398B-9F75-9486A515BF95.html#GUID-8EF47BC9-CA1E-3BB4-80ED-C1E91B26CD71">msync()</a> <a class="xref" href="GUID-D5C321D8-9194-398B-9F75-9486A515BF95.html#GUID-5E100F89-4824-39C9-87F4-19B12C5B9082">munmap()</a> <a class="xref" href="GUID-1E1E8FB2-DEC1-3D52-B3B7-B339F4F689E8.html#GUID-2FA1BB1F-A699-38B9-BE31-DA3C9550604C">getpagesize()</a></p>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter"></td><td>Represents the parameter addr  </td></tr><tr class="bg"><td class="parameter"></td><td>Represents the parameter addr  </td></tr><tr><td class="parameter"></td><td>Represents the parameter addr  </td></tr><tr class="bg"><td class="parameter"></td><td>Represents the parameter addr  </td></tr><tr><td class="parameter"></td><td>Represents the parameter addr  </td></tr><tr class="bg"><td class="parameter"></td><td>Represents the parameter addr  </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>Upon successful completion, mmap returns a pointer to the mapped region. Otherwise, a value of MAP_FAILED is returned and errno is set to indicate the error.</dd></dl></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-2EE34993-D6E4-3664-97B7-C743C8108465"><a name="GUID-2EE34993-D6E4-3664-97B7-C743C8108465"><!-- --></a>
<a name="GUID-D5902110-47B3-3D77-92CB-047DF9C8271B"><!-- --></a><h3 class="sectiontitle">mprotect ( const void *, size_t, int )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C int</td><td>mprotect</td><td>(</td><td>const void *</td><td><span class="parameter">,</span></td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-381654FC-8996-3621-93A3-636F88EE7207.html">size_t</a></td><td><span class="parameter">,</span></td></tr><tr><td colspan="3"> </td><td>int</td><td><span class="parameter"></span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"></td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">The mprotect system call changes the specified pages to have protection prot. Not all implementations will guarantee protection on a page basis; the granularity of protection changes may be as large as an entire region. A region is the virtual address space defined by the start and end addresses of a struct vm_map_entry .</p>
<p class="p">NOTE: This interface is not functionally supported in Symbian OS, only build supported.</p>
<p class="p">
</p><p class="p">See also: <a class="xref" href="GUID-D5C321D8-9194-398B-9F75-9486A515BF95.html#GUID-8EF47BC9-CA1E-3BB4-80ED-C1E91B26CD71">msync()</a> <a class="xref" href="GUID-D5C321D8-9194-398B-9F75-9486A515BF95.html#GUID-5E100F89-4824-39C9-87F4-19B12C5B9082">munmap()</a></p>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters">
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>Upon successful completion, mprotect returns the value 0 if successful; otherwise the value -1 is returned and the global variable errno is set to indicate the error.</dd></dl></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-8EF47BC9-CA1E-3BB4-80ED-C1E91B26CD71"><a name="GUID-8EF47BC9-CA1E-3BB4-80ED-C1E91B26CD71"><!-- --></a>
<a name="GUID-40B63F84-895A-381B-B57F-3F8297B905A4"><!-- --></a><h3 class="sectiontitle">msync ( void *, size_t, int )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C int</td><td>msync</td><td>(</td><td>void *</td><td><span class="parameter">,</span></td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-381654FC-8996-3621-93A3-636F88EE7207.html">size_t</a></td><td><span class="parameter">,</span></td></tr><tr><td colspan="3"> </td><td>int</td><td><span class="parameter"></span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"></td></tr></table></div><div class="section section apiDesc section apidesc">
<div class="p">
<pre class="pre codeblock"> MS_ASYNC
  This flag is currently not supported.
 MS_SYNC
  Perform synchronous writes
 MS_INVALIDATE
  Invalidate all cached data</pre>
 The msync system call writes any modified pages back to the file system. If len is non-zero only those pages containing addr and len-1 succeeding locations will be examined. The flags argument may be specified as follows:</div>
<p class="p">MS_ASYNC This flag is currently not supported. MS_SYNC Perform synchronous writes MS_INVALIDATE Invalidate all cached data</p>
<div class="p">Examples: <pre class="pre codeblock">/*
 Detailed description: Example to sync changes on mapped memory to file.
 Precondition: None
               
*/
#include &lt;unistd.h&gt;
#include &lt;stdio.h&gt;
#include &lt;sys/mman.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;string.h&gt;
int main(void)
{
    int fd = -1;
    char* mapaddr;
    int len = getpagesize();
    int prot = PROT_WRITE | PROT_READ;
    if((fd = open("C:\Test.txt", O_RDWR | O_CREAT, 0666) ) &lt; 0)
    {
         printf("File open failed");
    }
    mapaddr = (char*)mmap((void*)0, len, prot, MAP_SHARED, fd, 0);
    if(mapaddr == MAP_FAILED)
    {
         printf("mmap on file failed");
    }
    strcpy(mapaddr, "This is a write through mapped memory ");
    if(-1 == msync(mapaddr, len, MS_SYNC))
    {
        printf("Sync on mapped memory to file failed");
    }
    printf("Sync on mapped memory to file succeeded");
}</pre>
</div>
<p class="p">See also: mlock() <a class="xref" href="GUID-D5C321D8-9194-398B-9F75-9486A515BF95.html#GUID-2EE34993-D6E4-3664-97B7-C743C8108465">mprotect()</a> <a class="xref" href="GUID-D5C321D8-9194-398B-9F75-9486A515BF95.html#GUID-5E100F89-4824-39C9-87F4-19B12C5B9082">munmap()</a></p>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters">
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>Upon successful completion msync() returns 0; otherwise, it returns -1 and sets errno to indicate the error.</dd></dl></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-5E100F89-4824-39C9-87F4-19B12C5B9082"><a name="GUID-5E100F89-4824-39C9-87F4-19B12C5B9082"><!-- --></a>
<a name="GUID-904B6088-0FFE-3ACA-B60F-864C2F5528B3"><!-- --></a><h3 class="sectiontitle">munmap ( void *, size_t )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C int</td><td>munmap</td><td>(</td><td>void *</td><td><span class="parameter">,</span></td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-381654FC-8996-3621-93A3-636F88EE7207.html">size_t</a></td><td><span class="parameter"></span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"></td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">The munmap system call deletes the mappings for the specified address range and causes further references to addresses within the range to generate invalid memory references. The current implementation does not support partial deletion of mapped memory, i.e if offset to offset+len section of memory was mapped using mmap the entire section of memory offset+len will be deleted.</p>
<div class="p">Examples: <pre class="pre codeblock">/*
 Detailed description: Example to create a mapped memory to a file region.
 Precondition: None
               
*/
#include &lt;unistd.h&gt;
#include &lt;stdio.h&gt;
#include &lt;sys/mman.h&gt;
#include &lt;fcntl.h&gt;
int main(void)
{
    int fd = -1;
    char* mapaddr;
    int len = getpagesize();
    int prot = PROT_WRITE | PROT_READ;
    if((fd = open("C:\Test.txt", O_RDWR | O_CREAT, 0666) ) &lt; 0){
        printf("File open failed");
    }
    mapaddr = (char*)mmap((void*)0, len, prot, MAP_SHARED, fd, 0);
    if(mapaddr == MAP_FAILED){
        printf("mmap on file failed");
    }
    printf("mmap on file succeeded");
}</pre>
</div>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters">
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>Upon successful completion munmap() returns 0; otherwise, it returns -1 and sets errno to indicate the error.</dd></dl></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-86B9698B-920F-395B-BDA0-9A5F33B810F7"><a name="GUID-86B9698B-920F-395B-BDA0-9A5F33B810F7"><!-- --></a>
<a name="GUID-FF8FD54D-4CD3-3DC7-9A48-56043F26E5DD"><!-- --></a><h3 class="sectiontitle">shm_open ( const char *, int, mode_t )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C int</td><td>shm_open</td><td>(</td><td>const char *</td><td><span class="parameter">,</span></td></tr><tr><td colspan="3"> </td><td>int</td><td><span class="parameter">,</span></td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-CB2B498B-2972-37ED-A024-1A0F15E4333C.html">mode_t</a></td><td><span class="parameter"></span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"></td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Notes:</p>
<p class="p">1) Mode values for group is ignored.</p>
<p class="p">2) Execute bit is ignored.</p>
<p class="p">3) The name argument pointing to a shared memory object actually does not appear in the file system.</p>
<p class="p">4) Symbian implementation does not distinguish between a name begining with or without a slash character (\).</p>
<div class="p">Examples: <pre class="pre codeblock">/* Detailed description  : Example to create a shared memory object.
 Precondition : None              
 /
#include &lt;stdio.h&gt;
#include &lt;sys/mman.h&gt;
#include &lt;fcntl.h&gt;
int main(void)
    {
    int fd = -1;
    if((fd = shm_open("page", O_RDWR|O_CREAT, 0666)) &lt; 0)
	{
	printf("shared memory creation failed");
	}
    printf("shared memory creation succeeded");
    return 0;
    }</pre>
</div>
<p class="p">See also: <a class="xref" href="GUID-D5C321D8-9194-398B-9F75-9486A515BF95.html#GUID-F193620B-818C-3B64-9E08-4309D86316C0">shm_unlink()</a> close() read() write() <a class="xref" href="GUID-1E1E8FB2-DEC1-3D52-B3B7-B339F4F689E8.html#GUID-F89B4BED-1EE5-3279-AFCC-CFAE30C250D4">lseek()</a> fstat() fcntl()</p>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter"></td><td>For full documentation, see http://www.opengroup.org/onlinepubs/000095399/functions/shm_open.html </td></tr></table></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-F193620B-818C-3B64-9E08-4309D86316C0"><a name="GUID-F193620B-818C-3B64-9E08-4309D86316C0"><!-- --></a>
<a name="GUID-BF359599-0088-3F3E-BD80-B09C1F5DA380"><!-- --></a><h3 class="sectiontitle">shm_unlink ( const char * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C int</td><td>shm_unlink</td><td>(</td><td>const char *</td><td><span class="parameter"></span></td><td>)</td><td></td></tr></table></div><div class="section section apiDesc section apidesc">
<div class="p">Examples: <pre class="pre codeblock">/* Detailed description  : Example to unlink a shared memory object.
 Precondition : None              
 /
#include &lt;stdio.h&gt;
#include &lt;sys/mman.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;errno.h&gt;
int main(void)
    {
    int fd = -1;
    int ret = 0;
    if((fd = shm_open("page", O_RDWR|O_CREAT, 0666)) &lt; 0)
	{
	printf("shared memory creation failed with error %d\n", errno);
	}
    printf("shared memory creation succeeded\n");
    if((ret = shm_unlink("page")) &lt; 0)
	{
	printf("shared memory removal failed with error %d\n", errno);
	}
    printf("shared memory removal succeeded\n");
    return 0;
    }</pre>
</div>
<p class="p">See also: <a class="xref" href="GUID-D5C321D8-9194-398B-9F75-9486A515BF95.html#GUID-86B9698B-920F-395B-BDA0-9A5F33B810F7">shm_open()</a> close() read() write() <a class="xref" href="GUID-1E1E8FB2-DEC1-3D52-B3B7-B339F4F689E8.html#GUID-F89B4BED-1EE5-3279-AFCC-CFAE30C250D4">lseek()</a> fstat() fcntl()</p>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter"></td><td>For full documentation, see http://www.opengroup.org/onlinepubs/009695399/functions/shm_unlink.html </td></tr></table></div>
</div>
</div>
</div></div><div class="footer"><hr /><div class="copy">© Nokia 2005.</div></div>
</div></div></div></div></div></div></div></div></div></p></div></div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D5C321D8-9194-398B-9F75-9486A515BF95.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:21:43 GMT -->
</html>