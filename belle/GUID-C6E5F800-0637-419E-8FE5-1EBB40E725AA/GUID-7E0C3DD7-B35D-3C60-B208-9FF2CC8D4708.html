<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">

<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-7E0C3DD7-B35D-3C60-B208-9FF2CC8D4708.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:21:39 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta name="DC.Type" content="cxxFile" />
<meta name="DC.Title" content="if.html" />
<meta name="abstract" content="" />
<meta name="description" content="" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="GUID-7E0C3DD7-B35D-3C60-B208-9FF2CC8D4708" />
<title>if.h</title>
<meta name="keywords" content="api" /><link rel="stylesheet" type="text/css" href="css/nokiacxxref.css" />
<link href="css/s60/style.css" rel="stylesheet" type="text/css" />
<link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp3.html" rel="stylesheet" type="text/css" />
<link href="PLUGINS_ROOT/com.nokia.forum.library/css/category-cover_cpp3.html" rel="stylesheet" type="text/css" /></head>
<body id="GUID-7E0C3DD7-B35D-3C60-B208-9FF2CC8D4708"><a name="GUID-7E0C3DD7-B35D-3C60-B208-9FF2CC8D4708"><!-- --></a><div class="body"><div class="contentLeft prTxt">
<h1 class="sectiontitle">if.h File Reference</h1>
<div class="body refbody apiDetail apiClassifierDetail cxxFileDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-5E5783AD-E97B-3A1B-A6CD-760DB7EED3C5"><a name="GUID-5E5783AD-E97B-3A1B-A6CD-760DB7EED3C5"><!-- --></a>
<h3 class="sectiontitle">IF_NAMESIZE</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
<p class="p">Length of interface external name, including terminating '\0'. Limitation: IAP names in P.I.P.S. are restricted to 49 bytes in ASCII. For names in languages with a multi-byte character set, you can go upto 24 characters for 2-byte and 16 characters for 3-byte representations. All lengths are excluding the terminal NULL character.</p>
</div>
</p></div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-5EB0B45F-BC35-3C3A-AE31-32EB97DD3C81"><a name="GUID-5EB0B45F-BC35-3C3A-AE31-32EB97DD3C81"><!-- --></a>
<a name="GUID-FB2BA590-66FA-3BD0-9D65-50449850695A"><!-- --></a><h3 class="sectiontitle">if_freenameindex ( struct if_nameindex * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>if_freenameindex</td><td>(</td><td>struct <a class="xref xref apiRelation" href="GUID-FB74BCD0-6B5D-3563-91DB-12AA37B87CBC.html">if_nameindex</a> *</td><td><span class="parameter"></span></td><td>)</td><td></td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">
</p></div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter"></td><td>Refer to if_nametoindex() for the documentation </td></tr></table></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-CD4436DF-4C5B-3838-8A17-C48F8A1A9802"><a name="GUID-CD4436DF-4C5B-3838-8A17-C48F8A1A9802"><!-- --></a>
<a name="GUID-5C3BB51A-D2E5-3F29-8C8B-FE6DC174B363"><!-- --></a><h3 class="sectiontitle">if_indextoname ( unsigned, char * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C char *</td><td>if_indextoname</td><td>(</td><td>unsigned</td><td><span class="parameter">int</span>,</td></tr><tr><td colspan="3"> </td><td>char *</td><td><span class="parameter"></span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"></td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">
</p></div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr class="bg"><td class="parameter"></td><td>Refer to if_nametoindex() for the documentation </td></tr></table></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-73F0F55F-9034-32D3-92AE-4726310A8F4F"><a name="GUID-73F0F55F-9034-32D3-92AE-4726310A8F4F"><!-- --></a>
<a name="GUID-BB53758C-2BF5-3C4F-937C-E85F606D9148"><!-- --></a><h3 class="sectiontitle">if_nameindex ( void )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C struct <a class="xref xref apiRelation" href="GUID-FB74BCD0-6B5D-3563-91DB-12AA37B87CBC.html">if_nameindex</a> *</td><td>if_nameindex</td><td>(</td><td>void</td><td><span class="parameter"></span></td><td>)</td><td></td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Refer to <a class="xref" href="GUID-7E0C3DD7-B35D-3C60-B208-9FF2CC8D4708.html#GUID-D84E8617-8CF0-3EE6-9104-CF83D666C3A1">if_nametoindex()</a> for the documentation</p>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters">
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-D84E8617-8CF0-3EE6-9104-CF83D666C3A1"><a name="GUID-D84E8617-8CF0-3EE6-9104-CF83D666C3A1"><!-- --></a>
<a name="GUID-ED3C76B1-E655-3EAB-A2C4-8AA157BBDEDC"><!-- --></a><h3 class="sectiontitle">if_nametoindex ( const char * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C unsigned int</td><td>if_nametoindex</td><td>(</td><td>const char *</td><td><span class="parameter"></span></td><td>)</td><td></td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">The if_nametoindex function maps the interface name specified in ifname to its corresponding index. If the specified interface does not exist, it returns 0.</p>
<p class="p">The if_indextoname function maps the interface index specified in ifindex to it corresponding name, which is copied into the buffer pointed to by ifname, which must be of at least IFNAMSIZ bytes. This pointer is also the return value of the function. If there is no interface corresponding to the specified index, NULL is returned.</p>
<div class="p">
<pre class="pre codeblock"> The if_nameindex function returns an array of if_nameindex structures, one structure per interface, as defined in the include 
  file #include &lt;net/if.h&gt;; 
  The if_nameindex structure contains at least the following entries: 
  unsigned int   if_index;  /* 1, 2, ... */
    char          *if_name;   /* null terminated name: "le0", ... */</pre>
</div>
<p class="p">The end of the array of structures is indicated by a structure with an if_index of 0 and an if_name of NULL. A NULL pointer is returned upon an error.</p>
<p class="p">The if_freenameindex function frees the dynamic memory that was allocated by <a class="xref" href="GUID-FB74BCD0-6B5D-3563-91DB-12AA37B87CBC.html#GUID-FB74BCD0-6B5D-3563-91DB-12AA37B87CBC">if_nameindex</a>.</p>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter"></td><td>Note: This description also covers the following functions - if_indextoname() if_nameindex() if_freenameindex() </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>Upon successful completion, if_nametoindex returns the index number of the interface. If the interface is not found, a value of 0 is returned and errno is set to ENXIO. Upon successful completion, if_indextoname returns ifname. If the interface is not found, a NULL pointer is returned and errno is set to ENXIO. The if_nameindex returns a NULL pointer if sufficient memory cannot be allocated.</dd></dl></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-F2AD1FFE-AADD-3D1D-96B9-CB93677C8F15"><a name="GUID-F2AD1FFE-AADD-3D1D-96B9-CB93677C8F15"><!-- --></a>
<a name="GUID-082AC29A-41CF-3661-B819-3290B8627DE1"><!-- --></a><h3 class="sectiontitle">setdefaultif ( const struct ifreq * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C int</td><td>setdefaultif</td><td>(</td><td>const struct ifreq *</td><td><span class="parameter"></span></td><td>)</td><td></td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">The setdefaultif function can be used to set (or remove) a default network interface (either IAP or SNAP) for the application. This default interface, if set, will be used by all the further socket related function calls (connect, send, write etc) and all the host resolver function calls (getaddrinfo, getnameinfo, gethostbyname, getaddrbyname etc).</p>
<p class="p">If there is a default interface set using setdefaultif and if there is a separate interface set on a socket using the ioctl system call, network operations on that socket will not use the default one, but the socket specific interface.</p>
<p class="p">To remove the default interace, pass NULL as the argument.</p>
<p class="p">To set an IAP name as the default interface, the 'ifr_name' member of the 'ifreq' structure must be filled with the IAP name to be set. Unicode IAP names can also be set by converting them to UTF8 format before passing them to this API. See the example below:</p>
<div class="p">
<pre class="pre codeblock">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;net/if.h&gt;

int main()
	{
	struct ifreq ifReq;
	int ret;
	
	/* Set the default interface using IAP name */
	strcpy( ifReq.ifr_name, "Example Interface Name" );
	ret = setdefaultif( &amp;ifReq );
	if( ret == -1 )
		printf( "Setting default interface failed with errno = %d", errno );
	
	/* Perform network operations */
	/* ... */
	
	/* Remove the default interface */
	ret = setdefaultif( NULL );
	if( ret == -1 )
		printf( "Removing default interface failed with errno = %d", errno );
	
	return 0;
	}</pre>
</div>
<p class="p">To set a SNAP id as the default interface, the 'ifr_name' member of the 'ifreq' structure must be an empty string. In this case, the 'snap_id' member of the 'ifr_ifru' union in the parameter should contain the SNAP id to be set. It is recommended to zero initialize the 'ifreq' structure in this case. See the example below.</p>
<div class="p">
<pre class="pre codeblock">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;net/if.h&gt;

int main()
	{
	struct ifreq ifReq;
	int ret;
	unsigned int snapId = /* Get the SNAP id to be set from the application settings */
	
	/* Set the default interface using SNAP id */
	
	/* memset the ifreq to make sure that the interface name is an empty string */
	memset(&amp;ifReq, 0, sizeof(struct ifreq));
	ifReq.ifr_ifru.snap_id = snapId;
	
	ret = setdefaultif( &amp;ifReq );
	if( ret == -1 )
		printf( "Setting default interface failed with errno = %d", errno );
	
	/* Perform network operations */
	/* ... */
	
	/* Remove the default interface */
	ret = setdefaultif( NULL );
	if( ret == -1 )
		printf( "Removing default interface failed with errno = %d", errno );
	
	return 0;
	}</pre>
</div>
<p class="p">The setdefaultif is not guaranteed to be thread safe.</p>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters">
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>The setdefaultif returns 0 on success and -1 on failure. Specifically, if the interface is not found, -1 is returned and errno is set to ENOENT.</dd></dl></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-8283B7BD-26E9-3173-8EA9-C3429178E49D"><a name="GUID-8283B7BD-26E9-3173-8EA9-C3429178E49D"><!-- --></a>
<h3 class="sectiontitle">unsetdefaultif (  )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C int</td><td>unsetdefaultif</td><td>(</td><td>)</td><td></td></tr></table></div><div class="section section apiDesc section apidesc">
</div>
</div>
<div class="topic reference apiRef apiOperation cxxDefine nested1" id="GUID-6387CCF4-FDE1-3D5F-BA3B-3047AB0401BE"><a name="GUID-6387CCF4-FDE1-3D5F-BA3B-3047AB0401BE"><!-- --></a>
<h3 class="sectiontitle">MAXDNSSUFFIXES</h3>
<div class="body refbody apiDetail apiOperationDetail cxxDefineDetail"><p class="shortdesc">
<div class="section section apiDesc section apidesc">
</div>
</p></div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-80BFCC21-2BF0-3065-AAE3-FAE78578519A"><a name="GUID-80BFCC21-2BF0-3065-AAE3-FAE78578519A"><!-- --></a>
<a name="GUID-2B9920DD-A38A-361D-88D3-CA2C5E87DCB3"><!-- --></a><h3 class="sectiontitle">freednssuffixes ( struct if_dns_suffixes * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>freednssuffixes</td><td>(</td><td>struct <a class="xref xref apiRelation" href="GUID-AB6F5B95-DE8F-3A48-96C0-B85A22E4348D.html">if_dns_suffixes</a> *</td><td><span class="parameter"></span></td><td>)</td><td></td></tr></table></div><div class="section section apiDesc section apidesc">
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters">
</div>
</div>
</div></div><div class="footer"><hr /><div class="copy">© Nokia 2005.</div></div>
</div></div></div></div></p></div></div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-7E0C3DD7-B35D-3C60-B208-9FF2CC8D4708.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:21:39 GMT -->
</html>