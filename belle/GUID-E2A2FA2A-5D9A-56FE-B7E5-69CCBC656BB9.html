
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-E2A2FA2A-5D9A-56FE-B7E5-69CCBC656BB9.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:49:55 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Handling SDP Attributes" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-227B6970-A536-470F-B5A1-A1871F65D7F3" /><meta name="DC.Relation" scheme="URI" content="GUID-071A1E59-FE77-5D4D-B4D1-E6ECDF68BB03" /><meta name="DC.Relation" scheme="URI" content="GUID-EC7A9299-4272-5C1E-8A10-8267E154D56A" /><meta name="DC.Relation" scheme="URI" content="GUID-756D831F-F302-594C-8116-144358DD8442" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-E2A2FA2A-5D9A-56FE-B7E5-69CCBC656BB9" /><meta name="DC.Language" content="en" /><title>Handling SDP Attributes </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-E2A2FA2A-5D9A-56FE-B7E5-69CCBC656BB9">Handling SDP Attributes</h1><div><p>SDP Database service records are made up of a number of attributes. The attributes identify information about the service such as the class of service, that is the general category to which the service belongs, the date on which the service record was first created, the service's UUID and more. See the SDP specification, link provided elsewhere, for more information. The only required attribute is the UUID for the service. </p> <div><h3 class="section-title">How to create and manipulate attributes</h3> <p>Symbian have identified a special pattern for creating and manipulating SDP attributes. </p> <p><strong>Attribute types</strong> </p> <p>Attributes in service records can be one of fixed number of types. The API encapsulates each attribute type in a class, each of which is derived from CSdpAttrValue. The type is easily deducible from the name: e.g. <code class="codeph">CSdpAttrValueUint</code> encapsulates an unsigned integer type attribute. </p> <ul><li id="GUID-E92A60EB-5028-5CDC-83FB-20C626CECB82"><a name="GUID-E92A60EB-5028-5CDC-83FB-20C626CECB82"><!-- --></a><p> CSdpAttrValueBoolean </p> </li> <li id="GUID-991D696E-BA93-5D17-B0F0-529ABDB21B9A"><a name="GUID-991D696E-BA93-5D17-B0F0-529ABDB21B9A"><!-- --></a><p> CSdpAttrValueDEA </p> </li> <li id="GUID-57357160-CD33-54A9-8019-2E33ABCAB25A"><a name="GUID-57357160-CD33-54A9-8019-2E33ABCAB25A"><!-- --></a><p> CSdpAttrValueDES </p> </li> <li id="GUID-144544D2-3C0B-54BD-90E4-5C89FB97E3E1"><a name="GUID-144544D2-3C0B-54BD-90E4-5C89FB97E3E1"><!-- --></a><p> CSdpAttrValueInt </p> </li> <li id="GUID-78B376DB-7BEF-501F-8E9D-FB2EF279732A"><a name="GUID-78B376DB-7BEF-501F-8E9D-FB2EF279732A"><!-- --></a><p> CSdpAttrValueNil </p> </li> <li id="GUID-7F074756-D3B1-5E95-BB5A-7038145F0687"><a name="GUID-7F074756-D3B1-5E95-BB5A-7038145F0687"><!-- --></a><p> CSdpAttrValueString </p> </li> <li id="GUID-D0121510-803F-5CEC-ACBB-EB4CFF8165C9"><a name="GUID-D0121510-803F-5CEC-ACBB-EB4CFF8165C9"><!-- --></a><p> CSdpAttrValueUint </p> </li> <li id="GUID-704CA520-1BDC-556F-AB9F-9C12DC036233"><a name="GUID-704CA520-1BDC-556F-AB9F-9C12DC036233"><!-- --></a><p> CSdpAttrValueURL </p> </li> <li id="GUID-88B13916-67BC-57AE-BF75-12A294CEC6B3"><a name="GUID-88B13916-67BC-57AE-BF75-12A294CEC6B3"><!-- --></a><p> CSdpAttrValueUUID </p> </li> </ul> <p><strong>Complex Attributes</strong> </p> <p>Complex attribute values are stored as lists of other elements; nested lists are allowed. </p> <p>The list classes are: </p> <ul><li id="GUID-A0900A5B-3B74-581E-9E01-494F622B2F59"><a name="GUID-A0900A5B-3B74-581E-9E01-494F622B2F59"><!-- --></a><p> <code class="codeph">CSdpAttrValueDEA</code>: a Data element alternative, a data element whose data field is a sequence of data elements from which one data element is to be selected. </p> </li> <li id="GUID-24633CF0-8C72-5107-A8E5-02D830F08706"><a name="GUID-24633CF0-8C72-5107-A8E5-02D830F08706"><!-- --></a><p> <code class="codeph">CSdpAttrValueDES</code>: a Data element sequence, a data element whose data field is a sequence of data elements. </p> </li> </ul> <p>Both of these implement the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-3DC9CB25-E55D-38E6-8940-B3320EF7E9DD.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-3DC9CB25-E55D-38E6-8940-B3320EF7E9DD.html"><code class="apiname">MSdpElementBuilder</code></a> interface, which supplies functions of the form <code class="codeph">Build</code> <var class="varname">type</var> <code class="codeph">L()</code> to add elements of the specified <var class="varname">type</var> to the list. </p> <p><strong> Creating a Protocol List Attribute</strong> </p> <p>The following example builds a ProtocolDescriptorList attribute (attribute ID 0x0004), which is a list containing two nested lists. </p> <ol id="GUID-8AA434EC-40A2-549A-BD8F-3E343C51225E"><li id="GUID-936D92B9-B8E8-58BD-AB3C-A698253EC71C"><a name="GUID-936D92B9-B8E8-58BD-AB3C-A698253EC71C"><!-- --></a><p>Create the list. (NULL indicates that the list is not itself in another list) </p> <pre class="codeblock">CSdpAttrValueDES* attrValProt = CSdpAttrValueDES::NewDESL(NULL);
CleanupStack::PushL(attrValProt);</pre> </li> <li id="GUID-7B850D69-6F08-59A3-9220-09D4E48242A6"><a name="GUID-7B850D69-6F08-59A3-9220-09D4E48242A6"><!-- --></a><p>Build the first nested list. Notice the pattern used to push the new attribute value onto the service record. </p> <pre class="codeblock">attrValProt
    -&gt;StartListL()
        -&gt;BuildDESL()
        -&gt;StartListL()
            -&gt;BuildUUIDL(TUUID(TUint16(0x0100))) // L2CAP
        -&gt;EndListL()</pre> </li> <li id="GUID-F3A52C4E-F82A-5EC4-B004-8F23515E23B1"><a name="GUID-F3A52C4E-F82A-5EC4-B004-8F23515E23B1"><!-- --></a><p>Build the second nested list. </p> <pre class="codeblock">  -&gt;BuildDESL()
        -&gt;StartListL()
            -&gt;BuildUUIDL(TUUID(TUint16(0x0003))) // RFCOMM
            -&gt;BuildUintL(TServAttrInt&lt;TUint8&gt;&gt;(1)) // DLCI = 1
        -&gt;EndListL()
    -&gt;EndListL();</pre> <p>Notice that all the code from the start of 2 above to the end of 3 is essentially a single long line of code. This is an example of the SDP pattern discussed earlier. </p> </li> </ol> <p> <strong> Note: </strong> </p> <ul><li id="GUID-3EA609A2-BB81-52F1-936B-B4A0FC74C6F7"><a name="GUID-3EA609A2-BB81-52F1-936B-B4A0FC74C6F7"><!-- --></a><p> <code class="codeph">MSdpElementBuilder</code> functions are called cumulatively as part of a single statement. </p> </li> <li id="GUID-87B95637-9AFA-52E6-9AC3-34F7D6EBC5F8"><a name="GUID-87B95637-9AFA-52E6-9AC3-34F7D6EBC5F8"><!-- --></a><p>The start of a list is indicated by a call to <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-3DC9CB25-E55D-38E6-8940-B3320EF7E9DD.html#GUID-08A8B787-304E-34BC-9110-FAE4B2873FB8"><code class="apiname">MSdpElementBuilder::StartListL()</code></a> and ended by <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-3DC9CB25-E55D-38E6-8940-B3320EF7E9DD.html#GUID-F00D7635-1B0D-3A13-8574-D6DE91870C11"><code class="apiname">MSdpElementBuilder::EndListL()</code></a>. </p> </li> </ul> </div> <div><h3 class="section-title">Where next?</h3> <p>The complete set of Service Discovery Database tutorials are shown below: </p> <ol id="GUID-360A4ECF-05FD-50D5-89CE-3C0A9216B9C5"><li id="GUID-BBC0B062-F5D3-5595-9675-20E4A27DD121"><a name="GUID-BBC0B062-F5D3-5595-9675-20E4A27DD121"><!-- --></a><p> <a href="GUID-B75BD3DE-9C2E-5429-B55B-891462B92795.html">Connecting to the service discovery database</a> </p> </li> <li id="GUID-A4CE3FF9-053C-58CF-8863-67DB7664E405"><a name="GUID-A4CE3FF9-053C-58CF-8863-67DB7664E405"><!-- --></a><p> <strong>Handling SDP attributes</strong> - This document </p> </li> <li id="GUID-2802DB1F-5983-5C75-A942-2E5E794ACC70"><a name="GUID-2802DB1F-5983-5C75-A942-2E5E794ACC70"><!-- --></a><p> <a href="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35.html">Registering Services</a> </p> </li> <li id="GUID-D11ADFBE-6FF1-5FED-846D-7B9D4F33652B"><a name="GUID-D11ADFBE-6FF1-5FED-846D-7B9D4F33652B"><!-- --></a><p> <a href="GUID-33210C48-3198-51BC-9970-8B29F711A8E2.html">Setting service record attributes</a> </p> </li> <li id="GUID-30808463-3A6F-5D6A-969A-CAE442AD744B"><a name="GUID-30808463-3A6F-5D6A-969A-CAE442AD744B"><!-- --></a><p> <a href="GUID-ED342E6B-A4A3-576B-8934-7E7C049837F0.html">SDP Service records and attributes</a> </p> </li> </ol> <p>Also refer to the <a href="GUID-E5893C4A-024A-53A7-805F-68989382DC3F.html">Bluetooth Service Discovery Database overview</a> and the <a href="GUID-8451102A-8E68-5C86-9E40-D53183E32261.html">Bluetooth SDP Overview</a> for additional background information. </p> </div> </div></div></div><div class="footer"><p class="metadata">Last updated October 9th, 2009</p><hr /><div class="copy">Â© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-E2A2FA2A-5D9A-56FE-B7E5-69CCBC656BB9.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:49:55 GMT -->
</html>