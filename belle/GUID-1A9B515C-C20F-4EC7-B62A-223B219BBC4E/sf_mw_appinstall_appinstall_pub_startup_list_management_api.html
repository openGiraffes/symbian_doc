<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-1A9B515C-C20F-4EC7-B62A-223B219BBC4E/sf_mw_appinstall_appinstall_pub_startup_list_management_api.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:09:32 GMT -->
<head><title>Startup list Management API Specification</title><?php include ("define.html"); ??><?php include (ROOT."/nokiaglobal/styles.php"); ??><?php include ("archdoc_head.html"); ??><link href="css/html.css" media="screen" rel="stylesheet" title="Nokia Web Guidelines" type="text/css" /></head><body><?php include (ROOT."/nokiaglobal/header.php"); ??><div id="sdl_container"><div id="leftMenu"><div id="expandcontractdiv"><a id="index">Symbian Platform API Specifications</a></div><div id="treeDiv1">&#160;</div><script type="text/javascript">var currentIconMode = 0; window.name="i127 i368 i388 i389"; YAHOO.util.Event.onDOMReady(buildTree,this,true);</script></div><div id="sdl_content"><h1>Startup list Management API Specification</h1>
<table class="toc" id="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a>
<ul>
<li class="toclevel-2"><a href="#Description"><span class="tocnumber">1.1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-2"><a href="#Changes"><span class="tocnumber">1.2</span> <span class="toctext">Changes</span></a></li>
<li class="toclevel-2"><a href="#Use_Cases"><span class="tocnumber">1.3</span> <span class="toctext">Use Cases</span></a></li>
<li class="toclevel-2"><a href="#Class_Structure"><span class="tocnumber">1.4</span> <span class="toctext">Class Structure</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Using_The_API"><span class="tocnumber">2</span> <span class="toctext">Using The API</span></a>
<ul>
<li class="toclevel-2"><a href="#Adding_one_executable_into_the_startup_list"><span class="tocnumber">2.1</span> <span class="toctext">Adding one executable into the startup list</span></a>
<ul>
<li class="toclevel-3"><a href="#Adding_multiple_executables"><span class="tocnumber">2.1.1</span> <span class="toctext">Adding multiple executables</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Extensions_to_the_API"><span class="tocnumber">2.2</span> <span class="toctext">Extensions to the API</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Glossary"><span class="tocnumber">3</span> <span class="toctext">Glossary</span></a>
<ul>
<li class="toclevel-2"><a href="#Abbreviations"><span class="tocnumber">3.1</span> <span class="toctext">Abbreviations</span></a></li>
<li class="toclevel-2"><a href="#Definitions"><span class="tocnumber">3.2</span> <span class="toctext">Definitions</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<a name="Overview"><h2> <span class="mw-headline">1 Overview </span></h2>
</a><p>This document describes Startup List Management API in the Symbian platform.
</p><p>Startup List Management API provides means for third party developers to
add their native applications into the device's modifiable startup list to launch the application at device boot up. Starter executes the
modifiable startup list at the end of the terminal bootup.
</p><p>Startup List Management API is applicable only for native applications
delivered inside SIS eXtended packages.
</p><p><br />
</p>
<table border="1" cellspacing="0">
<tr>
<td width="12%"><b>API category</b></td><td>public
</td></tr>
<tr>
<td width="12%"><b>API type</b></td><td>c++
</td></tr>
<tr>
<td width="12%"><b>Existed since</b></td><td>Legacy S60 3.0
</td></tr>
<tr>
<td width="12%"><b>Location</b></td><td><span class="plainlinks"><code>/sf/mw/appinstall/appinstall_pub/startup_list_management_api</code></span>
</td></tr>
<tr>
<td width="12%"><b>Buildfiles</b></td><td><span class="plainlinks"><code>/sf/mw/appinstall/appinstall_pub/startup_list_management_api/group/bld.inf</code></span>
</td></tr></table>
<p><br />
</p>
<a name="Description"><h3> <span class="mw-headline">1.1 Description </span></h3>
</a><p>Startup List Management API defines rules and policies that allow a third
party application to make modifications to the device's startup list during
the installation / uninstallation process. The API does not define any classes,
but it defines a set of resource file structures and enumerations that each
client must declare. This API does not require other SDK APIs.
</p>
<a name="Changes"><h3> <span class="mw-headline">1.2 Changes </span></h3>
</a><p>This API is available for S60 3rd Edition and onwards.
</p>
<a name="Use_Cases"><h3> <span class="mw-headline">1.3 Use Cases </span></h3>
</a><p>The only use case of this API is to offer third-party developers a mean
to get their own application started during a device start-up.
</p>
<a name="Class_Structure"><h3> <span class="mw-headline">1.4 Class Structure </span></h3>
<table border="1" cellspacing="0">
<caption> Summary of API classes and header files
</caption>
<tr bgcolor="gray">
<th>Classes</th><th>Files
</th></tr>
<tr>
<td>No classes</td><td><span class="plainlinks"><code>/epoc32/include/mw/StartupItem.hrh</code></span>, <span class="plainlinks"><code>/epoc32/include/mw/StartupItem.rh</code></span>
</td></tr></table>
</a><p>This interface has no classes.
</p><p>A resource file, the structure of which is defined in <code>StartupItem.rh</code>,
is needed to define executable(s) started at boot time. 
</p>
<table border="1" cellspacing="0">
<tr>
<td> BYTE version</td><td> Indicates the version of the API. Do not use.
</td></tr>
<tr>
<td> LTEXT Executable_name</td><td> Full path to the executable.
</td></tr>
<tr>
<td> WORD recovery</td><td> Recovery policy used in case of failure in executable launch.
</td></tr></table>
<p>The <code>TStartupExceptionPolicy</code> enumeration, which is defined in <code>StartupItem.hrh</code>,
is used to define the recovery policy in case of failure when launching the
executable at device boot up. Currently, only <code>EStartupItemExPolicyNone</code> value can
be used.
</p>
<a name="Using_The_API"><h2> <span class="mw-headline">2 Using The API </span></h2>
</a><p>To correctly use Startup List Management API the application developer
must create a startup control file containing metadata about the application
to be added to the startup list. The metadata contains the full path of the
application executable and startup recovery policy used in case of an error
in application startup. In order to add several executables into the startup
list, the application developer can declare several metadata sections in a
single startup control file. For detailed description about the metadata,
see section <a href="#Class_Structure" title="">Class Structure</a>.
</p><p>The metadata is in a resource file format and needs to be compiled by Symbian
resource file compiler <code>epocrc</code>. The compiled resource file, that is, the startup
control file, must be installed in the import directory of Software Installer
UI private folder in the Phone memory drive (<code>c:\private\101f875a\import\</code>).
</p><p>In addition, the following requirements must be met:
</p>
<ul><li> The installation package containing the application must be trusted, that is, it must be signed with a valid certificate that chains to one of the root certificates on device.
</li><li> The installation package must install the application executable to be added into the startup list.
</li><li> The installation package type must be SISAPP (SA). The package types PARTIALUPGRADE (PU) and SISPATCH (SP) are supported since S60 3rd Edition, FP1.
</li><li> In case of an embedded package, the control file must be included in the parent package.
</li><li> The control file must be named as <code>(package UID).rsc</code>, where package UID equals to the UID of the installation package.
</li><li> The control file must not contain any other resource items than those defined in the <a href="#Class_Structure" title="">Class Structure</a> section.
</li></ul>
<p>If any of the requirements above is not met, the Software Installer UI ignores the startup control file and no items are added to the startup list.
</p><p>An application is automatically removed from a startup list during uninstallation.
</p>
<a name="Adding_one_executable_into_the_startup_list"><h3> <span class="mw-headline">2.1 Adding one executable into the startup list </span></h3>
</a><p>First of all, the startup control file must be created for an executable.
</p>
<pre>/*
* ==============================================================================
*  Name        : (12345678).rss
*  Part of     : Example application
*  Description : A startup control file to add executable to the startup list.
*  Version     : 1
*
* ==============================================================================
*/
#include &lt;startupitem.rh&gt;
RESOURCE STARTUP_ITEM_INFO exampleappl
{
executable_name = "c:\\sys\\bin\\example.exe";
recovery = EStartupItemExPolicyNone;
}
</pre>
<p>The compiled startup control file is installed into the import directory
of Software Installer UI private folder in Phone memory drive (<i> c:\private\101f875a\import\</i>)
as follows:
</p>
<pre>/*
* ==============================================================================
*  Name        : exampleappl.pkg
*  Part of     : Example application
*  Description : Installation package file description for example application.
*  Version     : 1
*
* ==============================================================================
*/
;Languages
EN,FI
;Header
#{"Example application","Esimerkkisovellus"},(12345678),1,0,0, TYPE=SA
%{"Nokia Inc","Nokia Oy"}
:"Nokia"
"data\armv5\listener.exe"-"c:\sys\bin\example.exe"
"data\data\commonresource.rsc"-"c:\resource\apps\commonresource.rsc"
</pre>
<a name="Adding_multiple_executables"><h4> <span class="mw-headline">2.1.1 Adding multiple executables </span></h4>
</a><p>Several executables can be added into the startup list by declaring several
metadata sections in a single startup control file.
</p>
<pre>/*
* ==============================================================================
*  Name        : (12345678).rss
*  Part of     : Example application
*  Description : A startup control file to add two executables to startup list.
*  Version     : 1
*
* ==============================================================================
*/
#include &lt;startupitem.rh&gt;
RESOURCE STARTUP_ITEM_INFO exampleappl
{
executable_name = "c:\\sys\\bin\\example.exe";
recovery = EStartupItemExPolicyNone;
}
RESOURCE STARTUP_ITEM_INFO dispatcher
{
executable_name = "!:\\sys\\bin\\dispatcher.exe"; // dispatcher can be installed
                                                  // to memory card as well
recovery = EStartupItemExPolicyNone;
}
</pre>
<a name="Extensions_to_the_API"><h3> <span class="mw-headline">2.2 Extensions to the API </span></h3>
</a><p>There are no extensions to this API.
</p>
<a name="Glossary"><h2> <span class="mw-headline">3 Glossary </span></h2>
</a><a name="Abbreviations"><h3> <span class="mw-headline">3.1 Abbreviations </span></h3>
<table border="1" cellspacing="0">
<tr bgcolor="gray">
<th></th><th>
</th></tr>
<tr>
<td> API</td><td> Application Programming Interface
</td></tr>
<tr>
<td> SISX</td><td> SIS eXtended
</td></tr>
<tr>
<td> UI</td><td> User Interface
</td></tr></table>
</a><a name="Definitions"><h3> <span class="mw-headline">3.2 Definitions </span></h3>
<table border="1" cellspacing="0">
<tr>
<td> <b> Definition</b>
</td><td> <b> Description</b>
</td></tr>
<tr>
<td> UID</td><td> Unique ID allocated by Symbian for specific purposes.
</td></tr>
<tr>
<td> Startup control file</td><td> File containing metadata about items in modifiable startup list.
</td></tr></table>
<div class="copy"><?php include ("copy.php"); ??></div></a></div></div><?php include (ROOT."/nokiaglobal/footer.php"); ??></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-1A9B515C-C20F-4EC7-B62A-223B219BBC4E/sf_mw_appinstall_appinstall_pub_startup_list_management_api.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:09:32 GMT -->
</html>