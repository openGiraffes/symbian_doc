<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-1A9B515C-C20F-4EC7-B62A-223B219BBC4E/sf_mw_drm_drm_pub_drm_license_checker_api.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:12:38 GMT -->
<head><title>DRM License Checker API Specification</title><?php include ("define.html"); ??><?php include (ROOT."/nokiaglobal/styles.php"); ??><?php include ("archdoc_head.html"); ??><link href="css/html.css" media="screen" rel="stylesheet" title="Nokia Web Guidelines" type="text/css" /></head><body><?php include (ROOT."/nokiaglobal/header.php"); ??><div id="sdl_container"><div id="leftMenu"><div id="expandcontractdiv"><a id="index">Symbian Platform API Specifications</a></div><div id="treeDiv1">&#160;</div><script type="text/javascript">var currentIconMode = 0; window.name="i127 i368 i621 i623"; YAHOO.util.Event.onDOMReady(buildTree,this,true);</script></div><div id="sdl_content"><h1>DRM License Checker API Specification</h1>
<table class="toc" id="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a>
<ul>
<li class="toclevel-2"><a href="#Description"><span class="tocnumber">1.1</span> <span class="toctext">Description</span></a>
<ul>
<li class="toclevel-3"><a href="#Emulator_support"><span class="tocnumber">1.1.1</span> <span class="toctext">Emulator support</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Changes"><span class="tocnumber">1.2</span> <span class="toctext">Changes</span></a></li>
<li class="toclevel-2"><a href="#Use_Cases"><span class="tocnumber">1.3</span> <span class="toctext">Use Cases</span></a></li>
<li class="toclevel-2"><a href="#Class_Structure"><span class="tocnumber">1.4</span> <span class="toctext">Class Structure</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Using_The_API"><span class="tocnumber">2</span> <span class="toctext">Using The API</span></a>
<ul>
<li class="toclevel-2"><a href="#Checking_license"><span class="tocnumber">2.1</span> <span class="toctext">Checking license</span></a></li>
<li class="toclevel-2"><a href="#Error_handling"><span class="tocnumber">2.2</span> <span class="toctext">Error handling</span></a></li>
<li class="toclevel-2"><a href="#Memory_and_Performance_Considerations"><span class="tocnumber">2.3</span> <span class="toctext">Memory and Performance Considerations</span></a></li>
<li class="toclevel-2"><a href="#Extensions_to_the_API"><span class="tocnumber">2.4</span> <span class="toctext">Extensions to the API</span></a></li>
<li class="toclevel-2"><a href="#Limitations_of_the_API"><span class="tocnumber">2.5</span> <span class="toctext">Limitations of the API</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<a name="Overview"><h2> <span class="mw-headline">1 Overview </span></h2>
</a><p>DRM License Checker API allows usage rights enforcement for native applications.
It consists of functions for checking usage rights.
</p><p>Clients of the DRM License Checker API are protected applications.
</p><p><br />
</p>
<table border="1" cellspacing="0">
<tr>
<td width="12%"><b>API category</b></td><td>public
</td></tr>
<tr>
<td width="12%"><b>API type</b></td><td>c++
</td></tr>
<tr>
<td width="12%"><b>Existed since</b></td><td>Legacy S60 2.6
</td></tr>
<tr>
<td width="12%"><b>API libraries</b></td><td>DRMLicenseChecker.lib
</td></tr>
<tr>
<td width="12%"><b>Location</b></td><td><span class="plainlinks"><code>/sf/mw/drm/drm_pub/drm_license_checker_api</code></span>
</td></tr>
<tr>
<td width="12%"><b>Buildfiles</b></td><td><span class="plainlinks"><code>/sf/mw/drm/drm_pub/drm_license_checker_api/group/bld.inf</code></span>
</td></tr></table>
<p><br />
</p>
<a name="Description"><h3> <span class="mw-headline">1.1 Description </span></h3>
</a><p>The DRM License Checker API is intended for application protection. It
provides a single method with which the application can check if its license
is valid or not. It can be categorized as a library API and its type is a
method call interface.
</p>
<a name="Emulator_support"><h4> <span class="mw-headline">1.1.1 Emulator support </span></h4>
</a><p>This API is fully supported in the WINS/WINSCW emulator environment.
</p>
<a name="Changes"><h3> <span class="mw-headline">1.2 Changes </span></h3>
</a><p>DRM License Checker API is an SDK API and available from S60 release 2.6
onwards.
</p>
<a name="Use_Cases"><h3> <span class="mw-headline">1.3 Use Cases </span></h3>
</a><p>The only use case for DRM License Checker API is to check if the license
of the application is valid or not. This is done by decrypting a critical
data file and if the decryption is successful, the license is valid.
</p>
<a name="Class_Structure"><h3> <span class="mw-headline">1.4 Class Structure </span></h3>
<table border="1" cellspacing="0">
<caption> Summary of API classes and header files
</caption>
<tr bgcolor="gray">
<th>Classes</th><th>Files
</th></tr>
<tr>
<td><span class="plainlinks"><code></code></span></td></tr></table></a>CDRMLicenseChecker <td><span class="plainlinks"><code>/epoc32/include/mw/DRMLicenseChecker.h</code></span>
</td>
<p>The following class diagram shows the DRM License Checker API.
</p>
<div style="text-align:center"><a class="image" href="images/SPB_10_1_drm_license_checker_api_class_diagram.png" title="DRM License Checker class diagram"><img alt="DRM License Checker class diagram" border="0" height="220" src="images/SPB_10_1_drm_license_checker_api_class_diagram.png" width="203" /></a></div>
<div style="text-align:center"><i>DRM License Checker class diagram</i></div>
<a name="Using_The_API"><h2> <span class="mw-headline">2 Using The API </span></h2>
</a><p>The DRM License checker API enables a client application check for the
existence of the necessary rights. It allows decryption of the installed data
files to be used further during runtime.
</p>
<a name="Checking_license"><h3> <span class="mw-headline">2.1 Checking license </span></h3>
</a><p>The <span class="plainlinks"><code>CheckLicense</code> </span> method is used to check if the license
is valid for an application. This function performs a license check by decrypting a data file
and returning the decrypted contents of the data file. A license check can
only succeed if the Rights object associated with the calling application
exists and sufficient rights are present. If the license check fails, an error
is returned.
</p><p>The decrypted data is used by the calling application in a non-trivial
way to further increase security. A simple check whether the <span class="plainlinks"><code>CheckLicense</code> </span> method
completed successfully is not enough. Ideally, the contents of the data file
are a crucial element of the calling application, such as, artwork or control
data for the application execution.
</p><p>The following code example elaborates the usage of the DRM License Checker
API:
</p>
<pre>CDRMLicenseChecker* licenseChecker;
...
if ( licenseChecker-&gt;CheckLicense( dataFile, data ) == KErrNone )
	{
	InitializeGame(data);
	delete data;
	}
else
	{
	// cause severe error
	}
...
</pre>
<a name="Error_handling"><h3> <span class="mw-headline">2.2 Error handling </span></h3>
</a><p>All the functions use return values as error code indicators. In addition,
the leave mechanism of the Symbian platform is used. Errors are indicated by values
other than <span class="plainlinks"><code>KErrNone</code> </span>. All leave situations are fatal. If a
function leaves, the interface object needs to be deallocated. Recovery
is not possible.
</p>
<a name="Memory_and_Performance_Considerations"><h3> <span class="mw-headline">2.3 Memory and Performance Considerations </span></h3>
</a><p>The DRM License Checker API does not consume memory significantly other
than for creating the required objects.
</p>
<a name="Extensions_to_the_API"><h3> <span class="mw-headline">2.4 Extensions to the API </span></h3>
</a><p>No extensions are possible to the DRM License Checker API.
</p>
<a name="Limitations_of_the_API"><h3> <span class="mw-headline">2.5 Limitations of the API </span></h3>
</a><p>The basic functionality of this API cannot be limited.
</p>
<div class="copy"><?php include ("copy.html"); ??></div></div></div><?php include (ROOT."/nokiaglobal/footer.php"); ??></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-1A9B515C-C20F-4EC7-B62A-223B219BBC4E/sf_mw_drm_drm_pub_drm_license_checker_api.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:12:39 GMT -->
</html>