
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-782AA56A-D3CF-5239-AB62-9AE6741964E8.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:54:40 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Reading from a Socket: Tutorial" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04" /><meta name="DC.Relation" scheme="URI" content="GUID-2139B04C-6ED6-599B-A018-D92451B8353E" /><meta name="DC.Relation" scheme="URI" content="GUID-61E0CD76-A2E3-5066-84A8-146EECA8ADCD" /><meta name="DC.Relation" scheme="URI" content="GUID-E9E2783E-44A0-5BA6-BBF3-D13C8D67B53E" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-782AA56A-D3CF-5239-AB62-9AE6741964E8" /><meta name="DC.Language" content="en" /><title> Reading
from a Socket: Tutorial </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-782AA56A-D3CF-5239-AB62-9AE6741964E8"> Reading
from a Socket: Tutorial</h1><div>
<p>This partial tutorial explains the behaviour of the different functions
available to read data from a socket. </p>
<div class="tablenoborder"><a name="GUID-2F5824A3-D900-5CC3-96CD-39F11D3F62DD"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-2F5824A3-D900-5CC3-96CD-39F11D3F62DD" frame="border" border="1" rules="all">
<thead align="left">
<tr class="title ">
<th class="cellrowborder" valign="top" width="19.9203187250996%" id="d0e154906">Type of Socket</th>
<th class="cellrowborder" valign="top" width="20.119521912350596%" id="d0e154909">Type of Wait</th>
<th class="cellrowborder" valign="top" width="20.517928286852587%" id="d0e154912">Must socket be connected?</th>
<th class="cellrowborder" valign="top" width="19.721115537848604%" id="d0e154915">Lose Data on Overflow?</th>
<th class="cellrowborder" valign="top" width="19.721115537848604%" id="d0e154918">APIs</th>
</tr>
</thead>
<tbody>
<tr class="">
<td class="cellrowborder" rowspan="3" valign="top" width="19.9203187250996%" headers="d0e154906 "><p>Datagram </p></td>
<td class="cellrowborder" rowspan="2" valign="top" width="20.119521912350596%" headers="d0e154909 "><p>Return on first Data </p> </td>
<td class="cellrowborder" valign="top" width="20.517928286852587%" headers="d0e154912 "><p>Yes </p> </td>
<td class="cellrowborder" valign="top" width="19.721115537848604%" headers="d0e154915 "><p>Yes </p> </td>
<td class="cellrowborder" valign="top" width="19.721115537848604%" headers="d0e154918 "><p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">RSocket::Recv(TDes8 &amp;aBuffer,TUint
                someFlags,TRequestStatus &amp;aStatus)</code></a> </p> <p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">RSocket::Recv(TDes8 &amp;aBuffer,TUint                 someFlags,TRequestStatus
&amp;aStatus,TSockXfrLength &amp;aLen)</code></a> </p> </td>
</tr>
<tr class="bg ">
<td class="cellrowborder" valign="top" width="19.9203187250996%" headers="d0e154906 "><p>No -socket can be in unknown state </p> </td>
<td class="cellrowborder" valign="top" width="20.119521912350596%" headers="d0e154909 "><p>No </p> </td>
<td class="cellrowborder" valign="top" width="20.517928286852587%" headers="d0e154912 "><p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">RSocket::RecvFrom(TDes8 &amp;aBuffer,TSockAddr
                &amp;anAddr,TUint someFlags,TRequestStatus &amp;aStatus)</code></a> </p> </td>
</tr>
<tr class="">
<td class="cellrowborder" valign="top" width="19.9203187250996%" headers="d0e154906 "><p>Wait until buffer full </p> </td>
<td class="cellrowborder" valign="top" width="20.119521912350596%" headers="d0e154909 ">&nbsp;</td>
<td class="cellrowborder" valign="top" width="20.517928286852587%" headers="d0e154912 ">&nbsp;</td>
<td class="cellrowborder" valign="top" width="19.721115537848604%" headers="d0e154915 "><p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">RSocket::Read(TDes8 &amp;aBuffer,TRequestStatus
                &amp;aStatus)</code></a> </p> </td>
</tr>
<tr class="bg ">
<td class="cellrowborder" rowspan="3" valign="top" width="19.9203187250996%" headers="d0e154906 "><p>Stream </p></td>
<td class="cellrowborder" valign="top" width="20.119521912350596%" headers="d0e154909 "><p>Return on first Data </p> </td>
<td class="cellrowborder" align="justify" valign="top" width="20.517928286852587%" headers="d0e154912 "><p>Yes </p> </td>
<td class="cellrowborder" valign="top" width="19.721115537848604%" headers="d0e154915 ">&nbsp;</td>
<td class="cellrowborder" valign="top" width="19.721115537848604%" headers="d0e154918 "><p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">RSocket::RecvOneOrMore(TDes8 &amp;aBuffer,TUint
someFlags,TRequestStatus &amp;aStatus,TSockXfrLength &amp;aLen)</code></a> </p> </td>
</tr>
<tr class="">
<td class="cellrowborder" rowspan="2" valign="top" width="19.9203187250996%" headers="d0e154906 "><p>Wait until buffer full </p> </td>
<td class="cellrowborder" align="justify" valign="top" width="20.119521912350596%" headers="d0e154909 "><p>Yes </p></td>
<td class="cellrowborder" valign="top" width="20.517928286852587%" headers="d0e154912 "><p>Yes </p> </td>
<td class="cellrowborder" valign="top" width="19.721115537848604%" headers="d0e154915 "><p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">RSocket::Recv(TDes8 &amp;aBuffer,TUint
someFlags,TRequestStatus &amp;aStatus)</code></a> </p> <p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">RSocket::Read(TDes8
&amp;aBuffer,TRequestStatus &amp;aStatus)</code></a> </p> </td>
</tr>
<tr class="bg ">
<td class="cellrowborder" valign="top" width="19.9203187250996%" headers="d0e154906 ">&nbsp;</td>
<td class="cellrowborder" valign="top" width="20.119521912350596%" headers="d0e154909 "><p>No </p> </td>
<td class="cellrowborder" valign="top" width="20.517928286852587%" headers="d0e154912 "><p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">RSocket::Recv(TDes8 &amp;aBuffer,TUint
someFlags,TRequestStatus &amp;aStatus,TSockXfrLength &amp;aLen)</code></a> </p> </td>
</tr>
</tbody>
</table></div>
<p>The following <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">RSocket</code></a> functions read
data from a socket: </p>
<ul>
<li id="GUID-4FB26DCD-9852-5AED-AD07-0B71BBF28325"><a name="GUID-4FB26DCD-9852-5AED-AD07-0B71BBF28325"><!-- --></a><p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname"> Recv()</code></a> and <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">RecvFrom()</code></a> each have two versions: </p> <ul>
<li id="GUID-AAF3AE2B-47D1-5868-A0F2-E2582C6705C1"><a name="GUID-AAF3AE2B-47D1-5868-A0F2-E2582C6705C1"><!-- --></a><p>A version which only
completes when the full amount of requested data is received, or the connection
is disconnected. </p> <p>For example <code class="codeph">RSocket::Recv(TDes8 &amp;aDesc,
TUint flags,                   TRequestStatus &amp;aStatus)</code>. </p> <p>The
amount of data requested is specified by the <a href="GUID-6D1A830E-F0F1-5C0F-8EEB-70922C0EF6B8.html">maximum
length</a> of the descriptor which receives the data. If the amount of
data to read is not known until run-time, use a <code class="codeph">HBufC8</code> or <code class="codeph">RBuf</code> descriptor. </p> <p>If
the datagram is larger than the requested amount, the protocol plug-in (PRT)
will truncate the datagram and return the requested amount of data (counted
in bytes). The function will not indicate to the client that the data was
truncated. </p> </li>
<li id="GUID-31B36AAE-0E65-570E-84D1-C6EC2B9FDE2C"><a name="GUID-31B36AAE-0E65-570E-84D1-C6EC2B9FDE2C"><!-- --></a><p>A version which takes
the <code class="codeph">TSockXfrLength &amp;aLen</code> parameter and reads a datagram
in parts. </p> <p>For example <code class="codeph">RSocket::Recv(TDes8&amp; aDesc,TUint
                  flags,TRequestStatus&amp; aStatus,TSockXfrLength&amp; aLen)</code>. </p> <p>This
version completes with a count of the remaining bytes of the datagram in the <code class="codeph">TSockXfrLength</code> parameter.
The client can repeat the use of the function to read the remaining bytes.
To read the bytes which remain, the client sets the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">KSockReadContinuation</code></a> flag.
To set the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">KSockReadContinuation</code></a> flag
the client must use the <em>binary OR</em> operator with the <em>flags</em> field.
The bytes which remain are discarded if the client uses the function and does
not set the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">KSockReadContinuation</code></a> flag. </p> <p>Clients
who need to read the datagrams as a "stream" can set the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">KSockReadContinuation</code></a> flag.
When the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">KSockReadContinuation</code></a> flag is
set and there is no remaining data, new data is read. </p> </li>
</ul> </li>
<li id="GUID-9D0FEAA4-3C27-594A-B582-CE3F445ADB7D"><a name="GUID-9D0FEAA4-3C27-594A-B582-CE3F445ADB7D"><!-- --></a><p> <code class="codeph">Read()</code> only
completes when the full amount of requested data is received, or the connection
is disconnected. </p> <p>The amount of data requested is specified by the <a href="GUID-6D1A830E-F0F1-5C0F-8EEB-70922C0EF6B8.html">maximum length</a> of
the descriptor which receives the data. If the amount of data to read is not
known until run-time, use a <code class="codeph">HBufC8</code> or <code class="codeph">RBuf</code> descriptor. </p> <p>If
the datagram is larger than the requested amount, the protocol plug-in (PRT)
will truncate the datagram and return the requested amount of data (counted
in bytes). The function will not indicate to the client that the data was
truncated. </p> </li>
<li id="GUID-B31DE8AB-8F0E-5D72-97FF-2362E013E551"><a name="GUID-B31DE8AB-8F0E-5D72-97FF-2362E013E551"><!-- --></a><p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><code class="apiname">RecvOneOrMore()</code></a> reads
at least one byte of data and completes with the available data. The amount
of data received is returned in the <code class="codeph">TSockXfrLength</code> argument. </p> </li>
<li id="GUID-9A43EC4E-F053-55DE-9024-76562A899E63"><a name="GUID-9A43EC4E-F053-55DE-9024-76562A899E63"><!-- --></a><p> <code class="codeph">RecvFrom()</code> is
designed for use when the client does not know if the socket is connected.
If the socket is not connected, a source address is returned. </p> </li>
<li id="GUID-DA868C8C-2165-5430-9E28-8A304423925D"><a name="GUID-DA868C8C-2165-5430-9E28-8A304423925D"><!-- --></a><p> <code class="codeph">Recv()</code>, <code class="codeph">Read()</code>,
and <code class="codeph">RecvOneOrMore()</code> are designed for use with connected sockets. </p> </li>
</ul>
</div></div></div><div class="footer"><p class="metadata">Last updated February 4th, 2010</p><hr /><div class="copy">© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-782AA56A-D3CF-5239-AB62-9AE6741964E8.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:54:40 GMT -->
</html>