
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-9D6C086F-7621-5522-AE0B-81CBD5E99125.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:03:46 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Bitmap Transform Library Guide" /><meta name="abstract" content="This topic provides more detailed information about and code snippets for the Bitmap Transform library." /><meta name="description" content="This topic provides more detailed information about and code snippets for the Bitmap Transform library." /><meta name="DC.Relation" scheme="URI" content="GUID-88091838-03FC-550F-9A3D-DA70907EF955" /><meta name="DC.Relation" scheme="URI" content="GUID-C0B39D73-0A3C-5289-A774-7BE590037404" /><meta name="DC.Relation" scheme="URI" content="GUID-9D6C086F-7621-5522-AE0B-81CBD5E99125" /><meta name="DC.Relation" scheme="URI" content="GUID-E6692CDA-9E24-57AE-9BC2-14D68D6480C3" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-1DE5CDAD-8D71-5384-9E98-5665D5A4C792" /><meta name="DC.Relation" scheme="URI" content="GUID-3E341F9F-2635-589B-A59A-B999FE7DF9BE" /><meta name="DC.Relation" scheme="URI" content="GUID-7DB86BF1-0485-5CBA-9554-4C474B0EC1FB" /><meta name="DC.Relation" scheme="URI" content="GUID-9DFB1340-FA1E-530E-9372-DB6509CECA2B" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-9D6C086F-7621-5522-AE0B-81CBD5E99125" /><meta name="DC.Language" content="en" /><title>Bitmap Transform Library Guide </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-9D6C086F-7621-5522-AE0B-81CBD5E99125">Bitmap Transform Library Guide</h1><div><p>This topic provides more detailed information about and code snippets for the Bitmap Transform library. </p><div id="GUID-7D1E45F2-2793-5BE5-8F9E-1F92228A4C06"><h3 class="section-title">Purpose</h3> <p>Bitmap Transform makes it possible for bitmap images to be resized and rotated as described below. </p> </div> <div><h3 class="section-title">Introducing Bitmap Transformation</h3> <p>The resizing or scale (<a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-2008D827-A84A-3170-A8BD-86002BA37979.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-2008D827-A84A-3170-A8BD-86002BA37979.html"><code class="apiname">CBitmapScaler</code></a>) and rotation (<a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D0835677-6790-3038-8893-83E7186F47E7.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D0835677-6790-3038-8893-83E7186F47E7.html"><code class="apiname">CBitmapRotator</code></a>) actions are asynchronous operations that take a pointer to a <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html"><code class="apiname">TRequestStatus</code></a> object, which is signalled on completion of the requested action. The client application or calling DLL will hold the <code class="codeph">TRequestStatus</code> values within active objects. As with any use of an active object it is necessary to have an active scheduler present in the same thread as the application making use of the object. </p> <p> <strong>Note:</strong> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-2008D827-A84A-3170-A8BD-86002BA37979.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-2008D827-A84A-3170-A8BD-86002BA37979.html"><code class="apiname">CBitmapScaler</code></a> and <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D0835677-6790-3038-8893-83E7186F47E7.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D0835677-6790-3038-8893-83E7186F47E7.html"><code class="apiname">CBitmapRotator</code></a> are not able them to run in their own thread. </p> </div> <div><h3 class="section-title">Bitmap Transformation Example - Bitmap scaling</h3> <p>There are two variants of the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-2008D827-A84A-3170-A8BD-86002BA37979.html#GUID-CCE10188-A9FD-38C8-89EC-3908C91DD25A"><code class="apiname">CBitmapScaler::Scale()</code></a> function. The first variant performs rescaling on an image contained in one <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-683A1D42-2764-3EB7-BD19-9E12559199AB.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-683A1D42-2764-3EB7-BD19-9E12559199AB.html"><code class="apiname">CFbsBitmap</code></a> object and places the result in another object. The second variant rescales an image contained in a <code class="codeph">CFbsBitmap</code> object and places the result back in the same object. This is illustrated below. </p> <pre class="codeblock">void Scale(TRequestStatus* aRequestStatus, CFbsBitmap&amp; aSrcBitmap, CFbsBitmap&amp; aTgtBitmap, TBool aMaintainAspectRatio = ETrue);
void Scale(TRequestStatus* aRequestStatus, CFbsBitmap&amp; aBitmap, const TSize&amp; aDestinationSize, TBool aMaintainAspectRatio = ETrue);</pre> <p>If two <code class="codeph">CFbsBitmap</code> objects are specified in the scale operation, the dimensions of the destination object are used as the rescaling factors, subject to the aspect ratio setting (described below). </p> <p>If only the one <code class="codeph">CFbsBitmap</code> object is specified in the scale operation, the scaling factor is taken from <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-938244B2-5E1A-39F7-8ACA-E6DE4C44A313.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-938244B2-5E1A-39F7-8ACA-E6DE4C44A313.html"><code class="apiname">TSize</code></a> subject to the aspect ratio setting. </p> <p>The aspect ratio is maintained if <code class="codeph">aMaintainAspectRatio</code> is <code class="codeph">ETrue</code>. If the ratio is used, then the image is rescaled to the smaller of the horizontal and vertical scaling factors. This is best explained by use of an example. </p> <p>In this example, the source image is 50 pixels wide by 150 pixels high (an aspect ratio of 1:3), <code class="codeph">aMaintainAspectRatio</code> is set to <code class="codeph">ETrue</code>, and the proposed rescaling is to 75 pixels wide by 300 high. Applying this ratio to the smaller of the horizontal and vertical factors means using a new value for the larger rescaling factor so that the aspect ratio matches that of the source image. The smaller value is 75 pixels, the aspect ratio required is 1:3 so the larger value will be 75*3 which is 225. The image will be rescaled to 75 wide by 225 high. </p> </div> <div><h3 class="section-title">Bitmap Transformation Example - Bitmap rotation</h3> <p>There are two variants of the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-2008D827-A84A-3170-A8BD-86002BA37979.html#GUID-A655241C-5339-35E2-8BDE-EDAF13ECC87A"><code class="apiname">CBitmapScaler::Rotate()</code></a> function. The first performs a rotational action on an image contained in one <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-683A1D42-2764-3EB7-BD19-9E12559199AB.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-683A1D42-2764-3EB7-BD19-9E12559199AB.html"><code class="apiname">CFbsBitmap</code></a> object and places the result in another object. The second variant performs a rotational action on an image contained in a <code class="codeph">CFbsBitmap</code> object and places the result back in the same object. Valid rotational increments are specified in <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D0835677-6790-3038-8893-83E7186F47E7.html#GUID-D89261A3-D59C-38BC-BF55-B0C758AC9C85"><code class="apiname">CBitmapRotator::TRotationAngle</code></a>. </p> <p>Note: <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-2008D827-A84A-3170-A8BD-86002BA37979.html#GUID-A655241C-5339-35E2-8BDE-EDAF13ECC87A"><code class="apiname">CBitmapScaler::Rotate()</code></a> does not support user specified rotational angles. The only values allowed are those specified in <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D0835677-6790-3038-8893-83E7186F47E7.html#GUID-D89261A3-D59C-38BC-BF55-B0C758AC9C85"><code class="apiname">CBitmapRotator::TRotationAngle</code></a>. </p> <pre class="codeblock">void Rotate(TRequestStatus* aRequestStatus, CFbsBitmap&amp; aSrcBitmap, CFbsBitmap&amp; aTgtBitmap, TRotationAngle aAngle);

void Rotate(TRequestStatus* aRequestStatus, CFbsBitmap&amp; aBitmap, TRotationAngle aAngle);
</pre> <div class="tablenoborder"><a name="GUID-A207445C-18A1-5BA0-9E98-2D1C8A3126E7"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-A207445C-18A1-5BA0-9E98-2D1C8A3126E7" frame="border" border="1" rules="all"><tbody><tr class=""><td class="cellrowborder" valign="top"><div class="figure" id="GUID-E8157802-DA4E-5C30-94CE-E91DCD632187"><img src="GUID-27529BB0-8034-56B0-82FA-3E4CFDEBC99A_d0e390073_href.png" /></div> </td> <td class="cellrowborder" valign="top"><p> <code class="codeph">ERotation90DegreesClockwise</code> </p> </td> </tr> <tr class="bg "><td class="cellrowborder" valign="top"><div class="figure" id="GUID-FEF7BCE4-26B8-552A-9E86-C7F21AA8D88A"><img src="GUID-29F55D74-A206-5862-9C83-2C5045B2DB7F_d0e390088_href.png" /></div> </td> <td class="cellrowborder" valign="top"><p> <code class="codeph">ERotation180DegreesClockwise</code> </p> </td> </tr> <tr class=""><td class="cellrowborder" valign="top"><div class="figure" id="GUID-A12CB5D1-599B-5F85-B879-610EA9CD2CF9"><img src="GUID-37888891-DFB2-5A93-9547-3B22410906BF_d0e390103_href.png" /></div> </td> <td class="cellrowborder" valign="top"><p> <code class="codeph">ERotation270DegreesClockwise</code> </p> </td> </tr> <tr class="bg "><td class="cellrowborder" valign="top"><div class="figure" id="GUID-37EC2688-E3AC-51A4-86F9-95124DDF40F8"><img src="GUID-BA1071D5-E358-5B33-9204-CDCD0CECEF0A_d0e390118_href.png" /></div> </td> <td class="cellrowborder" valign="top"><p> <code class="codeph">EMirrorHorizontalAxis</code> </p> </td> </tr> <tr class=""><td class="cellrowborder" valign="top"><div class="figure" id="GUID-DFFCC6D6-B7F7-5047-B93D-CF79B2D47F17"><img src="GUID-399F7F7D-3E8E-58BB-9925-9F34C561C39A_d0e390133_href.png" /></div> </td> <td class="cellrowborder" valign="top"><p> <code class="codeph">EMirrorVerticalAxis</code> </p> </td> </tr> </tbody> </table></div> </div> </div><h3>Related concepts</h3><ul><li><a href="GUID-88091838-03FC-550F-9A3D-DA70907EF955.html">Imaging Frameworks overview</a></li><li><a href="GUID-C0B39D73-0A3C-5289-A774-7BE590037404.html"> Bitmap Transform Library
                Overview</a></li><li><a href="#GUID-9D6C086F-7621-5522-AE0B-81CBD5E99125">Bitmap Transform Library Guide</a></li><li><a href="GUID-E6692CDA-9E24-57AE-9BC2-14D68D6480C3.html">Enhanced Features for Encoder and
                Decoder Tutorial</a></li></ul></div></div><div class="footer"><p class="metadata">Last updated October 9th, 2009</p><hr /><div class="copy">© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-9D6C086F-7621-5522-AE0B-81CBD5E99125.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:03:52 GMT -->
</html>