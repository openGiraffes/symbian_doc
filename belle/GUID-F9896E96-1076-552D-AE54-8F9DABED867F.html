
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-F9896E96-1076-552D-AE54-8F9DABED867F.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:05:02 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Configuring the Video Player" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-1DE5CDAD-8D71-5384-9E98-5665D5A4C792" /><meta name="DC.Relation" scheme="URI" content="GUID-3E341F9F-2635-589B-A59A-B999FE7DF9BE" /><meta name="DC.Relation" scheme="URI" content="GUID-DDE1A8A9-1D67-53BF-8A65-340F139AD4AB" /><meta name="DC.Relation" scheme="URI" content="GUID-0EE3180B-4814-517E-A6DD-748136C17D55" /><meta name="DC.Relation" scheme="URI" content="GUID-F370A917-6963-58F6-8876-160A1DC42040" /><meta name="DC.Relation" scheme="URI" content="GUID-3F0856D9-7B58-5519-9B26-97F1A035E21D" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-F9896E96-1076-552D-AE54-8F9DABED867F" /><meta name="DC.Language" content="en" /><title>Configuring the Video Player </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-F9896E96-1076-552D-AE54-8F9DABED867F">Configuring the Video Player</h1><div><p>This tutorial describes how to configure the video player. </p> <div><h3 class="section-title">Purpose</h3> <p>The purpose of this tutorial is to show you how to make configuration adjustments to the video player. </p> <p><strong>Required Background</strong> </p> <p>The <a href="GUID-2DC80BA9-7AA2-5CD3-9105-1DE28CE196C1.html">Video Client Overview</a> introduces the video client utilities. </p> <p><strong>Introduction</strong> </p> <p>The video player utility is used to open, play, and obtain information from sampled video data. This functionality is implemented by the CVideoPlayerUtility class. The video data can be supplied either in a file, a descriptor or a URL. </p> </div> <div><h3 class="section-title">Using Video Player </h3> <p>The following tasks will be covered in this tutorial: </p> <ul><li id="GUID-0A783BCE-7C87-5EE1-BFDA-BD2847CF1E4F"><a name="GUID-0A783BCE-7C87-5EE1-BFDA-BD2847CF1E4F"><!-- --></a><p><a href="#GUID-18902F43-1F13-5A91-84AD-94732560A554">Set the Display Window</a> </p> </li> <li id="GUID-4A64B04C-737D-587E-BBA4-478EE453EC82"><a name="GUID-4A64B04C-737D-587E-BBA4-478EE453EC82"><!-- --></a><p><a href="#GUID-CDD3561D-84E4-5524-9593-5055659B6CB0"> Query and Set the Volume</a> </p> </li> <li id="GUID-15F0C370-6460-5D6D-8CDB-B042CBD4A7C6"><a name="GUID-15F0C370-6460-5D6D-8CDB-B042CBD4A7C6"><!-- --></a><p><a href="#GUID-BBCD720C-1276-5D6C-B9E6-1946EE019987">Query and Set the Balance</a> </p> </li> <li id="GUID-ACB66213-E77F-5F93-BF2D-A7DEECFA10D1"><a name="GUID-ACB66213-E77F-5F93-BF2D-A7DEECFA10D1"><!-- --></a><p><a href="#GUID-7666501B-196B-5FE9-A331-311B11BF7954">Query and Set the Priority</a> </p> </li> <li id="GUID-7E7ACD89-0ECB-5CD7-A550-571BC8F8FE1C"><a name="GUID-7E7ACD89-0ECB-5CD7-A550-571BC8F8FE1C"><!-- --></a><p><a href="#GUID-8B88F87D-A3F0-5521-92DA-C74EE2D942A8">Query and Set the Bit and Frame Rate</a> </p> </li> <li id="GUID-1ED08DD8-4D68-52AF-89DA-7617BCE9A388"><a name="GUID-1ED08DD8-4D68-52AF-89DA-7617BCE9A388"><!-- --></a><p><a href="#GUID-7D998004-DC09-5328-B2EE-AA363FB2D1C5">Query and Set the Current Playback Position</a> </p> </li> <li id="GUID-ADFC9AEB-30BE-56A0-B2C0-F6F2E7D12C2E"><a name="GUID-ADFC9AEB-30BE-56A0-B2C0-F6F2E7D12C2E"><!-- --></a><p><a href="#GUID-0A67AED6-860A-5D84-9CE3-6E30A673DD82">Query and Set the MIME and Codec Type</a> </p> </li> </ul> <p id="GUID-18902F43-1F13-5A91-84AD-94732560A554"><a name="GUID-18902F43-1F13-5A91-84AD-94732560A554"><!-- --></a><strong>Setting the Display Window</strong> </p> <p>The high level steps to set the display window are shown here: </p> <ul><li id="GUID-86A3CE74-3BC6-5C40-B9D4-9A6D89C2D059"><a name="GUID-86A3CE74-3BC6-5C40-B9D4-9A6D89C2D059"><!-- --></a><p> CVideoPlayerUtility::SetDisplayWindowL: This is used to provide the video controller with an area of display to render the current video frame. It can be represented pictorially as shown below: </p> <div class="figure" id="GUID-FAA210BE-66AB-5B23-AD33-F623B30AE305"><img src="GUID-1E25EE44-9421-549C-B79E-AEFE87308011_d0e405654_href.png" /><p class="figure-title"><strong>Figure: </strong>
                     Video display regions 
                  </p></div> <p>The screeenRect specifies the area within the window provided for displaying the video image. This rectangle is in screen coordinates. The video frame will be fitted to this rectangle as best possible, while maintaining the original aspect ratio. </p> <p>The ClipRect specifies the region to draw. The drawn region will be the intersection between the ClipRect and the ScreenRect. </p> <p>A crop region is defined as a region in the source video frame. The cropped region is displayed in the center of the ScreenRect with the same scaling as if it was displayed as part of the whole image. This could be used to zoom in on a region by setting the crop region, and setting the scale factor to fill the WindowRect. </p> <pre class="codeblock">void CPlayVideo::SetDisplayWindowL(RWsSession &amp;aWs, CWsScreenDevice &amp;aScreenDevice, RWindowBase &amp;aWindow, const TRect &amp;aWindowRect, const TRect &amp;aClipRect)
    {
    iVideoUtility-&gt;SetDisplayWindowL(aWs, aScreenDevice, aWindow, aWindowRect, aClipRect);
    }
</pre> </li> </ul> <p id="GUID-CDD3561D-84E4-5524-9593-5055659B6CB0"><a name="GUID-CDD3561D-84E4-5524-9593-5055659B6CB0"><!-- --></a><strong>Querying and Setting the Volume</strong> </p> <p>The current volume settings can be reported and set appropriately with the help of the following functions: : </p> <ul><li id="GUID-E8AFCF73-2B6E-5DF1-80EE-69B2E7D51260"><a name="GUID-E8AFCF73-2B6E-5DF1-80EE-69B2E7D51260"><!-- --></a><p> CVideoPlayerUtility::Volume(): Returns the current playback volume for the audio track of the video clip. </p> <pre class="codeblock">TInt CPlayVideo::Volume() 
    {
    return iVideoUtility-&gt;Volume();
    }</pre> </li> <li id="GUID-4C860E43-36B7-58C3-820A-E5901C7B250C"><a name="GUID-4C860E43-36B7-58C3-820A-E5901C7B250C"><!-- --></a><p> CVideoPlayerUtility::MaxVolume(): Returns the maximum volume that the audio track can support. </p> </li> <li id="GUID-BEEFF82A-D825-512C-86BF-EA2E5B55F48E"><a name="GUID-BEEFF82A-D825-512C-86BF-EA2E5B55F48E"><!-- --></a><p> CVideoPlayerUtility::SetVolumeL(): This function allows the volume of the audio track of the video clip to be set. The volume can be changed before or during playback and comes to effect immediately. The volume can be set to a value anywhere between zero and the maximum permissible volume. </p> <pre class="codeblock">TInt volume;

volume = iVideoPlayer.MaxVolume(); \\Returns maximum volume
void CPlayVideo::SetVolumeL(TInt aVolume) \\Set the audio volume
    {
    iVideoUtility-&gt;SetVolumeL(aVolume);
    } 

//The volume must be a value between 0 and the value returned by the MaxVolume function.

</pre> </li> </ul> <p id="GUID-BBCD720C-1276-5D6C-B9E6-1946EE019987"><a name="GUID-BBCD720C-1276-5D6C-B9E6-1946EE019987"><!-- --></a><strong>Querying and Setting the Balance</strong> </p> <p>The audio playback balance settings can be done using the following functions: </p> <ul><li id="GUID-D5970FD6-C545-54AD-A3C4-6710C7A744ED"><a name="GUID-D5970FD6-C545-54AD-A3C4-6710C7A744ED"><!-- --></a><p> CVideoPlayerUtility::SetBalanceL(): This function sets the current playback balance for the audio track of the video clip. It can be any value between KMMFBalanceMaxLeft and KMMFBalanceMaxRight. </p> <pre class="codeblock">void CPlayVideo::SetBalanceL(TInt aBalance)
    {
    iVideoUtility-&gt;SetBalanceL(aBalance);
    }</pre> </li> <li id="GUID-9AE78FF2-9210-5027-BE63-7FA63EFE5116"><a name="GUID-9AE78FF2-9210-5027-BE63-7FA63EFE5116"><!-- --></a><p> CVideoPlayerUtility::Balance(): This function returns the current playback balance settings for the audio track of the video clip. </p> <pre class="codeblock">TInt CPlayVideo::Balance() 
    {
    return iVideoUtility-&gt;Balance();    
    }</pre> </li> </ul> <p id="GUID-7666501B-196B-5FE9-A331-311B11BF7954"><a name="GUID-7666501B-196B-5FE9-A331-311B11BF7954"><!-- --></a><strong>Querying and Setting the Priority</strong> </p> <p>To set the priority for the playback to access the sound hardware, use the following methods: </p> <ul><li id="GUID-8573BEA1-DBE1-5AA2-8329-853B6B5BDD50"><a name="GUID-8573BEA1-DBE1-5AA2-8329-853B6B5BDD50"><!-- --></a><p> PriorityL(): This function returns the current playback priority. This is used to arbitrate between multiple objects simultaneously trying to accesses the sound hardware. </p> </li> <li id="GUID-B7B7769A-DAE7-503F-8375-6D99AABE9596"><a name="GUID-B7B7769A-DAE7-503F-8375-6D99AABE9596"><!-- --></a><p> SetPriorityL(): This function sets the playback priority. </p> <pre class="codeblock">void CPlayVideo::SetPriorityL(TInt aPriority, TMdaPriorityPreference aPref)
    {
    iVideoUtility-&gt;SetPriorityL(aPriority, aPref);
    }</pre> </li> </ul> <p id="GUID-8B88F87D-A3F0-5521-92DA-C74EE2D942A8"><a name="GUID-8B88F87D-A3F0-5521-92DA-C74EE2D942A8"><!-- --></a><strong>Querying and Setting the Bit and Frame Rate</strong> </p> <p>The high level steps to query and set the bit and frame rate: </p> <ul><li id="GUID-AA205B92-155C-5E21-8DD7-A78E793F65DE"><a name="GUID-AA205B92-155C-5E21-8DD7-A78E793F65DE"><!-- --></a><p> CVideoPlayerUtility::VideoBitRateL(): This function returns the bit rate of the video clip. This returns the video clip's bit rate in bits per second. </p> <pre class="codeblock">TInt CPlayVideo::VideoBitRateL() 
    {
    return iVideoUtility-&gt;VideoBitRateL();
    }</pre> </li> <li id="GUID-254E33F2-3169-51E1-B964-3E8D0107D79C"><a name="GUID-254E33F2-3169-51E1-B964-3E8D0107D79C"><!-- --></a><p> CVideoPlayerUtility::VideoFrameRateL(): This function returns the video frame rate. This returns the video frame rate in frames per second. </p> <pre class="codeblock">TReal32 CPlayVideo::VideoFrameRateL()
    {
    return iVideoUtility-&gt;VideoFrameRateL();
    }</pre> </li> <li id="GUID-0136372C-744E-5C85-B3F8-8E4F6921B7A2"><a name="GUID-0136372C-744E-5C85-B3F8-8E4F6921B7A2"><!-- --></a><p> CVideoPlayerUtility::SetVideoFrameRateL(): This function is used to set the number of video frames to be displayed per second. </p> <pre class="codeblock">void CPlayVideo::SetVideoFrameRateL(TReal32 aFramesPerSecond)
    {
    iVideoUtility-&gt;SetVideoFrameRateL(aFramesPerSecond);
    }</pre> </li> </ul> <p> <strong>Note:</strong> The presence of an audio track within a video clip can be determined using AudioEnabledL(). </p> <p id="GUID-7D998004-DC09-5328-B2EE-AA363FB2D1C5"><a name="GUID-7D998004-DC09-5328-B2EE-AA363FB2D1C5"><!-- --></a><strong>Querying and Setting the Current Playback Position</strong> </p> <p>The current playback position can be queried and set using the following functions: </p> <ul><li id="GUID-B3CC86FB-3169-5760-A289-7AAA7F5E6BF6"><a name="GUID-B3CC86FB-3169-5760-A289-7AAA7F5E6BF6"><!-- --></a><p> CVideoPlayerUtility::PositionL(): This function returns the current playback position. It returns the current position from the start of the clip in microseconds. </p> </li> <li id="GUID-3822C893-A609-5E8E-995B-C92D637CF435"><a name="GUID-3822C893-A609-5E8E-995B-C92D637CF435"><!-- --></a><p> CVideoPlayerUtility::SetPositionL(): This function sets the position for the playback within the video clip to start. </p> <pre class="codeblock">TTimeIntervalMicroSeconds pos;
TTimeIntervalMicroSeconds CPlayVideo::PositionL() \\ retrieves the current playback position within the video clip
    {
    return iVideoUtility-&gt;PositionL();
    } </pre> </li> </ul> <p id="GUID-0A67AED6-860A-5D84-9CE3-6E30A673DD82"><a name="GUID-0A67AED6-860A-5D84-9CE3-6E30A673DD82"><!-- --></a><strong>Querying and Setting the MIME and Codec Type</strong> </p> <p>This section explains the functions that reports and sets the MIME type and codecs for video and audio data that is already open. The functions are as stated below: </p> <ul><li id="GUID-2A5F777D-1AFE-5798-A818-B4772185B741"><a name="GUID-2A5F777D-1AFE-5798-A818-B4772185B741"><!-- --></a><p> CVideoPlayerUtility::VideoFormatMimeType(): This returns the current MIME type of the video clip currently open. </p> <pre class="codeblock">const TDesC8 &amp; CPlayVideo::VideoFormatMimeType() 
    {
    return iVideoUtility-&gt;VideoFormatMimeType();
    }</pre> </li> <li id="GUID-8558289D-3599-57D7-8571-50A49012D433"><a name="GUID-8558289D-3599-57D7-8571-50A49012D433"><!-- --></a><p>The datatype of the audio track used by the video clip can be retrieved using and AudioTypeL(). </p> <pre class="codeblock">TFourCC CPlayVideo::AudioTypeL() \\retrieves the codecs used by audio track
    {
    return iVideoUtility-&gt;AudioTypeL();
    } </pre> </li> </ul> </div> <div><h3 class="section-title">See Also</h3> <p><a href="GUID-172F46C1-6066-57FA-A815-5AC23ACE159D.html">Creating and Preparing a Video Player</a> </p> <p><a href="GUID-733B9695-0C7C-5637-9025-6CE3BAA1A23E.html"> Enabling/Disabling Audio or Video Playback Separately</a> </p> <p><a href="GUID-FE7DE542-3FD4-56D2-B281-C670EF1C4FEB.html">Scaling Automatically</a> </p> <p><a href="GUID-5F4510C9-5B16-593A-A225-37606800915B.html">Controlling Video Playback</a> </p> <p><a href="GUID-70B3881F-9532-5F1D-B210-99A15DB93FC2.html">Fast Forwarding and Rewinding</a> </p> <p><a href="GUID-469377FB-AAE8-5245-A8E1-469C65AFE5C5.html">Stepping Frames</a> </p> <p><a href="GUID-F13C7D36-E4AB-57F1-87A1-EB83AA2258DF.html">Controlling the Video Controller Plugin</a> </p> </div> </div></div></div><div class="footer"><p class="metadata">Last updated October 9th, 2009</p><hr /><div class="copy">© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-F9896E96-1076-552D-AE54-8F9DABED867F.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:05:03 GMT -->
</html>