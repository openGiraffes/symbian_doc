
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-8A5054C9-7556-5153-8CEE-FA8E5F4155AE.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:54:40 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="task" /><meta name="DC.Title" content="How to Create an Explicitly Bound Socket" /><meta name="abstract" content="This topic describes how create an explicitly bound socket." /><meta name="description" content="This topic describes how create an explicitly bound socket." /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04" /><meta name="DC.Relation" scheme="URI" content="GUID-2139B04C-6ED6-599B-A018-D92451B8353E" /><meta name="DC.Relation" scheme="URI" content="GUID-61E0CD76-A2E3-5066-84A8-146EECA8ADCD" /><meta name="DC.Relation" scheme="URI" content="GUID-E9E2783E-44A0-5BA6-BBF3-D13C8D67B53E" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-8A5054C9-7556-5153-8CEE-FA8E5F4155AE" /><meta name="DC.Language" content="en" /><title>How
to Create an Explicitly Bound Socket </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-8A5054C9-7556-5153-8CEE-FA8E5F4155AE">How
to Create an Explicitly Bound Socket</h1><div><p>This topic describes how create an explicitly bound socket. </p>
<div><h3 class="section-title">Context</h3><p>Start the network interface connection with <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-CB62E838-A380-309C-8B08-1F804EDB4387"><code class="apiname">RConnection::Start()</code></a> to
create an explicitly bound socket. </p> <p><strong>Creating an explicitly bound
socket</strong></p><p>  Explicitly bound sockets can be created in two ways: </p> </div>
<h3>Steps</h3><ol id="GUID-46A5DC4D-4DF0-400D-ACA1-D34F7DC7D2AD"><a name="GUID-46A5DC4D-4DF0-400D-ACA1-D34F7DC7D2AD"><!-- --></a>
<li id="GUID-AF44E5D1-D088-4F16-A801-129E443B52F2"><a name="GUID-AF44E5D1-D088-4F16-A801-129E443B52F2"><!-- --></a><p>Open a socket and bind the socket to a network interface connection.</p>
<div class="p"><p><strong>Example: </strong></p><ul>
<li><p>  Call <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-3491CE2A-A94D-34E0-B0DD-D476EE3334D7"><code class="apiname">RSocket::Open()</code></a> and pass an  <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html"><code class="apiname">RConnection</code></a>. </p> <p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html"><code class="apiname">RConnection</code></a> binds
to an interface  corresponding to the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html"><code class="apiname">RConnection</code></a>. </p> <p> 
In the following example code, if <code class="codeph">iConn</code> corresponds  to a
WiFi <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html"><code class="apiname">RConnection</code></a> then, after a calling  <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-3491CE2A-A94D-34E0-B0DD-D476EE3334D7"><code class="apiname">RSocket::Open()</code></a> the
socket is explicitly bound to WiFi. </p> <pre class="codeblock">iRecvSock.Open( ss, KAfInet, KSockStream, KProtocolInetTcp, iConn );</pre> </li>
</ul></div>
</li>
<li id="GUID-8F737ED5-AEE8-4E3F-BBBF-F5EB4B05F815"><a name="GUID-8F737ED5-AEE8-4E3F-BBBF-F5EB4B05F815"><!-- --></a><p>Open a socket and bind the socket to an IP address of the network
interface connection.</p>
<div class="p"><p><strong>Example: </strong></p><ul>
<li><p>  Call <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-5550C9E4-2A1B-3F52-A6CF-F5822AB9DBC9"><code class="apiname">RSocket::Bind()</code></a> and bind the socket to  an
IP address of the network interface connection. </p> <p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html#GUID-5550C9E4-2A1B-3F52-A6CF-F5822AB9DBC9"><code class="apiname">RSocket::Bind()</code></a> binds
the socket to a unique  IP address of the network interface connection. </p> <p> 
The following example code shows how to open a socket and bind  the socket
to a unique IP address of the WiFi connection. </p> <pre class="codeblock">// open an implicit socket
TInt err = iRecvSock.Open( iSs, KAfInet, KSockDatagram, KProtocolInetUdp); 
User::LeaveIfError( err );
// This IP address maps to WiFi in the ced.cfg file
_LIT(KRasAddr,"192.168.220.4");
const TInt KPort = 7000;
TInetAddr addr;
err = addr.Input( KRasAddr ); 
User::LeaveIfError( err );
addr.SetPort( KPort );
// Now the socket is explicitly bound to WiFi  
err = iRecvSock.Bind( addr ); 
RDebug::Print( _L("testapp: ETH Bind() = %d"), err ); 
User::LeaveIfError( err );
</pre> </li>
</ul><p> The following code block shows an extract from the <code>ced.cfg</code> file.
 </p><pre class="codeblock">
## 
[LANService]
ADD_SECTION
# COMMDB_ID = 1
Name=Ethernet
IfNetworks=ip
IpNetMask=255.0.0.0
IpGateway=0.0.0.0
IpAddrFromServer=FALSE
IpAddr=192.168.1.1
IpDNSAddrFromServer=FALSE
ConfigDaemonManagerName=NetCfgExtnDhcp
ConfigDaemonName=!DhcpServ
FIELD_COUNT=9
END_ADD

ADD_SECTION
# COMMDB_ID = 2
Name=Ethernet WiFi
IfNetworks=ip
IpNetMask=255.0.0.0
IpGateway=0.0.0.0
IpAddrFromServer=FALSE
-// This IP address maps to WiFi
IpAddr=192.168.220.4
IpDNSAddrFromServer=FALSE
IpNameServer1=194.72.6.51
IpNameServer2=194.72.6.52
ConfigDaemonManagerName=NetCfgExtnDhcp
ConfigDaemonName=!DhcpServ
LanServiceExtensionTableName=WLANServiceExtensionTable
LanServiceExtensionTableRecordId=4
FIELD_COUNT=13
END_ADD
</pre></div>
</li>
</ol>
<div><h3 class="section-title">Results</h3><p>The socket is explicitly bound to the specific IP address of the
network interface connection. </p> </div>
<div><h3 class="section-title">Explicit binding example</h3> <p>Client A creates a socket
with explicit binding using the specified interface connection. </p> <pre class="codeblock">sock1 = RSocket.Open(srv,conn);</pre> <p>ESock
creates the socket within the default connection and subconnection. </p> <div class="figure" id="GUID-BE26EF30-B103-5C3B-95A8-7ED66ECFE44C"><img src="GUID-B21A4858-162A-50F1-8F88-4259B7F7238E_d0e156781_href.png" /></div> </div>
<div><h3 class="section-title">Next actions</h3><p>A socket can also be opened over a sub-connection using <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0AFDA357-EE44-3788-9CAB-162B874134BF.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0AFDA357-EE44-3788-9CAB-162B874134BF.html"><code class="apiname">RSubConnection</code></a>.
When the socket is opened, a new Service Access Point (SAP) is created for
the socket in <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-BE7D196E-357B-36BE-80BB-CCBBE00DFA90.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-BE7D196E-357B-36BE-80BB-CCBBE00DFA90.html"><code class="apiname">ESock</code></a>. The SAP is used to handle inbound
and outbound data. </p> </div>
</div></div></div><div class="footer"><p class="metadata">Last updated November 6th, 2009</p><hr /><div class="copy">Â© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-8A5054C9-7556-5153-8CEE-FA8E5F4155AE.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:54:41 GMT -->
</html>