
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-765F43E2-39E8-53F5-881F-593F379623CA.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:05:10 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Sending and Receiving Non-RTP Data" /><meta name="abstract" content="This topic explains how to send and receive non-RTP data packets on the RTP and RTCP sockets." /><meta name="description" content="This topic explains how to send and receive non-RTP data packets on the RTP and RTCP sockets." /><meta name="DC.Relation" scheme="URI" content="GUID-993629CB-17B4-5E87-8DE1-06A4AC473FDD" /><meta name="DC.Relation" scheme="URI" content="GUID-5287A403-1094-5682-A443-A6C2A04A1F23" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-6425B722-4095-56E3-9198-70BA3E06C617" /><meta name="DC.Relation" scheme="URI" content="GUID-C467E6CD-6656-55F6-BDDF-BFA4F187B14F" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-765F43E2-39E8-53F5-881F-593F379623CA" /><meta name="DC.Language" content="en" /><title>Sending and Receiving Non-RTP Data </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-765F43E2-39E8-53F5-881F-593F379623CA">Sending and Receiving Non-RTP Data</h1><div><p>This topic explains how to send and receive non-RTP data packets on the RTP and RTCP sockets. </p><p>Exchanging non-RTP data on an RTP socket is one of the techniques you can use to implement NAT traversal (maintaining client-to-client network connections through Network Address Translation gateways). </p> <div id="GUID-E3E87467-E070-5F62-8191-9C08BFAC1535"><h3 class="section-title">Sending non-RTP data</h3> <p>The <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97FC8566-E4AD-3881-8669-134798A88779.html"><code class="apiname">RRtpSession::SendDataL()</code></a> method does not attach the RTP or RTCP header to the data. </p> <pre class="codeblock">// initialise the data 
const TInt KNonRtpBufferMaxLength = 100;
TBuf8&lt;KNonRtpBufferMaxLength&gt; nonRtpData;
nonRtpData.SetLength(KNonRtpBufferMaxLength);
nonRtpData.Fill('Z');
  
TRequestStatus stat;
iServer-&gt;rtpSession.SendDataL(ETrue,nonRtpData, stat);
  
User::WaitForRequest(stat);</pre> </div> <div id="GUID-22EED8DD-6D32-5F9E-89EC-667299FF87EC"><h3 class="section-title">Receiving non-RTP data</h3> <p>By default, when receiving data identified as non-RTP, the RTP stack discards it. </p> <p>To receive non-RTP data, you need to register for the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97FC8566-E4AD-3881-8669-134798A88779.html"><code class="apiname">ENonRtpDataReceived</code></a> and <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97FC8566-E4AD-3881-8669-134798A88779.html"><code class="apiname">ENonRtcpDataReceived</code></a> events. When you register for one of these events, the RTP stack no longer discards the non-RTP data but does not process the data either. To retrieve the data, call the following functions: </p> <ul><li id="GUID-3F0B007A-385A-5A73-9DD6-41361C187917"><a name="GUID-3F0B007A-385A-5A73-9DD6-41361C187917"><!-- --></a><p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97FC8566-E4AD-3881-8669-134798A88779.html"><code class="apiname">NonRtpDataL()</code></a> provides the non-RTP data received by the RTP socket. </p> <pre class="codeblock">
const TDesC8&amp; des = iServer-&gt;rtpSession.NonRtpDataL();
</pre> </li> <li id="GUID-A3D57B5B-E06E-5906-9A55-C339CA15AE2D"><a name="GUID-A3D57B5B-E06E-5906-9A55-C339CA15AE2D"><!-- --></a><p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97FC8566-E4AD-3881-8669-134798A88779.html"><code class="apiname">NonRtcpDataL()</code></a> provides the non-RTP data received by the RTCP socket. </p> <pre class="codeblock">
const TDesC8&amp; des = iServer-&gt;rtpSession.NonRtcpDataL();
</pre> </li> </ul> <p>To stop receiving non-RTP data, call the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97FC8566-E4AD-3881-8669-134798A88779.html"><code class="apiname">DisableNonRtpData()</code></a> method. The RTP stack cancels your registration to the non-RTP data events and discards the non-RTP packets. </p> </div> </div><h3>Related concepts</h3><ul><li><a href="GUID-993629CB-17B4-5E87-8DE1-06A4AC473FDD.html">RTP Overview</a></li><li><a href="GUID-5287A403-1094-5682-A443-A6C2A04A1F23.html">Creating and Managing an RTP session</a></li></ul></div></div><div class="footer"><p class="metadata">Last updated October 8th, 2009</p><hr /><div class="copy">Â© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-765F43E2-39E8-53F5-881F-593F379623CA.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:05:10 GMT -->
</html>