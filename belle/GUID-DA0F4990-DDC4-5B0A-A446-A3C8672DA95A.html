
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-DA0F4990-DDC4-5B0A-A446-A3C8672DA95A.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:07:38 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Removable Media Support" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-F22B8035-CD08-4181-B03A-759E92CA967B" /><meta name="DC.Relation" scheme="URI" content="GUID-00631ED2-1B7F-5FC4-9E81-4B6DF7946631" /><meta name="DC.Relation" scheme="URI" content="GUID-B82FBA26-6B34-4387-A5BC-758B74F37E5F" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-DA0F4990-DDC4-5B0A-A446-A3C8672DA95A" /><meta name="DC.Language" content="en" /><title>Removable Media Support </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-DA0F4990-DDC4-5B0A-A446-A3C8672DA95A">Removable Media Support</h1><div><div><h3 class="section-title">Overview</h3> <p>External drives can already be used to store the calendar database file. This means that all clients may access, modify and create calendar files on removable media in the same way as on non-removable media. </p> <p>A calendar file can be opened on any writable drive. Note that if the file is opened on a removable drive and that drive is removed, the operation leaves with an error. </p> <p>This error can also happen when trying to access file attachments on removed media. </p> <p>When this error occurs, the user should close the CCalSession and re-open it once the media has been replaced. The Calendar indexes must then be restored ('rolled back') to their previous state. </p> <p>It is recommended that when using a calendar file on removable media, the user should watch for when the media is removed or replaced using the RFs::NotifyChange() API. </p> </div> <div><h3 class="section-title">Use cases</h3> <p>If media is removed during an operation a KErrNotReady again occurs, and in the following cases a rollback is effected: </p> <div class="tablenoborder"><a name="GUID-F392B402-1E46-5044-8F70-03C0F822C43B"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-F392B402-1E46-5044-8F70-03C0F822C43B" frame="border" border="1" rules="all"><thead align="left"><tr class="title "><th class="cellrowborder" valign="top" id="d0e440363">Function</th> <th class="cellrowborder" valign="top" id="d0e440366">What has happened if it leaves with KErrNotReady</th> <th class="cellrowborder" valign="top" id="d0e440369">Does a rollback occur?</th> </tr> </thead> <tbody><tr class=""><td class="cellrowborder" valign="top" headers="d0e440363 "><p>  CCalSession::CreateCalFileL(const TDesC&amp;
                  aFileName) </p> </td> <td class="cellrowborder" valign="top" headers="d0e440366 "><p>File not created </p> </td> <td class="cellrowborder" valign="top" headers="d0e440369 "><p>N/A </p> </td> </tr> <tr class="bg "><td class="cellrowborder" valign="top" headers="d0e440363 "><p>  CCalSession::OpenL(const TDesC&amp;
                  aFileName) </p> </td> <td class="cellrowborder" valign="top" headers="d0e440366 "><p>File not created </p> </td> <td class="cellrowborder" valign="top" headers="d0e440369 "><p>N/A </p> </td> </tr> <tr class=""><td class="cellrowborder" valign="top" headers="d0e440363 "><p> CCalSession::DeleteCalFileL(const TDesC&amp;
                  aFileName) </p> </td> <td class="cellrowborder" valign="top" headers="d0e440366 "><p>File not created </p> </td> <td class="cellrowborder" valign="top" headers="d0e440369 "><p>N/A </p> </td> </tr> <tr class="bg "><td class="cellrowborder" valign="top" headers="d0e440363 "><p> CCalEntryView::StoreL(const RPointerArray
                  &lt;CCalEntry&gt;&amp; aCalEntryList, TInt&amp; aNumSuccessfulEntry) </p> </td> <td class="cellrowborder" valign="top" headers="d0e440366 "><p>aNumSuccessfulEntry entries were successfully added before the leave. </p> </td> <td class="cellrowborder" valign="top" headers="d0e440369 "><p>Last store rolled back in RAM after disk write fails. </p> </td> </tr> <tr class=""><td class="cellrowborder" valign="top" headers="d0e440363 "><p> CCalEntryView::UpdateL(const RPointerArray
                  &lt;CCalEntry&gt;&amp; aCalEntryList, TInt&amp; aNumSuccessfulEntry) </p> </td> <td class="cellrowborder" valign="top" headers="d0e440366 "><p>aNumSuccessfulEntry entries were successfully added before the leave. </p> </td> <td class="cellrowborder" valign="top" headers="d0e440369 "><p>Last store rolled back in RAM after disk write fails. </p> </td> </tr> <tr class="bg "><td class="cellrowborder" valign="top" headers="d0e440363 "><p>  CCalEntryView::DeleteL(const CDesC8Array&amp;
                  aUidList) </p> </td> <td class="cellrowborder" valign="top" headers="d0e440366 "><p>Some of the UIDs were not deleted (how many is unknown). </p> </td> <td class="cellrowborder" valign="top" headers="d0e440369 "><p>Last UID delete rolled back in RAM. </p> </td> </tr> <tr class=""><td class="cellrowborder" valign="top" headers="d0e440363 "><p>  CCalEntryView::DeleteL(const CCalEntry&amp;
                  aCalEntry) </p> </td> <td class="cellrowborder" valign="top" headers="d0e440366 "><p>Nothing deleted </p> </td> <td class="cellrowborder" valign="top" headers="d0e440369 "><p>Deleted entries in RAM are rolled back. </p> </td> </tr> <tr class="bg "><td class="cellrowborder" valign="top" headers="d0e440363 "><p> CCalInstanceView::DeleteL(CCalInstance* aInstance,
                  CalCommon::TRecurrenceRange aWhichInstances) </p> </td> <td class="cellrowborder" valign="top" headers="d0e440366 "><p>Nothing deleted </p> </td> <td class="cellrowborder" valign="top" headers="d0e440369 "><p>Deleted entries in RAM are rolled back. </p> </td> </tr> <tr class=""><td class="cellrowborder" valign="top" headers="d0e440363 "><p> CCalCategoryManager::AddCategoryL(const
                  CCalCategory&amp; aCategory) </p> </td> <td class="cellrowborder" valign="top" headers="d0e440366 "><p>Category not added to file </p> </td> <td class="cellrowborder" valign="top" headers="d0e440369 "><p>No rollback in RAM. </p> </td> </tr> <tr class="bg "><td class="cellrowborder" valign="top" headers="d0e440363 "><p> CCalCategoryManager::DeleteCategoryL(const
                  CCalCategory&amp; aCategory, MCalProgressCallBack&amp;
                  aProgressCallBack) </p> </td> <td class="cellrowborder" valign="top" headers="d0e440366 "><p>Category not added to file </p> </td> <td class="cellrowborder" valign="top" headers="d0e440369 "><p>No rollback in RAM. </p> </td> </tr> </tbody> </table></div> </div> </div></div></div><div class="footer"><p class="metadata">Last updated October 8th, 2009</p><hr /><div class="copy">Â© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-DA0F4990-DDC4-5B0A-A446-A3C8672DA95A.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:07:38 GMT -->
</html>