
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-05759C1B-6731-52A1-8EC0-2570E01FC7BC.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:50:01 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="task" /><meta name="DC.Title" content="Dial a Call Tutorial" /><meta name="abstract" content="This tutorial describes how to dial a call with the telephony API for applications." /><meta name="description" content="This tutorial describes how to dial a call with the telephony API for applications." /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-34E7AAF2-EC62-5BF6-B9E7-C7D346BCDF93" /><meta name="DC.Relation" scheme="URI" content="GUID-0F647342-E069-5444-9370-58520375543A" /><meta name="DC.Relation" scheme="URI" content="GUID-7C197DC1-43CA-5146-B81D-36B685A1D0C9" /><meta name="DC.Relation" scheme="URI" content="GUID-844C335C-E8FD-5DF8-8E05-7DB1DF4C3360" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-05759C1B-6731-52A1-8EC0-2570E01FC7BC" /><meta name="DC.Language" content="en" /><title>Dial a Call Tutorial  </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-05759C1B-6731-52A1-8EC0-2570E01FC7BC">Dial a Call Tutorial </h1><div><p>This tutorial describes how to dial a call with the telephony API for applications. </p> <h3>Steps</h3><ol id="GUID-2F1A2A69-B31A-52E1-AC45-2466E9A0F373"><a name="GUID-2F1A2A69-B31A-52E1-AC45-2466E9A0F373"><!-- --></a> <li id="GUID-3813B8DE-531C-5103-AA0D-D5DC352F442D"><a name="GUID-3813B8DE-531C-5103-AA0D-D5DC352F442D"><!-- --></a><p></p>create a new instance of <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><code class="apiname">CTelephony</code></a> </li> <li id="GUID-5168AF6C-BB5B-5A9F-81A4-2BDA74B810BB"><a name="GUID-5168AF6C-BB5B-5A9F-81A4-2BDA74B810BB"><!-- --></a><p></p>dial a call with <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><code class="apiname">CTelephony::DialNewCall()</code></a>   pass the number to dial in a <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><code class="apiname">CTelephony::TTelNumber</code></a>.<code class="codeph">CTelephony::DialNewCall()</code> returns a <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><code class="apiname">CTelephony::TCallId</code></a> that identifies the call. This will be either <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><code class="apiname">CTelephony::EISVCall1</code></a> or <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><code class="apiname">CTelephony::EISVCall2</code></a>. You need this ID to place a call on hold and terminate a call.  </li> <li id="GUID-AB6F0698-70C8-5B1E-84B6-BEF9D8C0CFE9"><a name="GUID-AB6F0698-70C8-5B1E-84B6-BEF9D8C0CFE9"><!-- --></a><p></p>pass <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><code class="apiname">CTelephony::DialNewCall()</code></a> a <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><code class="apiname">CTelephony::TCallParamsV1</code></a> object to specify an option for your identity. You have three options:  <ol type="i" id="GUID-382BCFFE-5EF4-5EB7-B07E-FD6C5E049CB1"><a name="GUID-382BCFFE-5EF4-5EB7-B07E-FD6C5E049CB1"><!-- --></a><li id="GUID-40C52D42-0FBA-57AD-BF6C-75BA26ECD933"><a name="GUID-40C52D42-0FBA-57AD-BF6C-75BA26ECD933"><!-- --></a><p></p>hide your identity  </li> <li id="GUID-C9A2E428-A7C1-5654-AFC2-358C91D4BA3E"><a name="GUID-C9A2E428-A7C1-5654-AFC2-358C91D4BA3E"><!-- --></a><p></p>display your identity  </li> <li id="GUID-08814A8F-806A-56F2-9A4D-7FA4B66151BA"><a name="GUID-08814A8F-806A-56F2-9A4D-7FA4B66151BA"><!-- --></a><p></p>use default setting  </li> </ol> </li> <li id="GUID-082D70CE-00A9-56E0-880E-9E634935A3F7"><a name="GUID-082D70CE-00A9-56E0-880E-9E634935A3F7"><!-- --></a><p></p>pass the enumeration <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><code class="apiname">CTelephony::EDialNewCallCancel</code></a> to cancel the dial request.  </li> </ol> <div id="GUID-32181D81-A35C-5EB9-9FBE-7601A63B7378"><h3 class="section-title">Dial a call example</h3> <p>This example dials the number <code class="codeph">123456789</code> and allows the remote party to see the phone's number: </p> <pre class="codeblock">#include &lt;e32base.h&gt;
#include &lt;Etel3rdParty.h&gt;

_LIT(KTheNumber, "123456789");

class CClientApp : public CActive
    { 

private:
    CTelephony* iTelephony;
    CTelephony::TCallId iCallId;

public:
    CClientApp(CTelephony* aTelephony);
    void SomeFunction();

private:
    /*
       These are the pure virtual methods from CActive that  
       MUST be implemented by all active objects
       */
    void RunL();
    void DoCancel();
   };

CClientApp::CClientApp(CTelephony* aTelephony)
    : CActive(EPriorityStandard),
      iTelephony(aTelephony)
    {
    //default constructor
    }

void CClientApp::SomeFunction()
    {
    CTelephony::TTelNumber telNumber(KTheNumber);

    CTelephony::TCallParamsV1 callParams;
    callParams.iIdRestrict = CTelephony::ESendMyId;
    CTelephony::TCallParamsV1Pckg callParamsPckg(callParams);

    iTelephony-&gt;DialNewCall(iStatus, callParamsPckg, telNumber, iCallId);
    SetActive();
    }

void CClientApp::RunL()
    {
    if(iStatus==KErrNone)
       {} // The call has been dialled successfully;
          // iCallId contains the call's ID, needed when controlling the call.
    }

void CClientApp::DoCancel()
    {
    iTelephony-&gt;CancelAsync(CTelephony::EDialNewCallCancel);
    }
</pre> </div> <div id="GUID-8A1C0CE1-31F8-5B78-9FDC-D2BF46B2924F"><h3 class="section-title">Next actions</h3><p>This describes how to dial a second call while another is in progress. </p> <ol id="GUID-4A03E748-F7D6-56AF-89C6-51D2D440994D"><li id="GUID-A9B4B84F-10B9-5709-AA88-FFACCC93815E"><a name="GUID-A9B4B84F-10B9-5709-AA88-FFACCC93815E"><!-- --></a><p>Put the first call on hold. </p> <p>For more information. See <a href="GUID-1907CF0B-2F4B-50F6-B676-7B7059B7FF74.html">Call Hold Tutorial</a>. </p> <p>If the first call was not dialled or answered by you then you cannot control it, and so you cannot put it on hold. If it is not on hold already then you will have to wait until the it is put on hold. The <a href="GUID-0DA6722B-0700-5612-884A-F3B7733E5252.html">Voice line status</a> changes to <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><code class="apiname">CTelephony::EStatusHold</code></a>. </p> </li> <li id="GUID-5613B91D-7C01-54D1-9F78-ADDE9455FA71"><a name="GUID-5613B91D-7C01-54D1-9F78-ADDE9455FA71"><!-- --></a><p>Dial the second call. </p> <p>This is the same as dialling a call in the <a href="#GUID-05759C1B-6731-52A1-8EC0-2570E01FC7BC">Dial a Call Tutorial</a>. <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><code class="apiname">CTelephony::AnswerIncomingCall()</code></a> will return a different call ID to the first call. </p> <p>Remember that to dial a call is an asynchronous operation. </p> </li> <li id="GUID-CC8C65D1-1C89-591B-B540-376C388CD4AA"><a name="GUID-CC8C65D1-1C89-591B-B540-376C388CD4AA"><!-- --></a><p>If the operation fails, remember to resume the first call, see <a href="GUID-FFBD95C6-0B12-5FD7-BA69-89BBFB97F0A1.html">Call Resume Tutorial</a>. </p> </li> </ol> <p>As a result, the first call is on hold, and the phone user is connected to the second caller. </p> </div> </div></div></div><div class="footer"><p class="metadata">Last updated January 5th, 2010</p><hr /><div class="copy">Â© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-05759C1B-6731-52A1-8EC0-2570E01FC7BC.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:50:01 GMT -->
</html>