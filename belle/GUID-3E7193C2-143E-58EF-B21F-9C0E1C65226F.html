
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-3E7193C2-143E-58EF-B21F-9C0E1C65226F.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:09:22 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Text Views Overview" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-1DCA2F4D-ABE6-52A0-AC4E-5AAC1AB5909D" /><meta name="DC.Relation" scheme="URI" content="GUID-4F901F56-7F0E-4869-85CA-6109ED0AF5B7" /><meta name="DC.Relation" scheme="URI" content="GUID-4CBFA2E3-0EFC-5E10-A960-57A8FF9A6025" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-3E7193C2-143E-58EF-B21F-9C0E1C65226F" /><meta name="DC.Language" content="en" /><title>Text Views Overview </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-3E7193C2-143E-58EF-B21F-9C0E1C65226F">Text Views Overview</h1><div><div><h3 class="section-title">Purpose</h3> <p>Provides access to the layout information needed to format text for display. </p> <p>The text itself and its formatting are accessed separately, using the Text and Text Attributes API. Text views obtain text and formatting information via an abstract interface class (MLayDoc).</p> </div> <div><h3 class="section-title">Architectural relationships</h3> <p>Uses the Text and Text Attributes API to store the text content and formatting attributes.</p> <p>The Text Views API is used by the Uikon Core API for editable text windows. Higher-level objects such as editable text windows typically own an editable text object to hold the rich text and attributes, and a Text Views object to store the layout and draw the text.</p> <p>The Graphics API provides a graphics device to draw to, for instance the screen or a printer, and a graphics context (contains the draw functions and the settings they use e.g. pen size and colour).</p> </div> <div><h3 class="section-title">Description</h3> <p>The API has the following key concepts:</p> <p><strong>View and layout</strong> </p> <p>The two principal classes in the Text Views API are <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-CF377A98-F11F-380F-AD10-7F3E261D4421.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-CF377A98-F11F-380F-AD10-7F3E261D4421.html"><code class="apiname">CTextView</code></a> and <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-FEE7C848-2E93-3848-A3DA-7EAA533615AF.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-FEE7C848-2E93-3848-A3DA-7EAA533615AF.html"><code class="apiname">CTextLayout</code></a>.</p> <p>Most of the Text Views API is provided by the <code class="codeph">CTextView</code> class. It allows clients to do horizontal and vertical scrolling, set a text selection, change the cursor position and appearance and to set margin widths. It also does intelligent scrolling using block transfer (blit) and does automatic redrawing if necessary. It is optimised to reformat the minimum amount necessary. It also does conversion between document positions and x,y coordinates.</p> <p><a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-FEE7C848-2E93-3848-A3DA-7EAA533615AF.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-FEE7C848-2E93-3848-A3DA-7EAA533615AF.html"><code class="apiname">CTextLayout</code></a> is a lower level class than <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-CF377A98-F11F-380F-AD10-7F3E261D4421.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-CF377A98-F11F-380F-AD10-7F3E261D4421.html"><code class="apiname">CTextView</code></a>. Many of its functions only exist for the convenience of other classes in the API. It is used by <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-CF377A98-F11F-380F-AD10-7F3E261D4421.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-CF377A98-F11F-380F-AD10-7F3E261D4421.html"><code class="apiname">CTextView</code></a> to calculate the layout information. It should be used by clients to set layout attributes, including the wrap width, the height of the visible portion of the document (the "band"), whether formatting should be set to the band only, or to the whole document, and it sets the text object which is the source of the text and formatting information.</p> <p><strong>x-y coordinates</strong> </p> <p>As in most bitmapped graphics systems, x coordinates increase rightwards and y coordinates increase downwards.</p> <p>The Text Views API uses two slightly different coordinate systems. In the system used by the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-FEE7C848-2E93-3848-A3DA-7EAA533615AF.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-FEE7C848-2E93-3848-A3DA-7EAA533615AF.html"><code class="apiname">CTextLayout</code></a> class (see for instance <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-FEE7C848-2E93-3848-A3DA-7EAA533615AF.html#GUID-9F9DE7DE-FECD-34BF-94EE-296841514154"><code class="apiname">CTextLayout::DocPosToXyPosL()</code></a>), the origin for x-y pixel coordinates is the top left hand corner of the visible area of the body text, to the right of any margins which may have been set, so that the left edge of a non-indented line is at x coordinate 0. These are called layout coordinates.</p> <p>In the system used by the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-CF377A98-F11F-380F-AD10-7F3E261D4421.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-CF377A98-F11F-380F-AD10-7F3E261D4421.html"><code class="apiname">CTextView</code></a> class, the origin for x-y pixel coordinates is at the top left corner of the view window, to the left of any margins which may have been set. These are called window coordinates.</p> <p><strong>Scrolling polarity</strong> </p> <p>When scrolling vertically, the Text Views API uses the convention that positive numbers of pixels, lines, paragraphs, pages, etc., mean that the text moves down, and vice versa. When scrolling horizontally, positive numbers of pixels mean that the text moves left and vice versa.</p> <p><strong>Band formatting</strong> </p> <p>The Text Views API support two format states. In one, the visible portion of a document only is formatted, and in the other, the entire document is formatted. The visible portion of the document is referred to as the band. Setting the formatting to the band may be useful to save memory when displaying large documents. The height of the band also controls the amount of scroll caused by a page up or down.</p> <p><strong>Redrawing and scrolling</strong> </p> <p>If you need automatic scrolling and redrawing you should use <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-CF377A98-F11F-380F-AD10-7F3E261D4421.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-CF377A98-F11F-380F-AD10-7F3E261D4421.html"><code class="apiname">CTextView</code></a> rather than <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-FEE7C848-2E93-3848-A3DA-7EAA533615AF.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-FEE7C848-2E93-3848-A3DA-7EAA533615AF.html"><code class="apiname">CTextLayout</code></a> (see for instance <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-CF377A98-F11F-380F-AD10-7F3E261D4421.html#GUID-903D1087-42CB-32EB-8379-7B019936AD16"><code class="apiname">CTextView::HandleGlobalChangeL()</code></a>). When using the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-FEE7C848-2E93-3848-A3DA-7EAA533615AF.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-FEE7C848-2E93-3848-A3DA-7EAA533615AF.html"><code class="apiname">CTextLayout</code></a> class, redrawing and scrolling must be done by the user.</p> </div> <div><h3 class="section-title">See also</h3> <p><a href="GUID-0AA6186C-DD10-5811-940F-D26A7D34C66F.html">Text and Text Attributes Overview</a> </p> <p><a href="GUID-0AB9B221-38AE-576E-AC5A-C4C106E3D93B.html">Graphics Overview</a> </p> </div> </div></div></div><div class="footer"><p class="metadata">Last updated October 9th, 2009</p><hr /><div class="copy">© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-3E7193C2-143E-58EF-B21F-9C0E1C65226F.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:09:22 GMT -->
</html>