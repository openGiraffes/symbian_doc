
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:07:38 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="How to Associate Data with an Alarm" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-F22B8035-CD08-4181-B03A-759E92CA967B" /><meta name="DC.Relation" scheme="URI" content="GUID-00631ED2-1B7F-5FC4-9E81-4B6DF7946631" /><meta name="DC.Relation" scheme="URI" content="GUID-A60C4549-9FAA-496A-B743-D395A461B61F" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20" /><meta name="DC.Language" content="en" /><title>How to Associate Data with an Alarm </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20">How to Associate Data with an Alarm</h1><div><p>As part of flexible alarm functionality users may wish to associate data with an alarm. For example, when an alarm expires the Alarm Control can display an image, play a sound/video file or open a URL. The class CCalContent holds in memory 8-bit data of any type, or a link to 8-bit data such as a URL. </p> <p>To set up data associated with an alarm: </p> <ol id="GUID-3E86B9B9-95CF-5112-B5DA-5F8F201F7FC6"><li id="GUID-C5771F4B-BA6C-5BE8-A87C-2E1210EB537D"><a name="GUID-C5771F4B-BA6C-5BE8-A87C-2E1210EB537D"><!-- --></a><p>Create a calendar entry such as an appointment or reminder: CCalEntry::NewL(). </p> </li> <li id="GUID-0A33163C-1C39-5F6E-B0EB-3DE7B4E3DE08"><a name="GUID-0A33163C-1C39-5F6E-B0EB-3DE7B4E3DE08"><!-- --></a><p>Use CCalAlarm::NewL() to create a calendar alarm containing expiry time details. It is optional to set user-defined sound when adding extra data. The following combinations are: </p> <ul><li id="GUID-24FF19EC-E103-581F-A575-E15DFCBF926B"><a name="GUID-24FF19EC-E103-581F-A575-E15DFCBF926B"><!-- --></a><p>No user-defined sound and CCalContent </p> </li> <li id="GUID-A739BB2C-6094-5AAC-B350-FAD97E4A5474"><a name="GUID-A739BB2C-6094-5AAC-B350-FAD97E4A5474"><!-- --></a><p>User-defined sound and CCalContent </p> </li> <li id="GUID-11C78A05-98C6-5EF8-99B9-75024005917C"><a name="GUID-11C78A05-98C6-5EF8-99B9-75024005917C"><!-- --></a><p>User-defined sound and no CCalContent </p> </li> </ul> </li> <li id="GUID-6E5B9A2C-E4C1-50E6-83E3-4091416FF22B"><a name="GUID-6E5B9A2C-E4C1-50E6-83E3-4091416FF22B"><!-- --></a><p>Create the arbitrary data (CCalContent) to be played or displayed when the alarm expires. Two kinds of data may be added to an alarm. They are a URL and raw data (also known as inline data). Because it is recommended to use the smallest possible amounts of data to add to an alarm it is usually best to add files as URLs. Thus, an image file can be added simply as the URL of its address. </p> <p>The following code sample shows how to add a URL to an alarm: </p> <pre class="codeblock"> CCalContent* content = CCalContent::NewL();
 CleanupStack::PushL(content);
 . . .
 HBufC8* urlContentBuf = _L8("rtsp://radio.network.co.uk").AllocLC()
 HBufC8* mimetype = KMimeType("http").AllocLC();
    content-&gt;SetContentL(urlContentBuf, urlTypeBuf, CCalContent::EDispositionUrl);
    CleanupStack::Pop(urlContentBuf); // SetContentL takes ownership
    CleanupStack::Pop(urlTypeBuf);    //
    alarm-&gt;SetAlarmAction(content); //takes ownership
    CleanupStack::Pop(content);
    . . .</pre> </li> <li id="GUID-93ACF59E-61EB-5306-9444-00FC3EBF1769"><a name="GUID-93ACF59E-61EB-5306-9444-00FC3EBF1769"><!-- --></a><p>Add the alarm to the entry using: </p> <pre class="codeblock">entry-&gt;SetAlarmL(alarm);</pre> <p>The entry does not take ownership of the alarm. </p> </li> <li id="GUID-DB8C4145-5687-5281-A942-5F9012A748DF"><a name="GUID-DB8C4145-5687-5281-A942-5F9012A748DF"><!-- --></a><p>Store the entry in the calendar database using CCalEntryView. </p> </li> </ol> <div><h3 class="section-title">Data Retrieval</h3> <p>To retrieve data from an expired alarm the associated Calendar entry must be found, as well as the Calendar entry's alarm and data. </p> <p>The last entry ID and the recurrence ID can be used to find the unique entry in the calendar databse. To get the alarm data once the proper entry has been found CCalEntry::Alarm() can be used. This returns a CCalAlarm object from which the CCalContent can be retrieved using the method CCalAlarm::AlarmAction(). This returns a CCalContent object. </p> </div> </div></div></div><div class="footer"><p class="metadata">Last updated October 8th, 2009</p><hr /><div class="copy">Â© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:07:38 GMT -->
</html>