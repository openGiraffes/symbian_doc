
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-D32E52C9-F05C-5F1E-8B49-243D555C353C.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:56:21 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Known Issues" /><meta name="DC.Relation" scheme="URI" content="GUID-D6BEAF0D-844D-51F4-8DB7-FB1D60E17FE3" /><meta name="DC.Relation" scheme="URI" content="GUID-F7FEB759-E64D-5B6D-9017-C5E982E4FC16" /><meta name="DC.Relation" scheme="URI" content="GUID-2CCD1748-9EDE-5383-9941-A3051E06F3E2" /><meta name="DC.Relation" scheme="URI" content="GUID-CDE8CD85-8467-5B36-A0AC-41D1D98151CA" /><meta name="DC.Relation" scheme="URI" content="GUID-E331B72B-84AF-558A-9B8F-73E5E50B58C7" /><meta name="DC.Relation" scheme="URI" content="GUID-5B3F5296-D6D0-5D25-8362-141DF5927E52" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657" /><meta name="DC.Relation" scheme="URI" content="GUID-E2DE2C6F-E071-5E88-96F1-D71DDED84609" /><meta name="DC.Relation" scheme="URI" content="GUID-2C5B58F2-6BD2-5C2B-8E1B-CFB3D7EB6ED9" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-D32E52C9-F05C-5F1E-8B49-243D555C353C" /><meta name="DC.Language" content="en" /><title>Known
Issues </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-D32E52C9-F05C-5F1E-8B49-243D555C353C">Known
Issues</h1><div>
<p>This topic describes the known issues associated with developing Standard
C++ applications or libraries on the Symbian platform. </p>
<p>The following functionalities of Standard C++ have certain limitations
on the Symbian platform: </p>
<ul>
<li id="GUID-8A496C80-74F0-559D-84B3-34EF8BA15A39"><a name="GUID-8A496C80-74F0-559D-84B3-34EF8BA15A39"><!-- --></a><p> <strong>dynamic_cast:</strong> The <code class="codeph">dynamic_cast</code> operator
is not fully supported on the Symbian platform. </p> </li>
<li id="GUID-012F6B22-4A66-5B54-B981-01A252F10147"><a name="GUID-012F6B22-4A66-5B54-B981-01A252F10147"><!-- --></a><p> <strong>unexpected_handler:</strong> The
CodeWarrior runtime does not support the invocation of <code class="codeph">unexpected_handler</code> upon
an exception specification violation. </p> </li>
<li id="GUID-9FF61C6B-21D4-521D-A1FF-086D28FDAADF"><a name="GUID-9FF61C6B-21D4-521D-A1FF-086D28FDAADF"><!-- --></a><p> <strong>IOStreams:</strong> The <code class="codeph">cin</code> and <code class="codeph">cout</code> objects
are instances of <code class="codeph">istream</code> and <code class="codeph">ostream</code> classes
and are exported by the STL library. As the emulator tool-chain does not support
exporting of data, these are defined as function calls on the emulator. </p> <p>These
functions return references to the <code class="codeph">cin</code> and <code class="codeph">cout</code> objects
that the STL library maintains. Since they are defined as functions, an attempt
to import namespace by saying using <code class="codeph">std::cout</code> may fail to
compile. To resolve this issue, include the entire <code class="codeph">std</code> namespace
in such scenarios. </p> </li>
</ul>
<div id="GUID-EB8B9B0E-0971-4147-B8FB-94F2D602B61F"><h3 class="section-title">ARM RVCT compiler
issues with STLport</h3><p>Due to a defect in the ARM RVCT compiler versions
2.2, 3.1 and 4.0, building STLport v5 or STLport-based applications, creates
some invalid export entries in DEF files. To workaround this issue, perform
the following steps:</p><ol>
<li id="GUID-6BD383B8-C6C8-4C08-A741-2D90C21D274F"><a name="GUID-6BD383B8-C6C8-4C08-A741-2D90C21D274F"><!-- --></a><p>Use the GCCE compiler
to generate the DEF file, if it is not available.</p></li>
<li id="GUID-EA6CD191-69CA-4AA5-80FB-704F52F583F6"><a name="GUID-EA6CD191-69CA-4AA5-80FB-704F52F583F6"><!-- --></a><p>Ignore the warnings
generated by the ARM RVCT compiler.</p><div class="note"><p><strong class="note_title">Note: </strong>When you ignore the warnings,
do not freeze the invalid export entries in the DEF file using the ARM RVCT
compiler.</p></div></li>
</ol></div>
<div id="GUID-6008A836-2454-49E5-BE25-29EB9074CF88"><h3 class="section-title">Using the id
member variable of facet classes</h3> <p>The Symbian platform does not
support exporting static data. Hence, the <code class="codeph">id</code> member variable
of facet classes (<code class="codeph">static locale::id           id</code>) cannot
be used directly on the Symbian platform. When you use these classes you must
use the <code class="codeph">GetFacetLocaleId()</code> function to access the data member <code class="codeph">id</code> instead. </p> <p> <strong>Examples</strong> </p> <ol id="GUID-96B64FD3-382E-56E1-BAD6-90DFBDA0969F">
<li id="GUID-20337C94-A194-5BD7-9974-490C1EBB543F"><a name="GUID-20337C94-A194-5BD7-9974-490C1EBB543F"><!-- --></a><p> <strong>Using the id member
of standard facets:</strong> For example, you can change <code class="codeph">locale::id Id1
=                 numpunct&lt;char&gt;::id;</code> to <code class="codeph">locale::id Id1
=                 numpunct&lt;char&gt;::GetFacetLocaleId();</code>. </p> </li>
<li id="GUID-F91F6741-FA71-5644-BE02-717E5872B293"><a name="GUID-F91F6741-FA71-5644-BE02-717E5872B293"><!-- --></a><p> <strong>Deriving a class
from a standard facet:</strong> Declare a <code class="codeph">GetFacetLocaleId()</code> static
method, in addition to the member variable ID, when you define a class that
is inherited from the <code class="codeph">locale::facet</code> class, as illustrated
in the following code: </p> <pre class="codeblock">class myfacet : public locale::facet
    {
    public:
    static locale::id id;
    static locale::id&amp; GetFacetLocaleId() 
        {
        return id;
        } 
    };</pre> </li>
<li id="GUID-600D7CAC-C9C5-5722-987A-66FE6E2D7D01"><a name="GUID-600D7CAC-C9C5-5722-987A-66FE6E2D7D01"><!-- --></a><p> <strong>Using a class that
is part of a DLL:</strong> Ensure that you also handle the Writable Static Data
(WSD) issues for emulator (WINSCW) builds along with the issues described
in examples <strong>1</strong> and <strong>2</strong> as illustrated in the following code: </p> <pre class="codeblock">//myfacet.h
class myfacet : public locale::facet
    {
    public:
#ifndef __WINSCW__  
    static locale::id id;
#endif
    static locale::id&amp; GetFacetLocaleId();
    };
</pre> <pre class="codeblock">//myfacet.cpp
std::locale::id&amp; myfacet::GetFacetLocaleId()
    {
#ifndef __WINSCW__  
    return id;
#else
    // get the WSD struct – uses EWSD solution
    // get_wsd_struct() is a function defined by
                // the user to get a pointer to his WSD struct.
    return get_wsd_struct()-&gt;myfacet_id;
#endif
    }</pre> </li>
</ol> </div>
<div id="GUID-35767460-AE19-47D2-B24F-0CFEC8B999EF"><h3 class="section-title">Using memory
leak detection macros</h3> <p>On an emulator, there are some dynamic memory
allocations made for supporting WSD, when the Standard C++ library is initialised.
In this scenario, if you add a memory leak detection macro, such as <code class="codeph">__UHEAP_MARK</code> and <code class="codeph">__UHEAP_MARKEND</code>,
then you get a panic at <code class="codeph">__UHEAP_MARKEND</code>. </p> <p>To avoid
this panic, you must call the <code class="codeph">CleanupWSD()</code> function, provided
only for use on emulator. For more information about how to achieve this,
see the following example code: </p> <pre class="codeblock">#include &lt;iostream&gt;
using namespace std;
#ifdef __WINSCW__
#include &lt;libstdcppwsd.h&gt;
#endif
int main()
    {
    __UHEAP_MARK;
    cout &lt;&lt; "Hello, World!" &lt;&lt; endl;
#ifdef __WINSCW__
    CleanupWSD();// Cleanup all WSD related allocations
#endif
    __UHEAP_MARKEND;
    return 0;
    }</pre> </div>
</div><h3>Related concepts</h3><ul><li><a href="GUID-D6BEAF0D-844D-51F4-8DB7-FB1D60E17FE3.html">Copyright
Acknowledgments for Standard C++                 (STLport)</a></li><li><a href="GUID-F7FEB759-E64D-5B6D-9017-C5E982E4FC16.html">Standard
C++ Library Overview</a></li><li><a href="GUID-2CCD1748-9EDE-5383-9941-A3051E06F3E2.html">Standard
C++ Support on the Symbian platform</a></li><li><a href="GUID-CDE8CD85-8467-5B36-A0AC-41D1D98151CA.html">Developing
Applications or Libraries                 Using Standard C++</a></li><li><a href="GUID-E331B72B-84AF-558A-9B8F-73E5E50B58C7.html">Building
a Standard C++ Application or                 Library</a></li><li><a href="GUID-5B3F5296-D6D0-5D25-8362-141DF5927E52.html">Troubleshooting</a></li></ul></div></div><div class="footer"><p class="metadata">Last updated January 28th, 2010</p><hr /><div class="copy">© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-D32E52C9-F05C-5F1E-8B49-243D555C353C.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:56:21 GMT -->
</html>