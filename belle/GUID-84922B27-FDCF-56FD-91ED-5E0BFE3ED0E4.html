
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:56:01 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="task" /><meta name="DC.Title" content="Compressing and Decompressing File - Zip Format" /><meta name="abstract" content="The Zip Compression Library, EZLib provides stream and file compression and decompression functionality for the Symbian platforms. The files can be compressed to two formats namely zip and gzip. Compression and Decompression are performed iteratively, till the completion of required task." /><meta name="description" content="The Zip Compression Library, EZLib provides stream and file compression and decompression functionality for the Symbian platforms. The files can be compressed to two formats namely zip and gzip. Compression and Decompression are performed iteratively, till the completion of required task." /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657" /><meta name="DC.Relation" scheme="URI" content="GUID-9208E03A-CC7A-57A9-84BD-778B99040842" /><meta name="DC.Relation" scheme="URI" content="GUID-5D14ADEC-ED83-5FA4-B551-C57CAE4F79BE" /><meta name="DC.Relation" scheme="URI" content="GUID-7AAAC6EA-784D-51E6-AD6B-521C9F5C4DBD" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4" /><meta name="DC.Language" content="en" /><title>Compressing
and Decompressing File - Zip Format  </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4">Compressing
and Decompressing File - Zip Format </h1><div><p>The Zip Compression Library, EZLib provides stream and file compression
and decompression functionality for the Symbian platforms. The files can be
compressed to two formats namely zip and gzip. Compression and Decompression
are performed iteratively, till the completion of required task. </p>
<div id="GUID-BE620F4A-6D23-5832-8C2A-4B9C75F6BF12"><h3 class="section-title">Context</h3></div>
<h3>Steps</h3><ol id="GUID-0DE92899-962B-5E18-9378-EB7B6C78E7BD"><a name="GUID-0DE92899-962B-5E18-9378-EB7B6C78E7BD"><!-- --></a>
<li id="GUID-414B561B-4BCA-5D6F-A744-3944D0EBDBE2"><a name="GUID-414B561B-4BCA-5D6F-A744-3944D0EBDBE2"><!-- --></a><p>Pass the input and
output files as parameters to construct an instance of <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html"><code class="apiname">CEZFileBufferManager</code></a>.
This returns a pointer to <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html"><code class="apiname">CEZFileBufferManager</code></a> (input buffer). </p>
<a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html"><code class="apiname">CEZFileBufferManager</code></a> provides functions that accept
and converts the data into buffers for <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-B90BA6D6-72A2-3EB8-B8EF-CD5408107A9E.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-B90BA6D6-72A2-3EB8-B8EF-CD5408107A9E.html"><code class="apiname">MEZBufferManager</code></a> class
to manage it internally. 
</li>
<li id="GUID-BA8CC59E-FD6B-5ACA-A516-EBFFB5316D30"><a name="GUID-BA8CC59E-FD6B-5ACA-A516-EBFFB5316D30"><!-- --></a><p></p>
Pass the input buffer and other compression parameters to the object
of the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-AEF8BCC8-6B24-3D59-AD3A-17B5203B3AA5.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-AEF8BCC8-6B24-3D59-AD3A-17B5203B3AA5.html"><code class="apiname">CEZCompressor</code></a> class. 
</li>
<li id="GUID-BD4E38F1-78A7-5ED3-83D7-6C56EE7122DD"><a name="GUID-BD4E38F1-78A7-5ED3-83D7-6C56EE7122DD"><!-- --></a><p></p>
Use <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-AEF8BCC8-6B24-3D59-AD3A-17B5203B3AA5.html#GUID-03E4E3A2-3830-3209-9D7B-A2238B5AF219"><code class="apiname">CEZCompressor::DeflateL()</code></a> to compress the file. 
</li>
</ol>
<div><h3 class="section-title">Example</h3><p>The following code demonstrates a compression procedure. </p><pre class="codeblock">/*
 * Compresses the file into a zip file using the EZlib component. 
 * It is assumed that the input and output file names are contained in a 
 * provided ini file.
 */


void CEZlibEZipTests::DoEZlibDeflateL()
    {
RFs iFs;
 iFS.connect();
    


    //Open input file
_LIT(KInputFileLocation, "c:\\private\\E80000B7\\zip\\input\\input.doc");
TFileName inputFile(KInputFileLocation);
    RFile input;
    err = input.Open(iFs, inputFile, EFileStream | EFileRead | EFileShareExclusive);
    if(err != KErrNone)
        {
        INFO_PRINTF1(KOpenFileError);
        User::Leave(err);
        }   
    
    

    //open output file

_LIT(KOutputFileLocation, "c:\\private\\E80000B7\\zip\\input\\output.zip");
TFileName outputFile(KOutputFileLocation);
    RFile output;
    err = output.Replace(iFs, outputFile, EFileStream | EFileWrite | EFileShareExclusive);
    if(err != KErrNone)
        {
        INFO_PRINTF1(KCreateFileError);
        User::Leave(err);
        }   
        


    CEZFileBufferManager *bufferManager = CEZFileBufferManager::NewLC(input, output);   
    CEZCompressor *compressor = CEZCompressor::NewLC(*bufferManager, aLevel, aWindowBits, aMemLevel, aStrategy);

    while(compressor-&gt;DeflateL())
        {       
        }   
     output.Close(); 
input.Close();
 iFS.Close();
    

    
    }
</pre></div>
<div><h3 class="section-title">Next actions</h3><p>The decompression of a <code>.zip</code> file can be achieved
through the following the steps: </p> <ol id="GUID-468D2F53-B015-5DAB-96A7-08DBE8101773">
<li id="GUID-23A8B3BC-0C23-503A-969A-EAD80BBDA3ED"><a name="GUID-23A8B3BC-0C23-503A-969A-EAD80BBDA3ED"><!-- --></a><p>Pass the
input and output files as parameters to construct an instance of <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html"><code class="apiname">CEZFileBufferManager</code></a>.
This returns a pointer to <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html"><code class="apiname">CEZFileBufferManager</code></a> ( buffer). </p> </li>
<li id="GUID-60335F30-42FF-57A1-8457-ADFAE6C34E76"><a name="GUID-60335F30-42FF-57A1-8457-ADFAE6C34E76"><!-- --></a><p>Pass the buffer to the
object of the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-BC3CEC02-B747-38FB-8B35-E7390DB06E35.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-BC3CEC02-B747-38FB-8B35-E7390DB06E35.html"><code class="apiname">CEZDecompressor</code></a> class. </p> </li>
<li id="GUID-969C35D8-AAB8-5875-9DA9-B80D0F402EB1"><a name="GUID-969C35D8-AAB8-5875-9DA9-B80D0F402EB1"><!-- --></a><p> <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-BC3CEC02-B747-38FB-8B35-E7390DB06E35.html#GUID-0AC99B66-412B-3CCF-84DA-D7BC0F0D32B2"><code class="apiname">CEZDecompressor::InflateL()</code></a> is
called repeatedly until the decompression is complete. </p> </li>
</ol> <p>The following code demonstrates the decompression procedure. </p> <pre class="codeblock">/* Decompresses the file contained in a Zip file using the EZlib component. 
 * It is assumed that the input and output file names are contained in a 
 * provided ini file.
 */

void CEZlibEZipTests::DoEZlibInflateL()
    {
RFs iFs;
 iFS.connect();

//Open input file
_LIT(KInputFileLocation, "c:\\private\\E80000B7\\zip\\input\\output.zip");
TFileName inputFile(KInputFileLocation);
    RFile input;
    err = input.Open(iRfs, inputFile, EFileStream | EFileRead | EFileShareExclusive);
    if(err != KErrNone)
        {
        INFO_PRINTF1(KOpenFileError);
        User::Leave(err);
        }    
    
    

    //open output file

_LIT(KOutputFile, "c:\\private\\E80000B7\\zip\\input\\input.doc");
TFileName outputFile(KOutputFile);
    RFile output;
    err = output.Replace(iFs, outputFile, EFileStream | EFileWrite | EFileShareExclusive);
    if(err != KErrNone)
        {
        INFO_PRINTF1(KCreateFileError);
        User::Leave(err);
        }    
        


CEZFileBufferManager *bufferManager = CEZFileBufferManager::NewLC(input, Output);    
CEZDecompressor *decompressor = CEZDecompressor::NewLC(*bufferManager, aWindowBits);


    while(decompressor-&gt;InflateL())
        {        
        }    
output.Close();
        input.Close();
    ifs.Close();

    }</pre> </div>
</div></div></div><div class="footer"><p class="metadata">Last updated October 26th, 2009</p><hr /><div class="copy">Â© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:56:01 GMT -->
</html>