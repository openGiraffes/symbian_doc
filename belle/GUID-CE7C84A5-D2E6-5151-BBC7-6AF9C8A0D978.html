
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-CE7C84A5-D2E6-5151-BBC7-6AF9C8A0D978.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:51:06 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Address string tokenizer overview" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-94005A46-B4C6-4A30-A8E8-1B9C2D583D50" /><meta name="DC.Relation" scheme="URI" content="GUID-E079315A-E5B6-4D33-B7E3-88697A3F11A4" /><meta name="DC.Relation" scheme="URI" content="GUID-61B965D9-B85E-5F40-8D56-1C0FA77D2492" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-CE7C84A5-D2E6-5151-BBC7-6AF9C8A0D978" /><meta name="DC.Language" content="en" /><title>Address
string tokenizer overview </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-CE7C84A5-D2E6-5151-BBC7-6AF9C8A0D978">Address
string tokenizer overview</h1><div>
<div id="GUID-3380A468-D7C1-478B-81F7-C7B25CA2AF87"><h3 class="section-title">Purpose</h3> <p>The
Address String Tokenizer offers methods for parsing phone numbers, E-mail
addresses, URL and URI addresses from given text. It provides an interface
for applications that, for example, want to create/use their own GUI for displaying
found items. </p> </div>
<div id="GUID-0A0412D0-A818-42C3-8288-D857FF3FB9AC"><h3 class="section-title">Architectural
Relationships</h3> <p>All functionality is implemented in the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D35F2DD5-09A3-366C-8384-46FEB6B7DB18.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D35F2DD5-09A3-366C-8384-46FEB6B7DB18.html"><code class="apiname">CTulAddressStringTokenizer</code></a> class.
The interface can be accessed through the <code class="codeph">tuladdressstringtokenizer.h </code> file.
The binaries are linked to the <code class="codeph">etul.lib</code> (Text Utilities -
part of Egul component) library. </p> <div class="figure" id="GUID-831D95A9-EDD6-5351-83CD-F9246B88E821"><img src="GUID-2BF99BD2-5DB5-5DF6-8F82-22DD2E818584_d0e92105_href.png" /><p class="figure-title"><strong>Figure: </strong>              Subsystem dependencies            </p></div> </div>
<div id="GUID-B712EDB6-0AAD-4E3F-9694-5EABECD3AA1D"><h3 class="section-title">Description</h3> <p><strong>Usage</strong> </p> <p>In
order to use the Address String Tokenizer, the user has to create an instance
of <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D35F2DD5-09A3-366C-8384-46FEB6B7DB18.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D35F2DD5-09A3-366C-8384-46FEB6B7DB18.html"><code class="apiname">CTulAddressStringTokenizer</code></a> by
using the factory method <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D35F2DD5-09A3-366C-8384-46FEB6B7DB18.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D35F2DD5-09A3-366C-8384-46FEB6B7DB18.html"><code class="apiname">CTulAddressStringTokenizer::NewL()</code></a>. </p> <p>For
example: </p> <pre class="codeblock">CTulAddressStringTokenizer* addressStringTokenizer = CTulAddressStringTokenizer::NewL(text, searchCase);</pre> <p>The method takes two parameters of type <code class="codeph">TDesC&amp;</code> and <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D35F2DD5-09A3-366C-8384-46FEB6B7DB18.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D35F2DD5-09A3-366C-8384-46FEB6B7DB18.html"><code class="apiname">TTokenizerSearchCase</code></a> which is
defined in <code class="codeph">tuladdressstringtokenizer.h</code>. </p> <p>The first
parameter defines the text to be searched from. </p> <p>The second parameter
tells what exactly is being looked for. It is an enum which describes the
type of text being searched for. The types available are phone number, email
address, fixed start URL or generic URI. </p> <p>The passed text is parsed
in construction, and found items can be fetched using the <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D35F2DD5-09A3-366C-8384-46FEB6B7DB18.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D35F2DD5-09A3-366C-8384-46FEB6B7DB18.html"><code class="apiname">ItemArray()</code></a> method. <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D35F2DD5-09A3-366C-8384-46FEB6B7DB18.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D35F2DD5-09A3-366C-8384-46FEB6B7DB18.html"><code class="apiname">ItemArray()</code></a> returns a constant
array containing all the found items. </p> <p>The interface also offers helper
functions for handling the item array by itself. </p> <p>For more information
on individual methods, please see the reference API for <a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D35F2DD5-09A3-366C-8384-46FEB6B7DB18.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-D35F2DD5-09A3-366C-8384-46FEB6B7DB18.html"><code class="apiname">CTulAddressStringTokenizer</code></a>. </p> <p><strong>Example</strong> </p> <p>This sample code explains a few simple use cases that
search for items from a text string: </p> <pre class="codeblock">// Some text
TBufC&lt;256&gt; strSomeText(_L("Mail to me@someplace.com or call 040 1234567. 
                        You can also tune in to audio feed at rtsp://someplace.com/somefeed.ra."));

// SFoundItem instance
CTulAddressStringTokenizer::SFoundItem item;

// Create an instance of CTulAddressStringTokenizer and search for URLs.
CTulAddressStringTokenizer* singleSearch = CTulAddressStringTokenizer::NewL
                                           (strSomeText, CTulAddressStringTokenizer::EFindItemSearchScheme);

// Get count of found items
TInt count(singleSearch-&gt;ItemCount());

// Get currently selected item (rtsp://someplace.com/somefeed.ra) to the result 
// variable
singleSearch-&gt;Item(item);
TPtrC16 result(strSomeText.Mid(item.iStartPos, item.iLength));

// Deallocate memory
delete singleSearch;

// Look for all possible things (cases work as binary mask)
CTulAddressStringTokenizer* multiSearch = CTulAddressStringTokenizer::NewL
                                          (strSomeText, (CTulAddressStringTokenizer::TTokenizerSearchCase)
                                          (CTulAddressStringTokenizer::EFindItemSearchPhoneNumberBin |           
                                          CTulAddressStringTokenizer::EFindItemSearchURLBin | 
                                          CTulAddressStringTokenizer::EFindItemSearchMailAddressBin | 
                                          CTulAddressStringTokenizer::EFindItemSearchScheme));

// Debug print all items and their type
count = multiSearch-&gt;ItemCount();
multiSearch-&gt;Item(item);

for(TInt i=0; i&lt;count; i++)
    {
    result.Set(strSomeText.Mid(item.iStartPos, item.iLength));
    RDebug::Print(_L("Found type %d item:"), item.iItemType);
    RDebug::Print(_L("%S"), &amp;result)
    multiSearch-&gt;NextItem(item);
    }

// Deallocate memory
delete multiSearch;
</pre> <p><strong>Sequence Diagram</strong> </p> <div class="figure" id="GUID-1FD4B286-A5EE-43B7-BE5C-A22AB47A8E00"><img src="GUID-C2D6BAB9-89BA-4E8D-82B4-2FAE04B9086C_d0e92204_href.png" /><p class="figure-title"><strong>Figure: </strong>                 Sequence of events for <code class="codeph">CTulAddressStringTokenizer</code></p></div> </div>
</div></div></div><div class="footer"><p class="metadata">Last updated April 9th, 2010</p><hr /><div class="copy">Â© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-CE7C84A5-D2E6-5151-BBC7-6AF9C8A0D978.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:51:08 GMT -->
</html>