
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:05:42 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="How to use the SIP Profile API" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-6425B722-4095-56E3-9198-70BA3E06C617" /><meta name="DC.Relation" scheme="URI" content="GUID-057F1F82-56AF-5696-853E-79196A3D567E" /><meta name="DC.Relation" scheme="URI" content="GUID-399EAC59-643D-5DED-AB67-9F021CA5687A" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67" /><meta name="DC.Language" content="en" /><title>How to use the SIP Profile API </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67">How to use the SIP Profile API</h1><div><div id="GUID-D9ED74C5-20D0-5636-993B-06C05CD90E6A"><h3 class="section-title">Protocols</h3> <p>This section provides the information about the protocol and error handling related to the SIP Profile API: </p> <ul><li id="GUID-71AB3403-EAD0-5444-8B54-8F9A9F463942"><a name="GUID-71AB3403-EAD0-5444-8B54-8F9A9F463942"><!-- --></a><p>When you create a CSIPProfileRegistry object, the client connects to the shared SIP Profile server. <strong>Note</strong>: If the server is not running, it is started by the API implementation. </p> <p>When the CSIPProfileRegistry object is deleted, the corresponding connection to the server is closed. The server stops if it has no other users. </p> </li> <li id="GUID-35DDE98D-1135-5556-8C8B-0CD5F65CA642"><a name="GUID-35DDE98D-1135-5556-8C8B-0CD5F65CA642"><!-- --></a><p>The profile data is transferred from the server to the client when a user retrieves a CSIPProfile object through CSIPProfileRegistry. </p> <p>When the client holds an instance of CSIPProfile in its memory, all events related to the corresponding profile use MSIPProfileRegistryObserver callback functions to notify the client. The callback functions are implemented by the client. </p> <p> <strong>Note</strong>: A CSIPProfile object is created each time a profile is retrieved. </p> </li> <li id="GUID-12B99D92-A992-5C77-8E3E-65472E1994AF"><a name="GUID-12B99D92-A992-5C77-8E3E-65472E1994AF"><!-- --></a><p>When the client deletes the CSIPProfile object, the client is not notified about events. </p> </li> <li id="GUID-B13A5C15-B9EB-5AEF-A490-C4295762D0F8"><a name="GUID-B13A5C15-B9EB-5AEF-A490-C4295762D0F8"><!-- --></a><p>The profile must be active before a CSIPProfile object is used by the SIP Client API. Use the MSIPRegistrationContext::IsContextActive() function to check. A profile becomes active when it is enabled by the client and the state of the profile is <code class="codeph">ERegistered</code>. <code class="codeph">ERegistered</code> is an enum value of the <code class="codeph">TSIPProfileState</code> enum defined in the class CSIPProfileAgent. </p> </li> <li id="GUID-9B116C46-DE47-5838-9753-A7C05844F886"><a name="GUID-9B116C46-DE47-5838-9753-A7C05844F886"><!-- --></a><p>All profiles are automatically registered when they are enabled. If a profile is not registered before being enabled, the registration status change is acknowledged through MSIPProfileRegistryObserver. If the enabled profile is already registered, no additional registration or status change events are sent. </p> </li> <li id="GUID-5F49EEA6-523D-5080-92BA-344EDBE71C57"><a name="GUID-5F49EEA6-523D-5080-92BA-344EDBE71C57"><!-- --></a><p>When a profile is enabled and registered, the client can use it and the SIP Client API to create SIP sessions. An enabled profile cannot be removed from the system while it is used by the client. </p> </li> <li id="GUID-0E0CD639-0976-5B47-A0D1-CB84BFF759D0"><a name="GUID-0E0CD639-0976-5B47-A0D1-CB84BFF759D0"><!-- --></a><p>When a profile is not needed by the client, it is disabled. When you delete an instance of the profile the profile is disabled. </p> </li> </ul> <p>The following illustration shows use of the SIP Profile API. </p> <div class="figure" id="GUID-191B67CA-9715-5A3F-A571-1353BF69F5A4"><img src="GUID-269D6756-98B5-5928-9A83-261C3F729BCE_d0e421481_href.png" /></div> </div> <div id="GUID-7DDA5B21-FC36-54DC-A717-0BF360DD961B"><h3 class="section-title">Error handling</h3> <p>The errors are indicated by return codes, by functions leaving, or by calling callback functions. If an error occurs during a synchronous operation initiated by the client, the called function leaves with a correct error code. </p> <p>If an error occurs during an asynchronous operation, the error is passed to the client through the callback function MSIPProfileRegistryObserver::ProfileRegistryErrorOccurred(). In this case, both the profile identifier and an error code are passed to the client. Any error passed to the client means that the indicated profile is not registered or enabled by the client. </p> </div> </div></div></div><div class="footer"><p class="metadata">Last updated October 8th, 2009</p><hr /><div class="copy">Â© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:05:44 GMT -->
</html>