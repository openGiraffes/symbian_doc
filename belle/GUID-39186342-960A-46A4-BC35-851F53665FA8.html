
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-39186342-960A-46A4-BC35-851F53665FA8.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:56:48 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="task" /><meta name="DC.Title" content="Writing the Version 3 Registration Resource File" /><meta name="abstract" content="The version 3 registration resource file is an evolution of the version 2 . This version is evolved to accommodate extended interfaces." /><meta name="description" content="The version 3 registration resource file is an evolution of the version 2 . This version is evolved to accommodate extended interfaces." /><meta name="DC.Relation" scheme="URI" content="GUID-B541BD01-29BE-4CB7-9420-ABEE0BDC9BA4" /><meta name="DC.Relation" scheme="URI" content="GUID-64D62DD8-3D9C-4659-9658-C0B4D74D6E69" /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657" /><meta name="DC.Relation" scheme="URI" content="GUID-324107D1-6E0B-56DD-BDC0-7296F688A9CF" /><meta name="DC.Relation" scheme="URI" content="GUID-9E92EE30-F2E2-5F28-BB2A-391C09EC69D2" /><meta name="DC.Relation" scheme="URI" content="GUID-110A0151-5719-51BC-8506-C18BE57FB400" /><meta name="DC.Relation" scheme="URI" content="GUID-57F29787-B425-53EA-9DB4-372B77543584" /><meta name="DC.Relation" scheme="URI" content="GUID-9A9103E4-27B0-5CF3-855A-DCD44795A5C0" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-39186342-960A-46A4-BC35-851F53665FA8" /><meta name="DC.Language" content="en" /><title>Writing
the Version 3 Registration Resource File </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-39186342-960A-46A4-BC35-851F53665FA8">Writing
the Version 3 Registration Resource File</h1><div><p>The version 3 registration resource file is an evolution of the
version 2 . This version is evolved to accommodate extended interfaces. </p>
<h3>Steps</h3><ol id="GUID-4DD07DEC-6017-4237-BE46-1D69E5FBD744-GENID-GUID-FEA163D6-C2ED-4A9D-ADDE-7B1998E9DF96"><a name="GUID-4DD07DEC-6017-4237-BE46-1D69E5FBD744-GENID-GUID-FEA163D6-C2ED-4A9D-ADDE-7B1998E9DF96"><!-- --></a>
<li id="GUID-9A69E5AD-E938-4092-A8C2-CB65C37C8962-GENID-GUID-FEA163D6-C2ED-4A9D-ADDE-7B1998E9DF96"><a name="GUID-9A69E5AD-E938-4092-A8C2-CB65C37C8962-GENID-GUID-FEA163D6-C2ED-4A9D-ADDE-7B1998E9DF96"><!-- --></a><p>Set Info_format
to the type of info record that is, <code class="codeph">IMPLEMENTATION_INFO</code> or <code class="codeph">BINARY_IMPLEMENTATION_INFO</code>.
 </p>
</li>
<li id="GUID-BCDAAECA-1C25-4D09-A495-97949B5EF2C8"><a name="GUID-BCDAAECA-1C25-4D09-A495-97949B5EF2C8"><!-- --></a><p><code class="codeph">default_data</code>:
The data identifier field used by the resolver to determine if the implementation
matches a client request.</p>
<p>In <code class="codeph">IMPLEMENTATION_INFO</code> structure, the data type
is changed to accommodate maximum 2 strings with 255 bytes each. </p><p>In <code class="codeph">BINARY_IMPLEMENTATION_INFO</code>,
the data type is changed to accommodate a maximum 512 bytes.  </p>
</li>
<li id="GUID-7892DD48-0E0A-4209-B463-5DDA71F8021D"><a name="GUID-7892DD48-0E0A-4209-B463-5DDA71F8021D"><!-- --></a><p><code class="codeph">opaque_data</code>:
A binary data field that can contain additional data. This additional data
can be used by the custom resolvers.  </p>
<p>In <code class="codeph">IMPLEMENTATION_INFO</code> structure, the data type
is changed to accommodate maximum 2 strings with 255 bytes each. </p><p>In <code class="codeph">BINARY_IMPLEMENTATION_INFO</code> structure,
the data type is changed to accommodate a maximum 512 bytes.  </p>
</li>
<li id="GUID-3A4E66EE-31A6-4717-A6A6-14C4881E962C"><a name="GUID-3A4E66EE-31A6-4717-A6A6-14C4881E962C"><!-- --></a><p><code class="codeph">extended_interfaces</code> a
maximum 8 UID's extended interfaces for both <code class="codeph">IMPLEMENTATION_INFO</code> structure
and <code class="codeph">BINARY_IMPLEMENTATION_INFO</code> structure.  </p>
</li>
<li id="GUID-76A1CE8A-169C-43A2-9231-B310FDF8EEC2"><a name="GUID-76A1CE8A-169C-43A2-9231-B310FDF8EEC2"><!-- --></a><p><code class="codeph">FLAG_ROM_ONLY</code> changed
from bool data type to bit flag.  </p>
<p><code class="codeph">rom_only</code> set to 1 indicates the ROM-only implementation
must be used.  </p><p><code class="codeph">rom_only</code> set to 0 indicates the ROM-only
implementation can be overidden.</p>
</li>
<li id="GUID-AF2EFD83-7116-472A-A1AE-4043236EA238"><a name="GUID-AF2EFD83-7116-472A-A1AE-4043236EA238"><!-- --></a><p>In <code class="codeph">REGISTRY_INFO</code> structure,
the resource_format_version must be <code class="codeph">RESOURCE_FORMAT_VERSION_3</code> .
 </p>
</li>
<li id="GUID-668E4137-3339-4C40-8721-9F9109C936A1"><a name="GUID-668E4137-3339-4C40-8721-9F9109C936A1"><!-- --></a><p>In I<code class="codeph">NTERFACE_INFOstructure</code>,
the <code class="codeph">interface_uid</code> is renamed to <code class="codeph">instantiation_interface_uid</code>. </p>
</li>
<li id="GUID-C4B7C81E-0472-4401-8CA2-EC46D5E48EC5"><a name="GUID-C4B7C81E-0472-4401-8CA2-EC46D5E48EC5"><!-- --></a><p>In <code class="codeph">REGISTRY_INFO</code> structure,
the <code class="codeph">resource_format_version</code> must be <code class="codeph">RESOURCE_FORMAT_VERSION_3</code>.
 </p>
</li>
</ol>
<div><h3 class="section-title">Example</h3><pre class="codeblock">#define IMPLEMENTATION_INFO_RECORD_TYPE1 1
STRUCT IMPLEMENTATION_INFO
	{
	BYTE		info_format;		// = IMPLEMENTATION_INFO_RECORD_TYPE1
	LONG   		implementation_uid;
	BYTE   		version_no;
	LTEXT  		display_name;
	LEN BYTE LTEXT8  default_data[];		// maximum 2 strings with 255 bytes each	
	LEN BYTE LTEXT8  opaque_data[];		// maximum 2 strings with 255 bytes each
	LONG   		extended_interfaces[]; 	// maximum 8 extended interfaces 
	BYTE		flags;			
	}

#define IMPLEMENTATION_INFO_RECORD_TYPE2 2
STRUCT BINARY_IMPLEMENTATION_INFO
	{
	BYTE	  info_format;		        // = IMPLEMENTATION_INFO_RECORD_TYPE2
	LONG	  implementation_uid;
	BYTE	  version_no;
	LTEXT	  display_name;
	BYTE      default_data[];			// maximum 512 bytes
	BYTE 	  opaque_data[];			// maximum 512 bytes
	LONG	  extended_interfaces[];		// maximum 8 extended interfaces 
	BYTE	  flags;			
	}

STRUCT INTERFACE_INFO
	{
	LONG	instantiation_interface_uid;
	STRUCT	implementations[];		// maximum 8 implementations for each interface
	}

STRUCT REGISTRY_INFO
	{
	LONG	resource_format_version;    	// Use RESOURCE_FORMAT_VERSION_3
	LONG	dll_uid;
	STRUCT	interfaces[];			// maximum 4 interfaces
	} </pre></div>
<div><h3 class="section-title">Next actions</h3><div class="p"><ul>
<li><p>Maximum of four<code class="codeph">INTERFACE_INFO</code> structures can be defined
in one resource file.  </p></li>
<li><p>Maximum of eight <code class="codeph">IMPLEMENTATION_INFO</code> or <code class="codeph">BINARY_IMPLEMENTATION_INFO</code> structures
in each <code class="codeph">INTERFACE_INFO</code> . Totally eight structures can be
defined.  </p></li>
<li><p>Maximum eight extended interfaces in each<code class="codeph"> IMPLEMENTATION_INFO</code> record. </p></li>
<li><p>In a <code class="codeph">IMPLEMENTATION_INFO</code> record a maximum of two strings
with 255 bytes each can be used for <code class="codeph">default_data</code> or<code class="codeph">opaque_data</code> definitions. </p></li>
<li><p>In a <code class="codeph">BINARY_IMPLEMENTATION_INFO</code> record, a maximum
of 512 bytes each for <code class="codeph">default_data</code> or <code class="codeph">opaque_data</code> definitions.
 </p></li>
</ul></div></div>
</div><h3>Related tasks</h3><ul><li><a href="GUID-B541BD01-29BE-4CB7-9420-ABEE0BDC9BA4.html">Writing a
Standard Registration Resource File</a></li><li><a href="GUID-64D62DD8-3D9C-4659-9658-C0B4D74D6E69.html">Writing the
Version 2 Registration Resource File</a></li></ul></div></div><div class="footer"><p class="metadata">Last updated October 16th, 2009</p><hr /><div class="copy">Â© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-39186342-960A-46A4-BC35-851F53665FA8.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 03:56:48 GMT -->
</html>